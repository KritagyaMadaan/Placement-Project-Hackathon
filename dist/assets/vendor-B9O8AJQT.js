function zA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lm={exports:{}},fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function VN(){if(oT)return fu;oT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:a}}return fu.Fragment=e,fu.jsx=n,fu.jsxs=n,fu}var sT;function UN(){return sT||(sT=1,lm.exports=VN()),lm.exports}var O9=UN(),um={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function LN(){if(aT)return we;aT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=T&&F[T]||F["@@iterator"],typeof F=="function"?F:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,D={};function B(F,ie,ce){this.props=F,this.context=ie,this.refs=D,this.updater=ce||k}B.prototype.isReactComponent={},B.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},B.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function J(){}J.prototype=B.prototype;function G(F,ie,ce){this.props=F,this.context=ie,this.refs=D,this.updater=ce||k}var oe=G.prototype=new J;oe.constructor=G,x(oe,B.prototype),oe.isPureReactComponent=!0;var se=Array.isArray;function le(){}var M={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(F,ie,ce){var pe=ce.ref;return{$$typeof:t,type:F,key:ie,ref:pe!==void 0?pe:null,props:ce}}function U(F,ie){return N(F.type,ie,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function q(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ce){return ie[ce]})}var P=/\/+/g;function qe(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):ie.toString(36)}function mt(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(le,le):(F.status="pending",F.then(function(ie){F.status==="pending"&&(F.status="fulfilled",F.value=ie)},function(ie){F.status==="pending"&&(F.status="rejected",F.reason=ie)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function X(F,ie,ce,pe,Ae){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var He=!1;if(F===null)He=!0;else switch(De){case"bigint":case"string":case"number":He=!0;break;case"object":switch(F.$$typeof){case t:case e:He=!0;break;case _:return He=F._init,X(He(F._payload),ie,ce,pe,Ae)}}if(He)return Ae=Ae(F),He=pe===""?"."+qe(F,0):pe,se(Ae)?(ce="",He!=null&&(ce=He.replace(P,"$&/")+"/"),X(Ae,ie,ce,"",function(Oo){return Oo})):Ae!=null&&(L(Ae)&&(Ae=U(Ae,ce+(Ae.key==null||F&&F.key===Ae.key?"":(""+Ae.key).replace(P,"$&/")+"/")+He)),ie.push(Ae)),1;He=0;var Ut=pe===""?".":pe+":";if(se(F))for(var ct=0;ct<F.length;ct++)pe=F[ct],De=Ut+qe(pe,ct),He+=X(pe,ie,ce,De,Ae);else if(ct=I(F),typeof ct=="function")for(F=ct.call(F),ct=0;!(pe=F.next()).done;)pe=pe.value,De=Ut+qe(pe,ct++),He+=X(pe,ie,ce,De,Ae);else if(De==="object"){if(typeof F.then=="function")return X(mt(F),ie,ce,pe,Ae);throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return He}function ae(F,ie,ce){if(F==null)return F;var pe=[],Ae=0;return X(F,pe,"","",function(De){return ie.call(ce,De,Ae++)}),pe}function ye(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(ce){(F._status===0||F._status===-1)&&(F._status=1,F._result=ce)},function(ce){(F._status===0||F._status===-1)&&(F._status=2,F._result=ce)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var ze=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Xe={map:ae,forEach:function(F,ie,ce){ae(F,function(){ie.apply(this,arguments)},ce)},count:function(F){var ie=0;return ae(F,function(){ie++}),ie},toArray:function(F){return ae(F,function(ie){return ie})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return we.Activity=E,we.Children=Xe,we.Component=B,we.Fragment=n,we.Profiler=o,we.PureComponent=G,we.StrictMode=i,we.Suspense=p,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,we.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},we.cache=function(F){return function(){return F.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(F,ie,ce){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var pe=x({},F.props),Ae=F.key;if(ie!=null)for(De in ie.key!==void 0&&(Ae=""+ie.key),ie)!b.call(ie,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ie.ref===void 0||(pe[De]=ie[De]);var De=arguments.length-2;if(De===1)pe.children=ce;else if(1<De){for(var He=Array(De),Ut=0;Ut<De;Ut++)He[Ut]=arguments[Ut+2];pe.children=He}return N(F.type,Ae,pe)},we.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},we.createElement=function(F,ie,ce){var pe,Ae={},De=null;if(ie!=null)for(pe in ie.key!==void 0&&(De=""+ie.key),ie)b.call(ie,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ae[pe]=ie[pe]);var He=arguments.length-2;if(He===1)Ae.children=ce;else if(1<He){for(var Ut=Array(He),ct=0;ct<He;ct++)Ut[ct]=arguments[ct+2];Ae.children=Ut}if(F&&F.defaultProps)for(pe in He=F.defaultProps,He)Ae[pe]===void 0&&(Ae[pe]=He[pe]);return N(F,De,Ae)},we.createRef=function(){return{current:null}},we.forwardRef=function(F){return{$$typeof:f,render:F}},we.isValidElement=L,we.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:ye}},we.memo=function(F,ie){return{$$typeof:h,type:F,compare:ie===void 0?null:ie}},we.startTransition=function(F){var ie=M.T,ce={};M.T=ce;try{var pe=F(),Ae=M.S;Ae!==null&&Ae(ce,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(le,ze)}catch(De){ze(De)}finally{ie!==null&&ce.types!==null&&(ie.types=ce.types),M.T=ie}},we.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},we.use=function(F){return M.H.use(F)},we.useActionState=function(F,ie,ce){return M.H.useActionState(F,ie,ce)},we.useCallback=function(F,ie){return M.H.useCallback(F,ie)},we.useContext=function(F){return M.H.useContext(F)},we.useDebugValue=function(){},we.useDeferredValue=function(F,ie){return M.H.useDeferredValue(F,ie)},we.useEffect=function(F,ie){return M.H.useEffect(F,ie)},we.useEffectEvent=function(F){return M.H.useEffectEvent(F)},we.useId=function(){return M.H.useId()},we.useImperativeHandle=function(F,ie,ce){return M.H.useImperativeHandle(F,ie,ce)},we.useInsertionEffect=function(F,ie){return M.H.useInsertionEffect(F,ie)},we.useLayoutEffect=function(F,ie){return M.H.useLayoutEffect(F,ie)},we.useMemo=function(F,ie){return M.H.useMemo(F,ie)},we.useOptimistic=function(F,ie){return M.H.useOptimistic(F,ie)},we.useReducer=function(F,ie,ce){return M.H.useReducer(F,ie,ce)},we.useRef=function(F){return M.H.useRef(F)},we.useState=function(F){return M.H.useState(F)},we.useSyncExternalStore=function(F,ie,ce){return M.H.useSyncExternalStore(F,ie,ce)},we.useTransition=function(){return M.H.useTransition()},we.version="19.2.4",we}var lT;function Ig(){return lT||(lT=1,um.exports=LN()),um.exports}var Z=Ig();const F9=zA(Z);var cm={exports:{}},du={},fm={exports:{}},dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function ON(){return uT||(uT=1,(function(t){function e(X,ae){var ye=X.length;X.push(ae);e:for(;0<ye;){var ze=ye-1>>>1,Xe=X[ze];if(0<o(Xe,ae))X[ze]=ae,X[ye]=Xe,ye=ze;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ae=X[0],ye=X.pop();if(ye!==ae){X[0]=ye;e:for(var ze=0,Xe=X.length,F=Xe>>>1;ze<F;){var ie=2*(ze+1)-1,ce=X[ie],pe=ie+1,Ae=X[pe];if(0>o(ce,ye))pe<Xe&&0>o(Ae,ce)?(X[ze]=Ae,X[pe]=ye,ze=pe):(X[ze]=ce,X[ie]=ye,ze=ie);else if(pe<Xe&&0>o(Ae,ye))X[ze]=Ae,X[pe]=ye,ze=pe;else break e}}return ae}function o(X,ae){var ye=X.sortIndex-ae.sortIndex;return ye!==0?ye:X.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var p=[],h=[],_=1,E=null,T=3,I=!1,k=!1,x=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function oe(X){for(var ae=n(h);ae!==null;){if(ae.callback===null)i(h);else if(ae.startTime<=X)i(h),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(h)}}function se(X){if(x=!1,oe(X),!k)if(n(p)!==null)k=!0,le||(le=!0,q());else{var ae=n(h);ae!==null&&mt(se,ae.startTime-X)}}var le=!1,M=-1,b=5,N=-1;function U(){return D?!0:!(t.unstable_now()-N<b)}function L(){if(D=!1,le){var X=t.unstable_now();N=X;var ae=!0;try{e:{k=!1,x&&(x=!1,J(M),M=-1),I=!0;var ye=T;try{t:{for(oe(X),E=n(p);E!==null&&!(E.expirationTime>X&&U());){var ze=E.callback;if(typeof ze=="function"){E.callback=null,T=E.priorityLevel;var Xe=ze(E.expirationTime<=X);if(X=t.unstable_now(),typeof Xe=="function"){E.callback=Xe,oe(X),ae=!0;break t}E===n(p)&&i(p),oe(X)}else i(p);E=n(p)}if(E!==null)ae=!0;else{var F=n(h);F!==null&&mt(se,F.startTime-X),ae=!1}}break e}finally{E=null,T=ye,I=!1}ae=void 0}}finally{ae?q():le=!1}}}var q;if(typeof G=="function")q=function(){G(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,qe=P.port2;P.port1.onmessage=L,q=function(){qe.postMessage(null)}}else q=function(){B(L,0)};function mt(X,ae){M=B(function(){X(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(X){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var ye=T;T=ae;try{return X()}finally{T=ye}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=T;T=X;try{return ae()}finally{T=ye}},t.unstable_scheduleCallback=function(X,ae,ye){var ze=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ze+ye:ze):ye=ze,X){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=ye+Xe,X={id:_++,callback:ae,priorityLevel:X,startTime:ye,expirationTime:Xe,sortIndex:-1},ye>ze?(X.sortIndex=ye,e(h,X),n(p)===null&&X===n(h)&&(x?(J(M),M=-1):x=!0,mt(se,ye-ze))):(X.sortIndex=Xe,e(p,X),k||I||(k=!0,le||(le=!0,q()))),X},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(X){var ae=T;return function(){var ye=T;T=ae;try{return X.apply(this,arguments)}finally{T=ye}}}})(dm)),dm}var cT;function FN(){return cT||(cT=1,fm.exports=ON()),fm.exports}var hm={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function qN(){if(fT)return tn;fT=1;var t=Ig();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:h,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},tn.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},tn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},tn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},tn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,E=f(_,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):_==="script"&&i.d.X(p,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},tn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},tn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=f(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},tn.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=f(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},tn.requestFormReset=function(p){i.d.r(p)},tn.unstable_batchedUpdates=function(p,h){return p(h)},tn.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},tn.version="19.2.4",tn}var dT;function BN(){if(dT)return hm.exports;dT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),hm.exports=qN(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function HN(){if(hT)return du;hT=1;var t=FN(),e=Ig(),n=BN();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function p(r){if(a(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=a(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,c=s;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),r;if(v===c)return p(y),s;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=v;break}if(R===c){A=!0,c=y,l=v;break}R=R.sibling}if(!A){for(R=v.child;R;){if(R===l){A=!0,l=v,c=y;break}if(R===c){A=!0,c=v,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function _(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=_(r),s!==null)return s;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),G=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(r){return r===null||typeof r!="object"?null:(r=L&&r[L]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function qe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case B:return"Profiler";case D:return"StrictMode";case se:return"Suspense";case le:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case G:return r.displayName||"Context";case J:return(r._context.displayName||"Context")+".Consumer";case oe:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return s=r.displayName||null,s!==null?s:qe(r.type)||"Memo";case b:s=r._payload,r=r._init;try{return qe(r(s))}catch{}}return null}var mt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},ze=[],Xe=-1;function F(r){return{current:r}}function ie(r){0>Xe||(r.current=ze[Xe],ze[Xe]=null,Xe--)}function ce(r,s){Xe++,ze[Xe]=r.current,r.current=s}var pe=F(null),Ae=F(null),De=F(null),He=F(null);function Ut(r,s){switch(ce(De,s),ce(Ae,r),ce(pe,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?NE(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=NE(s),r=bE(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(pe),ce(pe,r)}function ct(){ie(pe),ie(Ae),ie(De)}function Oo(r){r.memoizedState!==null&&ce(He,r);var s=pe.current,l=bE(s,r.type);s!==l&&(ce(Ae,r),ce(pe,l))}function Ls(r){Ae.current===r&&(ie(pe),ie(Ae)),He.current===r&&(ie(He),au._currentValue=ye)}var Os,Fs;function Ci(r){if(Os===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Os=s&&s[1]||"",Fs=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Os+r+Fs}var al=!1;function Fo(r,s){if(!r||al)return"";al=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var Y=W}Reflect.construct(r,[],ne)}else{try{ne.call()}catch(W){Y=W}r.call(ne.prototype)}}else{try{throw Error()}catch(W){Y=W}(ne=r())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],R=v[1];if(A&&R){var V=A.split(`
`),K=R.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===K.length)for(c=V.length-1,y=K.length-1;1<=c&&0<=y&&V[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==K[y]){var j=`
`+V[c].replace(" at new "," at ");return r.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",r.displayName)),j}while(1<=c&&0<=y);break}}}finally{al=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Ci(l):""}function ll(r,s){switch(r.tag){case 26:case 27:case 5:return Ci(r.type);case 16:return Ci("Lazy");case 13:return r.child!==s&&s!==null?Ci("Suspense Fallback"):Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return Fo(r.type,!1);case 11:return Fo(r.type.render,!1);case 1:return Fo(r.type,!0);case 31:return Ci("Activity");default:return""}}function ul(r){try{var s="",l=null;do s+=ll(r,l),l=r,r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,Lt=t.unstable_scheduleCallback,xr=t.unstable_cancelCallback,ch=t.unstable_shouldYield,tc=t.unstable_requestPaint,ln=t.unstable_now,qo=t.unstable_getCurrentPriorityLevel,cl=t.unstable_ImmediatePriority,fl=t.unstable_UserBlockingPriority,Vr=t.unstable_NormalPriority,fh=t.unstable_LowPriority,nc=t.unstable_IdlePriority,ic=t.log,rc=t.unstable_setDisableYieldValue,ti=null,Kt=null;function Vn(r){if(typeof ic=="function"&&rc(r),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(ti,r)}catch{}}var _t=Math.clz32?Math.clz32:sc,oc=Math.log,qs=Math.LN2;function sc(r){return r>>>=0,r===0?32:31-(oc(r)/qs|0)|0}var Ii=256,Bo=262144,Ct=4194304;function Ri(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function wi(r,s,l){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=Ri(c):(A&=R,A!==0?y=Ri(A):l||(l=R&~r,l!==0&&(y=Ri(l))))):(R=c&~v,R!==0?y=Ri(R):A!==0?y=Ri(A):l||(l=c&~r,l!==0&&(y=Ri(l)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,l=s&-s,v>=l||v===32&&(l&4194048)!==0)?s:y}function ni(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function dh(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ac(){var r=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),r}function Ni(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Ho(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function hh(r,s,l,c,y,v){var A=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var R=r.entanglements,V=r.expirationTimes,K=r.hiddenUpdates;for(l=A&~l;0<l;){var j=31-_t(l),ne=1<<j;R[j]=0,V[j]=-1;var Y=K[j];if(Y!==null)for(K[j]=null,j=0;j<Y.length;j++){var W=Y[j];W!==null&&(W.lane&=-536870913)}l&=~ne}c!==0&&Go(r,c,0),v!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=v&~(A&~s))}function Go(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-_t(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function dl(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var c=31-_t(l),y=1<<c;y&s|r[c]&s&&(r[c]|=s),l&=~y}}function hl(r,s){var l=s&-s;return l=(l&42)!==0?1:zo(l),(l&(r.suspendedLanes|s))!==0?0:l}function zo(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function nr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function lc(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:ZE(r.type))}function ii(r,s){var l=ae.p;try{return ae.p=r,s()}finally{ae.p=l}}var ri=Math.random().toString(36).slice(2),It="__reactFiber$"+ri,Bt="__reactProps$"+ri,bi="__reactContainer$"+ri,Bs="__reactEvents$"+ri,ph="__reactListeners$"+ri,uc="__reactHandles$"+ri,cc="__reactResources$"+ri,Mi="__reactMarker$"+ri;function Hs(r){delete r[It],delete r[Bt],delete r[Bs],delete r[ph],delete r[uc]}function Di(r){var s=r[It];if(s)return s;for(var l=r.parentNode;l;){if(s=l[bi]||l[It]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=UE(r);r!==null;){if(l=r[It])return l;r=UE(r)}return s}r=l,l=r.parentNode}return null}function Un(r){if(r=r[It]||r[bi]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function An(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Pi(r){var s=r[cc];return s||(s=r[cc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Rt(r){r[Mi]=!0}var pl=new Set,ml={};function ki(r,s){xi(r,s),xi(r+"Capture",s)}function xi(r,s){for(ml[r]=s,r=0;r<s.length;r++)pl.add(s[r])}var gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yl={},_l={};function fc(r){return At.call(_l,r)?!0:At.call(yl,r)?!1:gl.test(r)?_l[r]=!0:(yl[r]=!0,!1)}function Gs(r,s,l){if(fc(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function Cn(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function wt(r,s,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+c)}}function Ht(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ur(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vl(r,s,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ze(r){if(!r._valueTracker){var s=Ur(r)?"checked":"value";r._valueTracker=vl(r,s,""+r[s])}}function $o(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return r&&(c=Ur(r)?r.checked?"true":"false":r.value),r=c,r!==l?(s.setValue(r),!0):!1}function Vi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ko=/[\n"\\]/g;function pn(r){return r.replace(Ko,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zs(r,s,l,c,y,v,A,R){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),s!=null?A==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Ht(s)):r.value!==""+Ht(s)&&(r.value=""+Ht(s)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),s!=null?El(r,A,Ht(s)):l!=null?El(r,A,Ht(l)):c!=null&&r.removeAttribute("value"),y==null&&v!=null&&(r.defaultChecked=!!v),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+Ht(R):r.removeAttribute("name")}function dc(r,s,l,c,y,v,A,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),s!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){Ze(r);return}l=l!=null?""+Ht(l):"",s=s!=null?""+Ht(s):l,R||s===r.value||(r.value=s),r.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=R?r.checked:!!c,r.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),Ze(r)}function El(r,s,l){s==="number"&&Vi(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Lr(r,s,l,c){if(r=r.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<r.length;l++)y=s.hasOwnProperty("$"+r[l].value),r[l].selected!==y&&(r[l].selected=y),y&&c&&(r[l].defaultSelected=!0)}else{for(l=""+Ht(l),s=null,y=0;y<r.length;y++){if(r[y].value===l){r[y].selected=!0,c&&(r[y].defaultSelected=!0);return}s!==null||r[y].disabled||(s=r[y])}s!==null&&(s.selected=!0)}}function hc(r,s,l){if(s!=null&&(s=""+Ht(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+Ht(l):""}function Or(r,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(mt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=Ht(s),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),Ze(r)}function mn(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var pc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(r,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,l):typeof l!="number"||l===0||pc.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function Sl(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&l[y]!==c&&Tl(r,y,c)}else for(var v in s)s.hasOwnProperty(v)&&Tl(r,v,s[v])}function $s(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ks(r){return Fr.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function oi(){}var Al=null;function Ln(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var qr=null,Ui=null;function Yo(r){var s=Un(r);if(s&&(r=s.stateNode)){var l=r[Bt]||null;e:switch(r=s.stateNode,s.type){case"input":if(zs(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+pn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==r&&c.form===r.form){var y=c[Bt]||null;if(!y)throw Error(i(90));zs(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===r.form&&$o(c)}break e;case"textarea":hc(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Lr(r,!!l.multiple,s,!1)}}}var Ys=!1;function Br(r,s,l){if(Ys)return r(s,l);Ys=!0;try{var c=r(s);return c}finally{if(Ys=!1,(qr!==null||Ui!==null)&&(uf(),qr&&(s=qr,r=Ui,Ui=qr=null,Yo(s),r)))for(s=0;s<r.length;s++)Yo(r[s])}}function si(r,s){var l=r.stateNode;if(l===null)return null;var c=l[Bt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(On)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Jo=!1}var Li=null,Cl=null,Qo=null;function Il(){if(Qo)return Qo;var r,s=Cl,l=s.length,c,y="value"in Li?Li.value:Li.textContent,v=y.length;for(r=0;r<l&&s[r]===y[r];r++);var A=l-r;for(c=1;c<=A&&s[l-c]===y[v-c];c++);return Qo=y.slice(r,1<c?1-c:void 0)}function Wo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ir(){return!0}function ai(){return!1}function Yt(r){function s(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(l=r[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ir:ai,this.isPropagationStopped=ai,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),s}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Yt(rr),Hr=E({},rr,{view:0,detail:0}),Rl=Yt(Hr),Gr,Js,Fi,Qs=E({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fi&&(Fi&&r.type==="mousemove"?(Gr=r.screenX-Fi.screenX,Js=r.screenY-Fi.screenY):Js=Gr=0,Fi=r),Gr)},movementY:function(r){return"movementY"in r?r.movementY:Js}}),wl=Yt(Qs),Xo=E({},Qs,{dataTransfer:0}),gc=Yt(Xo),yc=E({},Hr,{relatedTarget:0}),Zo=Yt(yc),Nl=E({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),_c=Yt(Nl),Ws=E({},rr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),vc=Yt(Ws),Ec=E({},rr,{data:0}),qi=Yt(Ec),Tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Ac[r])?!!s[r]:!1}function zr(){return Cc}var un=E({},Hr,{key:function(r){if(r.key){var s=Tc[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Wo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Sc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(r){return r.type==="keypress"?Wo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Wo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ic=Yt(un),Rc=E({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),or=Yt(Rc),g=E({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),S=Yt(g),C=E({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Yt(C),z=E({},Qs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Yt(z),ue=E({},rr,{newState:0,oldState:0}),be=Yt(ue),vt=[9,13,27,32],Je=On&&"CompositionEvent"in window,ft=null;On&&"documentMode"in document&&(ft=document.documentMode);var Fn=On&&"TextEvent"in window&&!ft,Bi=On&&(!Je||ft&&8<ft&&11>=ft),li=" ",ui=!1;function jo(r,s){switch(r){case"keyup":return vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xs(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zs=!1;function o1(r,s){switch(r){case"compositionend":return Xs(s);case"keypress":return s.which!==32?null:(ui=!0,li);case"textInput":return r=s.data,r===li&&ui?null:r;default:return null}}function s1(r,s){if(Zs)return r==="compositionend"||!Je&&jo(r,s)?(r=Il(),Qo=Cl=Li=null,Zs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bi&&s.locale!=="ko"?null:s.data;default:return null}}var a1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!a1[r.type]:s==="textarea"}function qy(r,s,l,c){qr?Ui?Ui.push(c):Ui=[c]:qr=c,s=gf(s,"onChange"),0<s.length&&(l=new Oi("onChange","change",null,l,c),r.push({event:l,listeners:s}))}var bl=null,Ml=null;function l1(r){SE(r,0)}function wc(r){var s=An(r);if($o(s))return r}function By(r,s){if(r==="change")return s}var Hy=!1;if(On){var mh;if(On){var gh="oninput"in document;if(!gh){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),gh=typeof Gy.oninput=="function"}mh=gh}else mh=!1;Hy=mh&&(!document.documentMode||9<document.documentMode)}function zy(){bl&&(bl.detachEvent("onpropertychange",$y),Ml=bl=null)}function $y(r){if(r.propertyName==="value"&&wc(Ml)){var s=[];qy(s,Ml,r,Ln(r)),Br(l1,s)}}function u1(r,s,l){r==="focusin"?(zy(),bl=s,Ml=l,bl.attachEvent("onpropertychange",$y)):r==="focusout"&&zy()}function c1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return wc(Ml)}function f1(r,s){if(r==="click")return wc(s)}function d1(r,s){if(r==="input"||r==="change")return wc(s)}function h1(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var In=typeof Object.is=="function"?Object.is:h1;function Dl(r,s){if(In(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!At.call(s,y)||!In(r[y],s[y]))return!1}return!0}function Ky(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Yy(r,s){var l=Ky(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=s&&c>=s)return{node:l,offset:s-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ky(l)}}function Jy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Jy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Qy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Vi(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Vi(r.document)}return s}function yh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var p1=On&&"documentMode"in document&&11>=document.documentMode,js=null,_h=null,Pl=null,vh=!1;function Wy(r,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vh||js==null||js!==Vi(c)||(c=js,"selectionStart"in c&&yh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pl&&Dl(Pl,c)||(Pl=c,c=gf(_h,"onSelect"),0<c.length&&(s=new Oi("onSelect","select",null,s,l),r.push({event:s,listeners:c}),s.target=js)))}function es(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var ea={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},Eh={},Xy={};On&&(Xy=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function ts(r){if(Eh[r])return Eh[r];if(!ea[r])return r;var s=ea[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Xy)return Eh[r]=s[l];return r}var Zy=ts("animationend"),jy=ts("animationiteration"),e_=ts("animationstart"),m1=ts("transitionrun"),g1=ts("transitionstart"),y1=ts("transitioncancel"),t_=ts("transitionend"),n_=new Map,Th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Th.push("scrollEnd");function ci(r,s){n_.set(r,s),ki(s,[r])}var Nc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},qn=[],ta=0,Sh=0;function bc(){for(var r=ta,s=Sh=ta=0;s<r;){var l=qn[s];qn[s++]=null;var c=qn[s];qn[s++]=null;var y=qn[s];qn[s++]=null;var v=qn[s];if(qn[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&i_(l,y,v)}}function Mc(r,s,l,c){qn[ta++]=r,qn[ta++]=s,qn[ta++]=l,qn[ta++]=c,Sh|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Ah(r,s,l,c){return Mc(r,s,l,c),Dc(r)}function ns(r,s){return Mc(r,null,null,s),Dc(r)}function i_(r,s,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=r.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(y=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,y&&s!==null&&(y=31-_t(l),r=v.hiddenUpdates,c=r[y],c===null?r[y]=[s]:c.push(s),s.lane=l|536870912),v):null}function Dc(r){if(50<eu)throw eu=0,Pp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var na={};function _1(r,s,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(r,s,l,c){return new _1(r,s,l,c)}function Ch(r){return r=r.prototype,!(!r||!r.isReactComponent)}function sr(r,s){var l=r.alternate;return l===null?(l=Rn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function r_(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Pc(r,s,l,c,y,v){var A=0;if(c=r,typeof r=="function")Ch(r)&&(A=1);else if(typeof r=="string")A=AN(r,l,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=Rn(31,l,s,y),r.elementType=N,r.lanes=v,r;case x:return is(l.children,y,v,s);case D:A=8,y|=24;break;case B:return r=Rn(12,l,s,y|2),r.elementType=B,r.lanes=v,r;case se:return r=Rn(13,l,s,y),r.elementType=se,r.lanes=v,r;case le:return r=Rn(19,l,s,y),r.elementType=le,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:A=10;break e;case J:A=9;break e;case oe:A=11;break e;case M:A=14;break e;case b:A=16,c=null;break e}A=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Rn(A,l,s,y),s.elementType=r,s.type=c,s.lanes=v,s}function is(r,s,l,c){return r=Rn(7,r,c,s),r.lanes=l,r}function Ih(r,s,l){return r=Rn(6,r,null,s),r.lanes=l,r}function o_(r){var s=Rn(18,null,null,0);return s.stateNode=r,s}function Rh(r,s,l){return s=Rn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var s_=new WeakMap;function Bn(r,s){if(typeof r=="object"&&r!==null){var l=s_.get(r);return l!==void 0?l:(s={value:r,source:s,stack:ul(s)},s_.set(r,s),s)}return{value:r,source:s,stack:ul(s)}}var ia=[],ra=0,kc=null,kl=0,Hn=[],Gn=0,$r=null,Hi=1,Gi="";function ar(r,s){ia[ra++]=kl,ia[ra++]=kc,kc=r,kl=s}function a_(r,s,l){Hn[Gn++]=Hi,Hn[Gn++]=Gi,Hn[Gn++]=$r,$r=r;var c=Hi;r=Gi;var y=32-_t(c)-1;c&=~(1<<y),l+=1;var v=32-_t(s)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Hi=1<<32-_t(s)+y|l<<y|c,Gi=v+r}else Hi=1<<v|l<<y|c,Gi=r}function wh(r){r.return!==null&&(ar(r,1),a_(r,1,0))}function Nh(r){for(;r===kc;)kc=ia[--ra],ia[ra]=null,kl=ia[--ra],ia[ra]=null;for(;r===$r;)$r=Hn[--Gn],Hn[Gn]=null,Gi=Hn[--Gn],Hn[Gn]=null,Hi=Hn[--Gn],Hn[Gn]=null}function l_(r,s){Hn[Gn++]=Hi,Hn[Gn++]=Gi,Hn[Gn++]=$r,Hi=s.id,Gi=s.overflow,$r=r}var Jt=null,at=null,Be=!1,Kr=null,zn=!1,bh=Error(i(519));function Yr(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(Bn(s,r)),bh}function u_(r){var s=r.stateNode,l=r.type,c=r.memoizedProps;switch(s[It]=r,s[Bt]=c,l){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(l=0;l<nu.length;l++)xe(nu[l],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":xe("invalid",s),dc(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":xe("invalid",s);break;case"textarea":xe("invalid",s),Or(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||RE(s.textContent,l)?(c.popover!=null&&(xe("beforetoggle",s),xe("toggle",s)),c.onScroll!=null&&xe("scroll",s),c.onScrollEnd!=null&&xe("scrollend",s),c.onClick!=null&&(s.onclick=oi),s=!0):s=!1,s||Yr(r,!0)}function c_(r){for(Jt=r.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Jt=Jt.return}}function oa(r){if(r!==Jt)return!1;if(!Be)return c_(r),Be=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Yp(r.type,r.memoizedProps)),l=!l),l&&at&&Yr(r),c_(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));at=VE(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));at=VE(r)}else s===27?(s=at,ao(r.type)?(r=Zp,Zp=null,at=r):at=s):at=Jt?Kn(r.stateNode.nextSibling):null;return!0}function rs(){at=Jt=null,Be=!1}function Mh(){var r=Kr;return r!==null&&(vn===null?vn=r:vn.push.apply(vn,r),Kr=null),r}function xl(r){Kr===null?Kr=[r]:Kr.push(r)}var Dh=F(null),os=null,lr=null;function Jr(r,s,l){ce(Dh,s._currentValue),s._currentValue=l}function ur(r){r._currentValue=Dh.current,ie(Dh)}function Ph(r,s,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===l)break;r=r.return}}function kh(r,s,l,c){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var V=0;V<s.length;V++)if(R.context===s[V]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),Ph(v.return,l,r),c||(A=null);break e}v=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),Ph(A,l,r),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===r){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function sa(r,s,l,c){r=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;In(y.pendingProps.value,A.value)||(r!==null?r.push(R):r=[R])}}else if(y===He.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(au):r=[au])}y=y.return}r!==null&&kh(s,r,l,c),s.flags|=262144}function xc(r){for(r=r.firstContext;r!==null;){if(!In(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ss(r){os=r,lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Qt(r){return f_(os,r)}function Vc(r,s){return os===null&&ss(r),f_(r,s)}function f_(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},lr===null){if(r===null)throw Error(i(308));lr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else lr=lr.next=s;return l}var v1=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},E1=t.unstable_scheduleCallback,T1=t.unstable_NormalPriority,Nt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xh(){return{controller:new v1,data:new Map,refCount:0}}function Vl(r){r.refCount--,r.refCount===0&&E1(T1,function(){r.controller.abort()})}var Ul=null,Vh=0,aa=0,la=null;function S1(r,s){if(Ul===null){var l=Ul=[];Vh=0,aa=Op(),la={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Vh++,s.then(d_,d_),s}function d_(){if(--Vh===0&&Ul!==null){la!==null&&(la.status="fulfilled");var r=Ul;Ul=null,aa=0,la=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function A1(r,s){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var h_=X.S;X.S=function(r,s){Wv=ln(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&S1(r,s),h_!==null&&h_(r,s)};var as=F(null);function Uh(){var r=as.current;return r!==null?r:ot.pooledCache}function Uc(r,s){s===null?ce(as,as.current):ce(as,s.pool)}function p_(){var r=Uh();return r===null?null:{parent:Nt._currentValue,pool:r}}var ua=Error(i(460)),Lh=Error(i(474)),Lc=Error(i(542)),Oc={then:function(){}};function m_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function g_(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(oi,oi),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,__(r),r;default:if(typeof s.status=="string")s.then(oi,oi);else{if(r=ot,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,__(r),r}throw us=s,ua}}function ls(r){try{var s=r._init;return s(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(us=l,ua):l}}var us=null;function y_(){if(us===null)throw Error(i(459));var r=us;return us=null,r}function __(r){if(r===ua||r===Lc)throw Error(i(483))}var ca=null,Ll=0;function Fc(r){var s=Ll;return Ll+=1,ca===null&&(ca=[]),g_(ca,r,s)}function Ol(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function qc(r,s){throw s.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function v_(r){function s(H,O){if(r){var $=H.deletions;$===null?(H.deletions=[O],H.flags|=16):$.push(O)}}function l(H,O){if(!r)return null;for(;O!==null;)s(H,O),O=O.sibling;return null}function c(H){for(var O=new Map;H!==null;)H.key!==null?O.set(H.key,H):O.set(H.index,H),H=H.sibling;return O}function y(H,O){return H=sr(H,O),H.index=0,H.sibling=null,H}function v(H,O,$){return H.index=$,r?($=H.alternate,$!==null?($=$.index,$<O?(H.flags|=67108866,O):$):(H.flags|=67108866,O)):(H.flags|=1048576,O)}function A(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function R(H,O,$,ee){return O===null||O.tag!==6?(O=Ih($,H.mode,ee),O.return=H,O):(O=y(O,$),O.return=H,O)}function V(H,O,$,ee){var _e=$.type;return _e===x?j(H,O,$.props.children,ee,$.key):O!==null&&(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===b&&ls(_e)===O.type)?(O=y(O,$.props),Ol(O,$),O.return=H,O):(O=Pc($.type,$.key,$.props,null,H.mode,ee),Ol(O,$),O.return=H,O)}function K(H,O,$,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=Rh($,H.mode,ee),O.return=H,O):(O=y(O,$.children||[]),O.return=H,O)}function j(H,O,$,ee,_e){return O===null||O.tag!==7?(O=is($,H.mode,ee,_e),O.return=H,O):(O=y(O,$),O.return=H,O)}function ne(H,O,$){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ih(""+O,H.mode,$),O.return=H,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case I:return $=Pc(O.type,O.key,O.props,null,H.mode,$),Ol($,O),$.return=H,$;case k:return O=Rh(O,H.mode,$),O.return=H,O;case b:return O=ls(O),ne(H,O,$)}if(mt(O)||q(O))return O=is(O,H.mode,$,null),O.return=H,O;if(typeof O.then=="function")return ne(H,Fc(O),$);if(O.$$typeof===G)return ne(H,Vc(H,O),$);qc(H,O)}return null}function Y(H,O,$,ee){var _e=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return _e!==null?null:R(H,O,""+$,ee);if(typeof $=="object"&&$!==null){switch($.$$typeof){case I:return $.key===_e?V(H,O,$,ee):null;case k:return $.key===_e?K(H,O,$,ee):null;case b:return $=ls($),Y(H,O,$,ee)}if(mt($)||q($))return _e!==null?null:j(H,O,$,ee,null);if(typeof $.then=="function")return Y(H,O,Fc($),ee);if($.$$typeof===G)return Y(H,O,Vc(H,$),ee);qc(H,$)}return null}function W(H,O,$,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return H=H.get($)||null,R(O,H,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return H=H.get(ee.key===null?$:ee.key)||null,V(O,H,ee,_e);case k:return H=H.get(ee.key===null?$:ee.key)||null,K(O,H,ee,_e);case b:return ee=ls(ee),W(H,O,$,ee,_e)}if(mt(ee)||q(ee))return H=H.get($)||null,j(O,H,ee,_e,null);if(typeof ee.then=="function")return W(H,O,$,Fc(ee),_e);if(ee.$$typeof===G)return W(H,O,$,Vc(O,ee),_e);qc(O,ee)}return null}function me(H,O,$,ee){for(var _e=null,$e=null,ge=O,Pe=O=0,Ue=null;ge!==null&&Pe<$.length;Pe++){ge.index>Pe?(Ue=ge,ge=null):Ue=ge.sibling;var Ke=Y(H,ge,$[Pe],ee);if(Ke===null){ge===null&&(ge=Ue);break}r&&ge&&Ke.alternate===null&&s(H,ge),O=v(Ke,O,Pe),$e===null?_e=Ke:$e.sibling=Ke,$e=Ke,ge=Ue}if(Pe===$.length)return l(H,ge),Be&&ar(H,Pe),_e;if(ge===null){for(;Pe<$.length;Pe++)ge=ne(H,$[Pe],ee),ge!==null&&(O=v(ge,O,Pe),$e===null?_e=ge:$e.sibling=ge,$e=ge);return Be&&ar(H,Pe),_e}for(ge=c(ge);Pe<$.length;Pe++)Ue=W(ge,H,Pe,$[Pe],ee),Ue!==null&&(r&&Ue.alternate!==null&&ge.delete(Ue.key===null?Pe:Ue.key),O=v(Ue,O,Pe),$e===null?_e=Ue:$e.sibling=Ue,$e=Ue);return r&&ge.forEach(function(ho){return s(H,ho)}),Be&&ar(H,Pe),_e}function Ee(H,O,$,ee){if($==null)throw Error(i(151));for(var _e=null,$e=null,ge=O,Pe=O=0,Ue=null,Ke=$.next();ge!==null&&!Ke.done;Pe++,Ke=$.next()){ge.index>Pe?(Ue=ge,ge=null):Ue=ge.sibling;var ho=Y(H,ge,Ke.value,ee);if(ho===null){ge===null&&(ge=Ue);break}r&&ge&&ho.alternate===null&&s(H,ge),O=v(ho,O,Pe),$e===null?_e=ho:$e.sibling=ho,$e=ho,ge=Ue}if(Ke.done)return l(H,ge),Be&&ar(H,Pe),_e;if(ge===null){for(;!Ke.done;Pe++,Ke=$.next())Ke=ne(H,Ke.value,ee),Ke!==null&&(O=v(Ke,O,Pe),$e===null?_e=Ke:$e.sibling=Ke,$e=Ke);return Be&&ar(H,Pe),_e}for(ge=c(ge);!Ke.done;Pe++,Ke=$.next())Ke=W(ge,H,Pe,Ke.value,ee),Ke!==null&&(r&&Ke.alternate!==null&&ge.delete(Ke.key===null?Pe:Ke.key),O=v(Ke,O,Pe),$e===null?_e=Ke:$e.sibling=Ke,$e=Ke);return r&&ge.forEach(function(xN){return s(H,xN)}),Be&&ar(H,Pe),_e}function rt(H,O,$,ee){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case I:e:{for(var _e=$.key;O!==null;){if(O.key===_e){if(_e=$.type,_e===x){if(O.tag===7){l(H,O.sibling),ee=y(O,$.props.children),ee.return=H,H=ee;break e}}else if(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===b&&ls(_e)===O.type){l(H,O.sibling),ee=y(O,$.props),Ol(ee,$),ee.return=H,H=ee;break e}l(H,O);break}else s(H,O);O=O.sibling}$.type===x?(ee=is($.props.children,H.mode,ee,$.key),ee.return=H,H=ee):(ee=Pc($.type,$.key,$.props,null,H.mode,ee),Ol(ee,$),ee.return=H,H=ee)}return A(H);case k:e:{for(_e=$.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){l(H,O.sibling),ee=y(O,$.children||[]),ee.return=H,H=ee;break e}else{l(H,O);break}else s(H,O);O=O.sibling}ee=Rh($,H.mode,ee),ee.return=H,H=ee}return A(H);case b:return $=ls($),rt(H,O,$,ee)}if(mt($))return me(H,O,$,ee);if(q($)){if(_e=q($),typeof _e!="function")throw Error(i(150));return $=_e.call($),Ee(H,O,$,ee)}if(typeof $.then=="function")return rt(H,O,Fc($),ee);if($.$$typeof===G)return rt(H,O,Vc(H,$),ee);qc(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,O!==null&&O.tag===6?(l(H,O.sibling),ee=y(O,$),ee.return=H,H=ee):(l(H,O),ee=Ih($,H.mode,ee),ee.return=H,H=ee),A(H)):l(H,O)}return function(H,O,$,ee){try{Ll=0;var _e=rt(H,O,$,ee);return ca=null,_e}catch(ge){if(ge===ua||ge===Lc)throw ge;var $e=Rn(29,ge,null,H.mode);return $e.lanes=ee,$e.return=H,$e}finally{}}}var cs=v_(!0),E_=v_(!1),Qr=!1;function Oh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Wr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Xr(r,s,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Qe&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Dc(r),i_(r,null,l),s}return Mc(r,c,s,l),Dc(r)}function Fl(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,dl(r,l)}}function qh(r,s){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=s:v=v.next=s}else y=v=s;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var Bh=!1;function ql(){if(Bh){var r=la;if(r!==null)throw r}}function Bl(r,s,l,c){Bh=!1;var y=r.updateQueue;Qr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var V=R,K=V.next;V.next=null,A===null?v=K:A.next=K,A=V;var j=r.alternate;j!==null&&(j=j.updateQueue,R=j.lastBaseUpdate,R!==A&&(R===null?j.firstBaseUpdate=K:R.next=K,j.lastBaseUpdate=V))}if(v!==null){var ne=y.baseState;A=0,j=K=V=null,R=v;do{var Y=R.lane&-536870913,W=Y!==R.lane;if(W?(Ve&Y)===Y:(c&Y)===Y){Y!==0&&Y===aa&&(Bh=!0),j!==null&&(j=j.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var me=r,Ee=R;Y=s;var rt=l;switch(Ee.tag){case 1:if(me=Ee.payload,typeof me=="function"){ne=me.call(rt,ne,Y);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ee.payload,Y=typeof me=="function"?me.call(rt,ne,Y):me,Y==null)break e;ne=E({},ne,Y);break e;case 2:Qr=!0}}Y=R.callback,Y!==null&&(r.flags|=64,W&&(r.flags|=8192),W=y.callbacks,W===null?y.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},j===null?(K=j=W,V=ne):j=j.next=W,A|=Y;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;W=R,R=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);j===null&&(V=ne),y.baseState=V,y.firstBaseUpdate=K,y.lastBaseUpdate=j,v===null&&(y.shared.lanes=0),no|=A,r.lanes=A,r.memoizedState=ne}}function T_(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function S_(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)T_(l[r],s)}var fa=F(null),Bc=F(0);function A_(r,s){r=_r,ce(Bc,r),ce(fa,s),_r=r|s.baseLanes}function Hh(){ce(Bc,_r),ce(fa,fa.current)}function Gh(){_r=Bc.current,ie(fa),ie(Bc)}var wn=F(null),$n=null;function Zr(r){var s=r.alternate;ce(Et,Et.current&1),ce(wn,r),$n===null&&(s===null||fa.current!==null||s.memoizedState!==null)&&($n=r)}function zh(r){ce(Et,Et.current),ce(wn,r),$n===null&&($n=r)}function C_(r){r.tag===22?(ce(Et,Et.current),ce(wn,r),$n===null&&($n=r)):jr()}function jr(){ce(Et,Et.current),ce(wn,wn.current)}function Nn(r){ie(wn),$n===r&&($n=null),ie(Et)}var Et=F(0);function Hc(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Wp(l)||Xp(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cr=0,Me=null,nt=null,bt=null,Gc=!1,da=!1,fs=!1,zc=0,Hl=0,ha=null,C1=0;function gt(){throw Error(i(321))}function $h(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!In(r[l],s[l]))return!1;return!0}function Kh(r,s,l,c,y,v){return cr=v,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?av:ap,fs=!1,v=l(c,y),fs=!1,da&&(v=R_(s,l,c,y)),I_(r),v}function I_(r){X.H=$l;var s=nt!==null&&nt.next!==null;if(cr=0,bt=nt=Me=null,Gc=!1,Hl=0,ha=null,s)throw Error(i(300));r===null||Mt||(r=r.dependencies,r!==null&&xc(r)&&(Mt=!0))}function R_(r,s,l,c){Me=r;var y=0;do{if(da&&(ha=null),Hl=0,da=!1,25<=y)throw Error(i(301));if(y+=1,bt=nt=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}X.H=lv,v=s(l,c)}while(da);return v}function I1(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?Gl(s):s,r=r.useState()[0],(nt!==null?nt.memoizedState:null)!==r&&(Me.flags|=1024),s}function Yh(){var r=zc!==0;return zc=0,r}function Jh(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Qh(r){if(Gc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gc=!1}cr=0,bt=nt=Me=null,da=!1,Hl=zc=0,ha=null}function cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Me.memoizedState=bt=r:bt=bt.next=r,bt}function Tt(){if(nt===null){var r=Me.alternate;r=r!==null?r.memoizedState:null}else r=nt.next;var s=bt===null?Me.memoizedState:bt.next;if(s!==null)bt=s,nt=r;else{if(r===null)throw Me.alternate===null?Error(i(467)):Error(i(310));nt=r,r={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},bt===null?Me.memoizedState=bt=r:bt=bt.next=r}return bt}function $c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(r){var s=Hl;return Hl+=1,ha===null&&(ha=[]),r=g_(ha,r,s),s=Me,(bt===null?s.memoizedState:bt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?av:ap),r}function Kc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Gl(r);if(r.$$typeof===G)return Qt(r)}throw Error(i(438,String(r)))}function Wh(r){var s=null,l=Me.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=$c(),Me.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),c=0;c<r;c++)l[c]=U;return s.index++,l}function fr(r,s){return typeof s=="function"?s(r):s}function Yc(r){var s=Tt();return Xh(s,nt,r)}function Xh(r,s,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=r.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}s.baseQueue=y=v,c.pending=null}if(v=r.baseState,y===null)r.memoizedState=v;else{s=y.next;var R=A=null,V=null,K=s,j=!1;do{var ne=K.lane&-536870913;if(ne!==K.lane?(Ve&ne)===ne:(cr&ne)===ne){var Y=K.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ne===aa&&(j=!0);else if((cr&Y)===Y){K=K.next,Y===aa&&(j=!0);continue}else ne={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(R=V=ne,A=v):V=V.next=ne,Me.lanes|=Y,no|=Y;ne=K.action,fs&&l(v,ne),v=K.hasEagerState?K.eagerState:l(v,ne)}else Y={lane:ne,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(R=V=Y,A=v):V=V.next=Y,Me.lanes|=ne,no|=ne;K=K.next}while(K!==null&&K!==s);if(V===null?A=v:V.next=R,!In(v,r.memoizedState)&&(Mt=!0,j&&(l=la,l!==null)))throw l;r.memoizedState=v,r.baseState=A,r.baseQueue=V,c.lastRenderedState=v}return y===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Zh(r){var s=Tt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,y=l.pending,v=s.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=r(v,A.action),A=A.next;while(A!==y);In(v,s.memoizedState)||(Mt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,c]}function w_(r,s,l){var c=Me,y=Tt(),v=Be;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=s();var A=!In((nt||y).memoizedState,l);if(A&&(y.memoizedState=l,Mt=!0),y=y.queue,tp(M_.bind(null,c,y,r),[r]),y.getSnapshot!==s||A||bt!==null&&bt.memoizedState.tag&1){if(c.flags|=2048,pa(9,{destroy:void 0},b_.bind(null,c,y,l,s),null),ot===null)throw Error(i(349));v||(cr&127)!==0||N_(c,s,l)}return l}function N_(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Me.updateQueue,s===null?(s=$c(),Me.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function b_(r,s,l,c){s.value=l,s.getSnapshot=c,D_(s)&&P_(r)}function M_(r,s,l){return l(function(){D_(s)&&P_(r)})}function D_(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!In(r,l)}catch{return!0}}function P_(r){var s=ns(r,2);s!==null&&En(s,r,2)}function jh(r){var s=cn();if(typeof r=="function"){var l=r;if(r=l(),fs){Vn(!0);try{l()}finally{Vn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:r},s}function k_(r,s,l,c){return r.baseState=l,Xh(r,nt,typeof c=="function"?c:fr)}function R1(r,s,l,c,y){if(Wc(r))throw Error(i(485));if(r=s.action,r!==null){var v={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};X.T!==null?l(!0):v.isTransition=!1,c(v),l=s.pending,l===null?(v.next=s.pending=v,x_(s,v)):(v.next=l.next,s.pending=l.next=v)}}function x_(r,s){var l=s.action,c=s.payload,y=r.state;if(s.isTransition){var v=X.T,A={};X.T=A;try{var R=l(y,c),V=X.S;V!==null&&V(A,R),V_(r,s,R)}catch(K){ep(r,s,K)}finally{v!==null&&A.types!==null&&(v.types=A.types),X.T=v}}else try{v=l(y,c),V_(r,s,v)}catch(K){ep(r,s,K)}}function V_(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){U_(r,s,c)},function(c){return ep(r,s,c)}):U_(r,s,l)}function U_(r,s,l){s.status="fulfilled",s.value=l,L_(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,x_(r,l)))}function ep(r,s,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,L_(s),s=s.next;while(s!==c)}r.action=null}function L_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function O_(r,s){return s}function F_(r,s){if(Be){var l=ot.formState;if(l!==null){e:{var c=Me;if(Be){if(at){t:{for(var y=at,v=zn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Kn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){at=Kn(y.nextSibling),c=y.data==="F!";break e}}Yr(c)}c=!1}c&&(s=l[0])}}return l=cn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O_,lastRenderedState:s},l.queue=c,l=rv.bind(null,Me,c),c.dispatch=l,c=jh(!1),v=sp.bind(null,Me,!1,c.queue),c=cn(),y={state:s,dispatch:null,action:r,pending:null},c.queue=y,l=R1.bind(null,Me,y,v,l),y.dispatch=l,c.memoizedState=r,[s,l,!1]}function q_(r){var s=Tt();return B_(s,nt,r)}function B_(r,s,l){if(s=Xh(r,s,O_)[0],r=Yc(fr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Gl(s)}catch(A){throw A===ua?Lc:A}else c=s;s=Tt();var y=s.queue,v=y.dispatch;return l!==s.memoizedState&&(Me.flags|=2048,pa(9,{destroy:void 0},w1.bind(null,y,l),null)),[c,v,r]}function w1(r,s){r.action=s}function H_(r){var s=Tt(),l=nt;if(l!==null)return B_(s,l,r);Tt(),s=s.memoizedState,l=Tt();var c=l.queue.dispatch;return l.memoizedState=r,[s,c,!1]}function pa(r,s,l,c){return r={tag:r,create:l,deps:c,inst:s,next:null},s=Me.updateQueue,s===null&&(s=$c(),Me.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,s.lastEffect=r),r}function G_(){return Tt().memoizedState}function Jc(r,s,l,c){var y=cn();Me.flags|=r,y.memoizedState=pa(1|s,{destroy:void 0},l,c===void 0?null:c)}function Qc(r,s,l,c){var y=Tt();c=c===void 0?null:c;var v=y.memoizedState.inst;nt!==null&&c!==null&&$h(c,nt.memoizedState.deps)?y.memoizedState=pa(s,v,l,c):(Me.flags|=r,y.memoizedState=pa(1|s,v,l,c))}function z_(r,s){Jc(8390656,8,r,s)}function tp(r,s){Qc(2048,8,r,s)}function N1(r){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=$c(),Me.updateQueue=s,s.events=[r];else{var l=s.events;l===null?s.events=[r]:l.push(r)}}function $_(r){var s=Tt().memoizedState;return N1({ref:s,nextImpl:r}),function(){if((Qe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function K_(r,s){return Qc(4,2,r,s)}function Y_(r,s){return Qc(4,4,r,s)}function J_(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Q_(r,s,l){l=l!=null?l.concat([r]):null,Qc(4,4,J_.bind(null,s,r),l)}function np(){}function W_(r,s){var l=Tt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&$h(s,c[1])?c[0]:(l.memoizedState=[r,s],r)}function X_(r,s){var l=Tt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&$h(s,c[1]))return c[0];if(c=r(),fs){Vn(!0);try{r()}finally{Vn(!1)}}return l.memoizedState=[c,s],c}function ip(r,s,l){return l===void 0||(cr&1073741824)!==0&&(Ve&261930)===0?r.memoizedState=s:(r.memoizedState=l,r=Zv(),Me.lanes|=r,no|=r,l)}function Z_(r,s,l,c){return In(l,s)?l:fa.current!==null?(r=ip(r,l,c),In(r,s)||(Mt=!0),r):(cr&42)===0||(cr&1073741824)!==0&&(Ve&261930)===0?(Mt=!0,r.memoizedState=l):(r=Zv(),Me.lanes|=r,no|=r,s)}function j_(r,s,l,c,y){var v=ae.p;ae.p=v!==0&&8>v?v:8;var A=X.T,R={};X.T=R,sp(r,!1,s,l);try{var V=y(),K=X.S;if(K!==null&&K(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var j=A1(V,c);zl(r,s,j,Dn(r))}else zl(r,s,c,Dn(r))}catch(ne){zl(r,s,{then:function(){},status:"rejected",reason:ne},Dn())}finally{ae.p=v,A!==null&&R.types!==null&&(A.types=R.types),X.T=A}}function b1(){}function rp(r,s,l,c){if(r.tag!==5)throw Error(i(476));var y=ev(r).queue;j_(r,y,s,ye,l===null?b1:function(){return tv(r),l(c)})}function ev(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:ye},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function tv(r){var s=ev(r);s.next===null&&(s=r.alternate.memoizedState),zl(r,s.next.queue,{},Dn())}function op(){return Qt(au)}function nv(){return Tt().memoizedState}function iv(){return Tt().memoizedState}function M1(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Dn();r=Wr(l);var c=Xr(s,r,l);c!==null&&(En(c,s,l),Fl(c,s,l)),s={cache:xh()},r.payload=s;return}s=s.return}}function D1(r,s,l){var c=Dn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Wc(r)?ov(s,l):(l=Ah(r,s,l,c),l!==null&&(En(l,r,c),sv(l,s,c)))}function rv(r,s,l){var c=Dn();zl(r,s,l,c)}function zl(r,s,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Wc(r))ov(s,y);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,R=v(A,l);if(y.hasEagerState=!0,y.eagerState=R,In(R,A))return Mc(r,s,y,0),ot===null&&bc(),!1}catch{}finally{}if(l=Ah(r,s,y,c),l!==null)return En(l,r,c),sv(l,s,c),!0}return!1}function sp(r,s,l,c){if(c={lane:2,revertLane:Op(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Wc(r)){if(s)throw Error(i(479))}else s=Ah(r,l,c,2),s!==null&&En(s,r,2)}function Wc(r){var s=r.alternate;return r===Me||s!==null&&s===Me}function ov(r,s){da=Gc=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function sv(r,s,l){if((l&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,dl(r,l)}}var $l={readContext:Qt,use:Kc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};$l.useEffectEvent=gt;var av={readContext:Qt,use:Kc,useCallback:function(r,s){return cn().memoizedState=[r,s===void 0?null:s],r},useContext:Qt,useEffect:z_,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,Jc(4194308,4,J_.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Jc(4194308,4,r,s)},useInsertionEffect:function(r,s){Jc(4,2,r,s)},useMemo:function(r,s){var l=cn();s=s===void 0?null:s;var c=r();if(fs){Vn(!0);try{r()}finally{Vn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(r,s,l){var c=cn();if(l!==void 0){var y=l(s);if(fs){Vn(!0);try{l(s)}finally{Vn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},c.queue=r,r=r.dispatch=D1.bind(null,Me,r),[c.memoizedState,r]},useRef:function(r){var s=cn();return r={current:r},s.memoizedState=r},useState:function(r){r=jh(r);var s=r.queue,l=rv.bind(null,Me,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:np,useDeferredValue:function(r,s){var l=cn();return ip(l,r,s)},useTransition:function(){var r=jh(!1);return r=j_.bind(null,Me,r.queue,!0,!1),cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var c=Me,y=cn();if(Be){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ot===null)throw Error(i(349));(Ve&127)!==0||N_(c,s,l)}y.memoizedState=l;var v={value:l,getSnapshot:s};return y.queue=v,z_(M_.bind(null,c,v,r),[r]),c.flags|=2048,pa(9,{destroy:void 0},b_.bind(null,c,v,l,s),null),l},useId:function(){var r=cn(),s=ot.identifierPrefix;if(Be){var l=Gi,c=Hi;l=(c&~(1<<32-_t(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=zc++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=C1++,s="_"+s+"r_"+l.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:op,useFormState:F_,useActionState:F_,useOptimistic:function(r){var s=cn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=sp.bind(null,Me,!0,l),l.dispatch=s,[r,s]},useMemoCache:Wh,useCacheRefresh:function(){return cn().memoizedState=M1.bind(null,Me)},useEffectEvent:function(r){var s=cn(),l={impl:r};return s.memoizedState=l,function(){if((Qe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},ap={readContext:Qt,use:Kc,useCallback:W_,useContext:Qt,useEffect:tp,useImperativeHandle:Q_,useInsertionEffect:K_,useLayoutEffect:Y_,useMemo:X_,useReducer:Yc,useRef:G_,useState:function(){return Yc(fr)},useDebugValue:np,useDeferredValue:function(r,s){var l=Tt();return Z_(l,nt.memoizedState,r,s)},useTransition:function(){var r=Yc(fr)[0],s=Tt().memoizedState;return[typeof r=="boolean"?r:Gl(r),s]},useSyncExternalStore:w_,useId:nv,useHostTransitionStatus:op,useFormState:q_,useActionState:q_,useOptimistic:function(r,s){var l=Tt();return k_(l,nt,r,s)},useMemoCache:Wh,useCacheRefresh:iv};ap.useEffectEvent=$_;var lv={readContext:Qt,use:Kc,useCallback:W_,useContext:Qt,useEffect:tp,useImperativeHandle:Q_,useInsertionEffect:K_,useLayoutEffect:Y_,useMemo:X_,useReducer:Zh,useRef:G_,useState:function(){return Zh(fr)},useDebugValue:np,useDeferredValue:function(r,s){var l=Tt();return nt===null?ip(l,r,s):Z_(l,nt.memoizedState,r,s)},useTransition:function(){var r=Zh(fr)[0],s=Tt().memoizedState;return[typeof r=="boolean"?r:Gl(r),s]},useSyncExternalStore:w_,useId:nv,useHostTransitionStatus:op,useFormState:H_,useActionState:H_,useOptimistic:function(r,s){var l=Tt();return nt!==null?k_(l,nt,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:iv};lv.useEffectEvent=$_;function lp(r,s,l,c){s=r.memoizedState,l=l(c,s),l=l==null?s:E({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var up={enqueueSetState:function(r,s,l){r=r._reactInternals;var c=Dn(),y=Wr(c);y.payload=s,l!=null&&(y.callback=l),s=Xr(r,y,c),s!==null&&(En(s,r,c),Fl(s,r,c))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var c=Dn(),y=Wr(c);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Xr(r,y,c),s!==null&&(En(s,r,c),Fl(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Dn(),c=Wr(l);c.tag=2,s!=null&&(c.callback=s),s=Xr(r,c,l),s!==null&&(En(s,r,l),Fl(s,r,l))}};function uv(r,s,l,c,y,v,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,v,A):s.prototype&&s.prototype.isPureReactComponent?!Dl(l,c)||!Dl(y,v):!0}function cv(r,s,l,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==r&&up.enqueueReplaceState(s,s.state,null)}function ds(r,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(r=r.defaultProps){l===s&&(l=E({},l));for(var y in r)l[y]===void 0&&(l[y]=r[y])}return l}function fv(r){Nc(r)}function dv(r){console.error(r)}function hv(r){Nc(r)}function Xc(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function pv(r,s,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function cp(r,s,l){return l=Wr(l),l.tag=3,l.payload={element:null},l.callback=function(){Xc(r,s)},l}function mv(r){return r=Wr(r),r.tag=3,r}function gv(r,s,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;r.payload=function(){return y(v)},r.callback=function(){pv(s,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){pv(s,l,c),typeof y!="function"&&(io===null?io=new Set([this]):io.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function P1(r,s,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&sa(s,l,y,!0),l=wn.current,l!==null){switch(l.tag){case 31:case 13:return $n===null?cf():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Oc?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Vp(r,c,y)),!1;case 22:return l.flags|=65536,c===Oc?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Vp(r,c,y)),!1}throw Error(i(435,l.tag))}return Vp(r,c,y),cf(),!1}if(Be)return s=wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==bh&&(r=Error(i(422),{cause:c}),xl(Bn(r,l)))):(c!==bh&&(s=Error(i(423),{cause:c}),xl(Bn(s,l))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,c=Bn(c,l),y=cp(r.stateNode,c,y),qh(r,y),yt!==4&&(yt=2)),!1;var v=Error(i(520),{cause:c});if(v=Bn(v,l),jl===null?jl=[v]:jl.push(v),yt!==4&&(yt=2),s===null)return!0;c=Bn(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=y&-y,l.lanes|=r,r=cp(l.stateNode,c,r),qh(l,r),!1;case 1:if(s=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(io===null||!io.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=mv(y),gv(y,r,l,c),qh(l,y),!1}l=l.return}while(l!==null);return!1}var fp=Error(i(461)),Mt=!1;function Wt(r,s,l,c){s.child=r===null?E_(s,null,l,c):cs(s,r.child,l,c)}function yv(r,s,l,c,y){l=l.render;var v=s.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return ss(s),c=Kh(r,s,l,A,v,y),R=Yh(),r!==null&&!Mt?(Jh(r,s,y),dr(r,s,y)):(Be&&R&&wh(s),s.flags|=1,Wt(r,s,c,y),s.child)}function _v(r,s,l,c,y){if(r===null){var v=l.type;return typeof v=="function"&&!Ch(v)&&v.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=v,vv(r,s,v,c,y)):(r=Pc(l.type,null,c,s,s.mode,y),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,!vp(r,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:Dl,l(A,c)&&r.ref===s.ref)return dr(r,s,y)}return s.flags|=1,r=sr(v,c),r.ref=s.ref,r.return=s,s.child=r}function vv(r,s,l,c,y){if(r!==null){var v=r.memoizedProps;if(Dl(v,c)&&r.ref===s.ref)if(Mt=!1,s.pendingProps=c=v,vp(r,y))(r.flags&131072)!==0&&(Mt=!0);else return s.lanes=r.lanes,dr(r,s,y)}return dp(r,s,l,c,y)}function Ev(r,s,l,c){var y=c.children,v=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,r!==null){for(c=s.child=r.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return Tv(r,s,v,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Uc(s,v!==null?v.cachePool:null),v!==null?A_(s,v):Hh(),C_(s);else return c=s.lanes=536870912,Tv(r,s,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Uc(s,v.cachePool),A_(s,v),jr(),s.memoizedState=null):(r!==null&&Uc(s,null),Hh(),jr());return Wt(r,s,y,l),s.child}function Kl(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Tv(r,s,l,c,y){var v=Uh();return v=v===null?null:{parent:Nt._currentValue,pool:v},s.memoizedState={baseLanes:l,cachePool:v},r!==null&&Uc(s,null),Hh(),C_(s),r!==null&&sa(r,s,c,!0),s.childLanes=y,null}function Zc(r,s){return s=ef({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function Sv(r,s,l){return cs(s,r.child,null,l),r=Zc(s,s.pendingProps),r.flags|=2,Nn(s),s.memoizedState=null,r}function k1(r,s,l){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Be){if(c.mode==="hidden")return r=Zc(s,c),s.lanes=536870912,Kl(null,r);if(zh(s),(r=at)?(r=xE(r,zn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:$r!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=o_(r),l.return=s,s.child=l,Jt=s,at=null)):r=null,r===null)throw Yr(s);return s.lanes=536870912,null}return Zc(s,c)}var v=r.memoizedState;if(v!==null){var A=v.dehydrated;if(zh(s),y)if(s.flags&256)s.flags&=-257,s=Sv(r,s,l);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Mt||sa(r,s,l,!1),y=(l&r.childLanes)!==0,Mt||y){if(c=ot,c!==null&&(A=hl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,ns(r,A),En(c,r,A),fp;cf(),s=Sv(r,s,l)}else r=v.treeContext,at=Kn(A.nextSibling),Jt=s,Be=!0,Kr=null,zn=!1,r!==null&&l_(s,r),s=Zc(s,c),s.flags|=4096;return s}return r=sr(r.child,{mode:c.mode,children:c.children}),r.ref=s.ref,s.child=r,r.return=s,r}function jc(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function dp(r,s,l,c,y){return ss(s),l=Kh(r,s,l,c,void 0,y),c=Yh(),r!==null&&!Mt?(Jh(r,s,y),dr(r,s,y)):(Be&&c&&wh(s),s.flags|=1,Wt(r,s,l,y),s.child)}function Av(r,s,l,c,y,v){return ss(s),s.updateQueue=null,l=R_(s,c,l,y),I_(r),c=Yh(),r!==null&&!Mt?(Jh(r,s,v),dr(r,s,v)):(Be&&c&&wh(s),s.flags|=1,Wt(r,s,l,v),s.child)}function Cv(r,s,l,c,y){if(ss(s),s.stateNode===null){var v=na,A=l.contextType;typeof A=="object"&&A!==null&&(v=Qt(A)),v=new l(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=up,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},Oh(s),A=l.contextType,v.context=typeof A=="object"&&A!==null?Qt(A):na,v.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(lp(s,l,A,c),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&up.enqueueReplaceState(v,v.state,null),Bl(s,c,v,y),ql(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){v=s.stateNode;var R=s.memoizedProps,V=ds(l,R);v.props=V;var K=v.context,j=l.contextType;A=na,typeof j=="object"&&j!==null&&(A=Qt(j));var ne=l.getDerivedStateFromProps;j=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||K!==A)&&cv(s,v,c,A),Qr=!1;var Y=s.memoizedState;v.state=Y,Bl(s,c,v,y),ql(),K=s.memoizedState,R||Y!==K||Qr?(typeof ne=="function"&&(lp(s,l,ne,c),K=s.memoizedState),(V=Qr||uv(s,l,V,c,Y,K,A))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=K),v.props=c,v.state=K,v.context=A,c=V):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Fh(r,s),A=s.memoizedProps,j=ds(l,A),v.props=j,ne=s.pendingProps,Y=v.context,K=l.contextType,V=na,typeof K=="object"&&K!==null&&(V=Qt(K)),R=l.getDerivedStateFromProps,(K=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ne||Y!==V)&&cv(s,v,c,V),Qr=!1,Y=s.memoizedState,v.state=Y,Bl(s,c,v,y),ql();var W=s.memoizedState;A!==ne||Y!==W||Qr||r!==null&&r.dependencies!==null&&xc(r.dependencies)?(typeof R=="function"&&(lp(s,l,R,c),W=s.memoizedState),(j=Qr||uv(s,l,j,c,Y,W,V)||r!==null&&r.dependencies!==null&&xc(r.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,W,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,W,V)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),v.props=c,v.state=W,v.context=V,c=j):(typeof v.componentDidUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),c=!1)}return v=c,jc(r,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,r!==null&&c?(s.child=cs(s,r.child,null,y),s.child=cs(s,null,l,y)):Wt(r,s,l,y),s.memoizedState=v.state,r=s.child):r=dr(r,s,y),r}function Iv(r,s,l,c){return rs(),s.flags|=256,Wt(r,s,l,c),s.child}var hp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pp(r){return{baseLanes:r,cachePool:p_()}}function mp(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Mn),r}function Rv(r,s,l){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=r!==null&&r.memoizedState===null?!1:(Et.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,r===null){if(Be){if(y?Zr(s):jr(),(r=at)?(r=xE(r,zn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:$r!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=o_(r),l.return=s,s.child=l,Jt=s,at=null)):r=null,r===null)throw Yr(s);return Xp(r)?s.lanes=32:s.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(jr(),y=s.mode,R=ef({mode:"hidden",children:R},y),c=is(c,y,l,null),R.return=s,c.return=s,R.sibling=c,s.child=R,c=s.child,c.memoizedState=pp(l),c.childLanes=mp(r,A,l),s.memoizedState=hp,Kl(null,c)):(Zr(s),gp(s,R))}var V=r.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(v)s.flags&256?(Zr(s),s.flags&=-257,s=yp(r,s,l)):s.memoizedState!==null?(jr(),s.child=r.child,s.flags|=128,s=null):(jr(),R=c.fallback,y=s.mode,c=ef({mode:"visible",children:c.children},y),R=is(R,y,l,null),R.flags|=2,c.return=s,R.return=s,c.sibling=R,s.child=c,cs(s,r.child,null,l),c=s.child,c.memoizedState=pp(l),c.childLanes=mp(r,A,l),s.memoizedState=hp,s=Kl(null,c));else if(Zr(s),Xp(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var K=A.dgst;A=K,c=Error(i(419)),c.stack="",c.digest=A,xl({value:c,source:null,stack:null}),s=yp(r,s,l)}else if(Mt||sa(r,s,l,!1),A=(l&r.childLanes)!==0,Mt||A){if(A=ot,A!==null&&(c=hl(A,l),c!==0&&c!==V.retryLane))throw V.retryLane=c,ns(r,c),En(A,r,c),fp;Wp(R)||cf(),s=yp(r,s,l)}else Wp(R)?(s.flags|=192,s.child=r.child,s=null):(r=V.treeContext,at=Kn(R.nextSibling),Jt=s,Be=!0,Kr=null,zn=!1,r!==null&&l_(s,r),s=gp(s,c.children),s.flags|=4096);return s}return y?(jr(),R=c.fallback,y=s.mode,V=r.child,K=V.sibling,c=sr(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,K!==null?R=sr(K,R):(R=is(R,y,l,null),R.flags|=2),R.return=s,c.return=s,c.sibling=R,s.child=c,Kl(null,c),c=s.child,R=r.child.memoizedState,R===null?R=pp(l):(y=R.cachePool,y!==null?(V=Nt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=p_(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=mp(r,A,l),s.memoizedState=hp,Kl(r.child,c)):(Zr(s),l=r.child,r=l.sibling,l=sr(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,r!==null&&(A=s.deletions,A===null?(s.deletions=[r],s.flags|=16):A.push(r)),s.child=l,s.memoizedState=null,l)}function gp(r,s){return s=ef({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function ef(r,s){return r=Rn(22,r,null,s),r.lanes=0,r}function yp(r,s,l){return cs(s,r.child,null,l),r=gp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function wv(r,s,l){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Ph(r.return,s,l)}function _p(r,s,l,c,y,v){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function Nv(r,s,l){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Et.current,R=(A&2)!==0;if(R?(A=A&1|2,s.flags|=128):A&=1,ce(Et,A),Wt(r,s,c,l),c=Be?kl:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wv(r,l,s);else if(r.tag===19)wv(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(l=s.child,y=null;l!==null;)r=l.alternate,r!==null&&Hc(r)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),_p(s,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(r=y.alternate,r!==null&&Hc(r)===null){s.child=y;break}r=y.sibling,y.sibling=l,l=y,y=r}_p(s,!0,l,null,v,c);break;case"together":_p(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function dr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),no|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(sa(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=sr(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=sr(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function vp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&xc(r)))}function x1(r,s,l){switch(s.tag){case 3:Ut(s,s.stateNode.containerInfo),Jr(s,Nt,r.memoizedState.cache),rs();break;case 27:case 5:Oo(s);break;case 4:Ut(s,s.stateNode.containerInfo);break;case 10:Jr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,zh(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Zr(s),s.flags|=128,null):(l&s.child.childLanes)!==0?Rv(r,s,l):(Zr(s),r=dr(r,s,l),r!==null?r.sibling:null);Zr(s);break;case 19:var y=(r.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(sa(r,s,l,!1),c=(l&s.childLanes)!==0),y){if(c)return Nv(r,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Et,Et.current),c)break;return null;case 22:return s.lanes=0,Ev(r,s,l,s.pendingProps);case 24:Jr(s,Nt,r.memoizedState.cache)}return dr(r,s,l)}function bv(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)Mt=!0;else{if(!vp(r,l)&&(s.flags&128)===0)return Mt=!1,x1(r,s,l);Mt=(r.flags&131072)!==0}else Mt=!1,Be&&(s.flags&1048576)!==0&&a_(s,kl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(r=ls(s.elementType),s.type=r,typeof r=="function")Ch(r)?(c=ds(r,c),s.tag=1,s=Cv(null,s,r,c,l)):(s.tag=0,s=dp(null,s,r,c,l));else{if(r!=null){var y=r.$$typeof;if(y===oe){s.tag=11,s=yv(null,s,r,c,l);break e}else if(y===M){s.tag=14,s=_v(null,s,r,c,l);break e}}throw s=qe(r)||r,Error(i(306,s,""))}}return s;case 0:return dp(r,s,s.type,s.pendingProps,l);case 1:return c=s.type,y=ds(c,s.pendingProps),Cv(r,s,c,y,l);case 3:e:{if(Ut(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,Fh(r,s),Bl(s,c,null,l);var A=s.memoizedState;if(c=A.cache,Jr(s,Nt,c),c!==v.cache&&kh(s,[Nt],l,!0),ql(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Iv(r,s,c,l);break e}else if(c!==y){y=Bn(Error(i(424)),s),xl(y),s=Iv(r,s,c,l);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(at=Kn(r.firstChild),Jt=s,Be=!0,Kr=null,zn=!0,l=E_(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(rs(),c===y){s=dr(r,s,l);break e}Wt(r,s,c,l)}s=s.child}return s;case 26:return jc(r,s),r===null?(l=qE(s.type,null,s.pendingProps,null))?s.memoizedState=l:Be||(l=s.type,r=s.pendingProps,c=yf(De.current).createElement(l),c[It]=s,c[Bt]=r,Xt(c,l,r),Rt(c),s.stateNode=c):s.memoizedState=qE(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Oo(s),r===null&&Be&&(c=s.stateNode=LE(s.type,s.pendingProps,De.current),Jt=s,zn=!0,y=at,ao(s.type)?(Zp=y,at=Kn(c.firstChild)):at=y),Wt(r,s,s.pendingProps.children,l),jc(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Be&&((y=c=at)&&(c=cN(c,s.type,s.pendingProps,zn),c!==null?(s.stateNode=c,Jt=s,at=Kn(c.firstChild),zn=!1,y=!0):y=!1),y||Yr(s)),Oo(s),y=s.type,v=s.pendingProps,A=r!==null?r.memoizedProps:null,c=v.children,Yp(y,v)?c=null:A!==null&&Yp(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=Kh(r,s,I1,null,null,l),au._currentValue=y),jc(r,s),Wt(r,s,c,l),s.child;case 6:return r===null&&Be&&((r=l=at)&&(l=fN(l,s.pendingProps,zn),l!==null?(s.stateNode=l,Jt=s,at=null,r=!0):r=!1),r||Yr(s)),null;case 13:return Rv(r,s,l);case 4:return Ut(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=cs(s,null,c,l):Wt(r,s,c,l),s.child;case 11:return yv(r,s,s.type,s.pendingProps,l);case 7:return Wt(r,s,s.pendingProps,l),s.child;case 8:return Wt(r,s,s.pendingProps.children,l),s.child;case 12:return Wt(r,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Jr(s,s.type,c.value),Wt(r,s,c.children,l),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,ss(s),y=Qt(y),c=c(y),s.flags|=1,Wt(r,s,c,l),s.child;case 14:return _v(r,s,s.type,s.pendingProps,l);case 15:return vv(r,s,s.type,s.pendingProps,l);case 19:return Nv(r,s,l);case 31:return k1(r,s,l);case 22:return Ev(r,s,l,s.pendingProps);case 24:return ss(s),c=Qt(Nt),r===null?(y=Uh(),y===null&&(y=ot,v=xh(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),s.memoizedState={parent:c,cache:y},Oh(s),Jr(s,Nt,y)):((r.lanes&l)!==0&&(Fh(r,s),Bl(s,null,null,l),ql()),y=r.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Jr(s,Nt,c)):(c=v.cache,Jr(s,Nt,c),c!==y.cache&&kh(s,[Nt],l,!0))),Wt(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function hr(r){r.flags|=4}function Ep(r,s,l,c,y){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(nE())r.flags|=8192;else throw us=Oc,Lh}else r.flags&=-16777217}function Mv(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!$E(s))if(nE())r.flags|=8192;else throw us=Oc,Lh}function tf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?ac():536870912,r.lanes|=s,_a|=s)}function Yl(r,s){if(!Be)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function lt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(s)for(var y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=c,r.childLanes=l,s}function V1(r,s,l){var c=s.pendingProps;switch(Nh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return l=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ur(Nt),ct(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(oa(s)?hr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mh())),lt(s),null;case 26:var y=s.type,v=s.memoizedState;return r===null?(hr(s),v!==null?(lt(s),Mv(s,v)):(lt(s),Ep(s,y,null,c,l))):v?v!==r.memoizedState?(hr(s),lt(s),Mv(s,v)):(lt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==c&&hr(s),lt(s),Ep(s,y,r,c,l)),null;case 27:if(Ls(s),l=De.current,y=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&hr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return lt(s),null}r=pe.current,oa(s)?u_(s):(r=LE(y,c,l),s.stateNode=r,hr(s))}return lt(s),null;case 5:if(Ls(s),y=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&hr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return lt(s),null}if(v=pe.current,oa(s))u_(s);else{var A=yf(De.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[It]=s,v[Bt]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=v;e:switch(Xt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&hr(s)}}return lt(s),Ep(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,l),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&hr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=De.current,oa(s)){if(r=s.stateNode,l=s.memoizedProps,c=null,y=Jt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}r[It]=s,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||RE(r.nodeValue,l)),r||Yr(s,!0)}else r=yf(r).createTextNode(c),r[It]=s,s.stateNode=r}return lt(s),null;case 31:if(l=s.memoizedState,r===null||r.memoizedState!==null){if(c=oa(s),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[It]=s}else rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),r=!1}else l=Mh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return s.flags&256?(Nn(s),s):(Nn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return lt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=oa(s),c!==null&&c.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[It]=s}else rs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),y=!1}else y=Mh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Nn(s),s):(Nn(s),null)}return Nn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==r&&l&&(s.child.flags|=8192),tf(s,s.updateQueue),lt(s),null);case 4:return ct(),r===null&&Hp(s.stateNode.containerInfo),lt(s),null;case 10:return ur(s.type),lt(s),null;case 19:if(ie(Et),c=s.memoizedState,c===null)return lt(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)Yl(c,!1);else{if(yt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(v=Hc(r),v!==null){for(s.flags|=128,Yl(c,!1),r=v.updateQueue,s.updateQueue=r,tf(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)r_(l,r),l=l.sibling;return ce(Et,Et.current&1|2),Be&&ar(s,c.treeForkCount),s.child}r=r.sibling}c.tail!==null&&ln()>af&&(s.flags|=128,y=!0,Yl(c,!1),s.lanes=4194304)}else{if(!y)if(r=Hc(v),r!==null){if(s.flags|=128,y=!0,r=r.updateQueue,s.updateQueue=r,tf(s,r),Yl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Be)return lt(s),null}else 2*ln()-c.renderingStartTime>af&&l!==536870912&&(s.flags|=128,y=!0,Yl(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(r=c.last,r!==null?r.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=ln(),r.sibling=null,l=Et.current,ce(Et,y?l&1|2:l&1),Be&&ar(s,c.treeForkCount),r):(lt(s),null);case 22:case 23:return Nn(s),Gh(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),l=s.updateQueue,l!==null&&tf(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),r!==null&&ie(as),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ur(Nt),lt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function U1(r,s){switch(Nh(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ur(Nt),ct(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ls(s),null;case 31:if(s.memoizedState!==null){if(Nn(s),s.alternate===null)throw Error(i(340));rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Nn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));rs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ie(Et),null;case 4:return ct(),null;case 10:return ur(s.type),null;case 22:case 23:return Nn(s),Gh(),r!==null&&ie(as),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ur(Nt),null;case 25:return null;default:return null}}function Dv(r,s){switch(Nh(s),s.tag){case 3:ur(Nt),ct();break;case 26:case 27:case 5:Ls(s);break;case 4:ct();break;case 31:s.memoizedState!==null&&Nn(s);break;case 13:Nn(s);break;case 19:ie(Et);break;case 10:ur(s.type);break;case 22:case 23:Nn(s),Gh(),r!==null&&ie(as);break;case 24:ur(Nt)}}function Jl(r,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&r)===r){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){et(s,s.return,R)}}function eo(r,s,l){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&r)===r){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=s;var V=l,K=R;try{K()}catch(j){et(y,V,j)}}}c=c.next}while(c!==v)}}catch(j){et(s,s.return,j)}}function Pv(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{S_(s,l)}catch(c){et(r,r.return,c)}}}function kv(r,s,l){l.props=ds(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){et(r,s,c)}}function Ql(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(y){et(r,s,y)}}function zi(r,s){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){et(r,s,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){et(r,s,y)}else l.current=null}function xv(r){var s=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){et(r,r.return,y)}}function Tp(r,s,l){try{var c=r.stateNode;rN(c,r.type,l,s),c[Bt]=s}catch(y){et(r,r.return,y)}}function Vv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ao(r.type)||r.tag===4}function Sp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Vv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ao(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ap(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=oi));else if(c!==4&&(c===27&&ao(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(Ap(r,s,l),r=r.sibling;r!==null;)Ap(r,s,l),r=r.sibling}function nf(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(c!==4&&(c===27&&ao(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(nf(r,s,l),r=r.sibling;r!==null;)nf(r,s,l),r=r.sibling}function Uv(r){var s=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Xt(s,c,l),s[It]=r,s[Bt]=l}catch(v){et(r,r.return,v)}}var pr=!1,Dt=!1,Cp=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function L1(r,s){if(r=r.containerInfo,$p=Cf,r=Qy(r),yh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,R=-1,V=-1,K=0,j=0,ne=r,Y=null;t:for(;;){for(var W;ne!==l||y!==0&&ne.nodeType!==3||(R=A+y),ne!==v||c!==0&&ne.nodeType!==3||(V=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(W=ne.firstChild)!==null;)Y=ne,ne=W;for(;;){if(ne===r)break t;if(Y===l&&++K===y&&(R=A),Y===v&&++j===c&&(V=A),(W=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=W}l=R===-1||V===-1?null:{start:R,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Kp={focusedElem:r,selectionRange:l},Cf=!1,Gt=s;Gt!==null;)if(s=Gt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Gt=r;else for(;Gt!==null;){switch(s=Gt,v=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)y=r[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,l=s,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var me=ds(l.type,y);r=c.getSnapshotBeforeUpdate(me,v),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){et(l,l.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)Qp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Qp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Gt=r;break}Gt=s.return}}function Ov(r,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:gr(r,l),c&4&&Jl(5,l);break;case 1:if(gr(r,l),c&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(A){et(l,l.return,A)}else{var y=ds(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(y,s,r.__reactInternalSnapshotBeforeUpdate)}catch(A){et(l,l.return,A)}}c&64&&Pv(l),c&512&&Ql(l,l.return);break;case 3:if(gr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{S_(r,s)}catch(A){et(l,l.return,A)}}break;case 27:s===null&&c&4&&Uv(l);case 26:case 5:gr(r,l),s===null&&c&4&&xv(l),c&512&&Ql(l,l.return);break;case 12:gr(r,l);break;case 31:gr(r,l),c&4&&Bv(r,l);break;case 13:gr(r,l),c&4&&Hv(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=K1.bind(null,l),dN(r,l))));break;case 22:if(c=l.memoizedState!==null||pr,!c){s=s!==null&&s.memoizedState!==null||Dt,y=pr;var v=Dt;pr=c,(Dt=s)&&!v?yr(r,l,(l.subtreeFlags&8772)!==0):gr(r,l),pr=y,Dt=v}break;case 30:break;default:gr(r,l)}}function Fv(r){var s=r.alternate;s!==null&&(r.alternate=null,Fv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Hs(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,gn=!1;function mr(r,s,l){for(l=l.child;l!==null;)qv(r,s,l),l=l.sibling}function qv(r,s,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(ti,l)}catch{}switch(l.tag){case 26:Dt||zi(l,s),mr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Dt||zi(l,s);var c=dt,y=gn;ao(l.type)&&(dt=l.stateNode,gn=!1),mr(r,s,l),ru(l.stateNode),dt=c,gn=y;break;case 5:Dt||zi(l,s);case 6:if(c=dt,y=gn,dt=null,mr(r,s,l),dt=c,gn=y,dt!==null)if(gn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(l.stateNode)}catch(v){et(l,s,v)}else try{dt.removeChild(l.stateNode)}catch(v){et(l,s,v)}break;case 18:dt!==null&&(gn?(r=dt,PE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Ra(r)):PE(dt,l.stateNode));break;case 4:c=dt,y=gn,dt=l.stateNode.containerInfo,gn=!0,mr(r,s,l),dt=c,gn=y;break;case 0:case 11:case 14:case 15:eo(2,l,s),Dt||eo(4,l,s),mr(r,s,l);break;case 1:Dt||(zi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&kv(l,s,c)),mr(r,s,l);break;case 21:mr(r,s,l);break;case 22:Dt=(c=Dt)||l.memoizedState!==null,mr(r,s,l),Dt=c;break;default:mr(r,s,l)}}function Bv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ra(r)}catch(l){et(s,s.return,l)}}}function Hv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ra(r)}catch(l){et(s,s.return,l)}}function O1(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Lv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Lv),s;default:throw Error(i(435,r.tag))}}function rf(r,s){var l=O1(r);s.forEach(function(c){if(!l.has(c)){l.add(c);var y=Y1.bind(null,r,c);c.then(y,y)}})}function yn(r,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=r,A=s,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(ao(R.type)){dt=R.stateNode,gn=!1;break e}break;case 5:dt=R.stateNode,gn=!1;break e;case 3:case 4:dt=R.stateNode.containerInfo,gn=!0;break e}R=R.return}if(dt===null)throw Error(i(160));qv(v,A,y),dt=null,gn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Gv(s,r),s=s.sibling}var fi=null;function Gv(r,s){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yn(s,r),_n(r),c&4&&(eo(3,r,r.return),Jl(3,r),eo(5,r,r.return));break;case 1:yn(s,r),_n(r),c&512&&(Dt||l===null||zi(l,l.return)),c&64&&pr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=fi;if(yn(s,r),_n(r),c&512&&(Dt||l===null||zi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Mi]||v[It]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),Xt(v,c,l),v[It]=r,Rt(v),c=v;break e;case"link":var A=GE("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(v=A[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}v=y.createElement(c),Xt(v,c,l),y.head.appendChild(v);break;case"meta":if(A=GE("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(v=A[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}v=y.createElement(c),Xt(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[It]=r,Rt(v),c=v}r.stateNode=c}else zE(y,r.type,r.stateNode);else r.stateNode=HE(y,c,r.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?zE(y,r.type,r.stateNode):HE(y,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Tp(r,r.memoizedProps,l.memoizedProps)}break;case 27:yn(s,r),_n(r),c&512&&(Dt||l===null||zi(l,l.return)),l!==null&&c&4&&Tp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(yn(s,r),_n(r),c&512&&(Dt||l===null||zi(l,l.return)),r.flags&32){y=r.stateNode;try{mn(y,"")}catch(me){et(r,r.return,me)}}c&4&&r.stateNode!=null&&(y=r.memoizedProps,Tp(r,y,l!==null?l.memoizedProps:y)),c&1024&&(Cp=!0);break;case 6:if(yn(s,r),_n(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(me){et(r,r.return,me)}}break;case 3:if(Ef=null,y=fi,fi=_f(s.containerInfo),yn(s,r),fi=y,_n(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ra(s.containerInfo)}catch(me){et(r,r.return,me)}Cp&&(Cp=!1,zv(r));break;case 4:c=fi,fi=_f(r.stateNode.containerInfo),yn(s,r),_n(r),fi=c;break;case 12:yn(s,r),_n(r);break;case 31:yn(s,r),_n(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,rf(r,c)));break;case 13:yn(s,r),_n(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sf=ln()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,rf(r,c)));break;case 22:y=r.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,K=pr,j=Dt;if(pr=K||y,Dt=j||V,yn(s,r),Dt=j,pr=K,_n(r),c&8192)e:for(s=r.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||V||pr||Dt||hs(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){V=l=s;try{if(v=V.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=V.stateNode;var ne=V.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(me){et(V,V.return,me)}}}else if(s.tag===6){if(l===null){V=s;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(me){et(V,V.return,me)}}}else if(s.tag===18){if(l===null){V=s;try{var W=V.stateNode;y?kE(W,!0):kE(V.stateNode,!1)}catch(me){et(V,V.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,rf(r,l))));break;case 19:yn(s,r),_n(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,rf(r,c)));break;case 30:break;case 21:break;default:yn(s,r),_n(r)}}function _n(r){var s=r.flags;if(s&2){try{for(var l,c=r.return;c!==null;){if(Vv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=Sp(r);nf(r,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(mn(A,""),l.flags&=-33);var R=Sp(r);nf(r,R,A);break;case 3:case 4:var V=l.stateNode.containerInfo,K=Sp(r);Ap(r,K,V);break;default:throw Error(i(161))}}catch(j){et(r,r.return,j)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function zv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;zv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function gr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ov(r,s.alternate,s),s=s.sibling}function hs(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:eo(4,s,s.return),hs(s);break;case 1:zi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&kv(s,s.return,l),hs(s);break;case 27:ru(s.stateNode);case 26:case 5:zi(s,s.return),hs(s);break;case 22:s.memoizedState===null&&hs(s);break;case 30:hs(s);break;default:hs(s)}r=r.sibling}}function yr(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=r,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:yr(y,v,l),Jl(4,v);break;case 1:if(yr(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){et(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)T_(V[y],R)}catch(K){et(c,c.return,K)}}l&&A&64&&Pv(v),Ql(v,v.return);break;case 27:Uv(v);case 26:case 5:yr(y,v,l),l&&c===null&&A&4&&xv(v),Ql(v,v.return);break;case 12:yr(y,v,l);break;case 31:yr(y,v,l),l&&A&4&&Bv(y,v);break;case 13:yr(y,v,l),l&&A&4&&Hv(y,v);break;case 22:v.memoizedState===null&&yr(y,v,l),Ql(v,v.return);break;case 30:break;default:yr(y,v,l)}s=s.sibling}}function Ip(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Vl(l))}function Rp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Vl(r))}function di(r,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$v(r,s,l,c),s=s.sibling}function $v(r,s,l,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:di(r,s,l,c),y&2048&&Jl(9,s);break;case 1:di(r,s,l,c);break;case 3:di(r,s,l,c),y&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Vl(r)));break;case 12:if(y&2048){di(r,s,l,c),r=s.stateNode;try{var v=s.memoizedProps,A=v.id,R=v.onPostCommit;typeof R=="function"&&R(A,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(V){et(s,s.return,V)}}else di(r,s,l,c);break;case 31:di(r,s,l,c);break;case 13:di(r,s,l,c);break;case 23:break;case 22:v=s.stateNode,A=s.alternate,s.memoizedState!==null?v._visibility&2?di(r,s,l,c):Wl(r,s):v._visibility&2?di(r,s,l,c):(v._visibility|=2,ma(r,s,l,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Ip(A,s);break;case 24:di(r,s,l,c),y&2048&&Rp(s.alternate,s);break;default:di(r,s,l,c)}}function ma(r,s,l,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=r,A=s,R=l,V=c,K=A.flags;switch(A.tag){case 0:case 11:case 15:ma(v,A,R,V,y),Jl(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?ma(v,A,R,V,y):Wl(v,A):(j._visibility|=2,ma(v,A,R,V,y)),y&&K&2048&&Ip(A.alternate,A);break;case 24:ma(v,A,R,V,y),y&&K&2048&&Rp(A.alternate,A);break;default:ma(v,A,R,V,y)}s=s.sibling}}function Wl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,c=s,y=c.flags;switch(c.tag){case 22:Wl(l,c),y&2048&&Ip(c.alternate,c);break;case 24:Wl(l,c),y&2048&&Rp(c.alternate,c);break;default:Wl(l,c)}s=s.sibling}}var Xl=8192;function ga(r,s,l){if(r.subtreeFlags&Xl)for(r=r.child;r!==null;)Kv(r,s,l),r=r.sibling}function Kv(r,s,l){switch(r.tag){case 26:ga(r,s,l),r.flags&Xl&&r.memoizedState!==null&&CN(l,fi,r.memoizedState,r.memoizedProps);break;case 5:ga(r,s,l);break;case 3:case 4:var c=fi;fi=_f(r.stateNode.containerInfo),ga(r,s,l),fi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Xl,Xl=16777216,ga(r,s,l),Xl=c):ga(r,s,l));break;default:ga(r,s,l)}}function Yv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Zl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Gt=c,Qv(c,r)}Yv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Jv(r),r=r.sibling}function Jv(r){switch(r.tag){case 0:case 11:case 15:Zl(r),r.flags&2048&&eo(9,r,r.return);break;case 3:Zl(r);break;case 12:Zl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,of(r)):Zl(r);break;default:Zl(r)}}function of(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Gt=c,Qv(c,r)}Yv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:eo(8,s,s.return),of(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,of(s));break;default:of(s)}r=r.sibling}}function Qv(r,s){for(;Gt!==null;){var l=Gt;switch(l.tag){case 0:case 11:case 15:eo(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Vl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Gt=c;else e:for(l=r;Gt!==null;){c=Gt;var y=c.sibling,v=c.return;if(Fv(c),c===l){Gt=null;break e}if(y!==null){y.return=v,Gt=y;break e}Gt=v}}}var F1={getCacheForType:function(r){var s=Qt(Nt),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l},cacheSignal:function(){return Qt(Nt).controller.signal}},q1=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,ke=null,Ve=0,je=0,bn=null,to=!1,ya=!1,wp=!1,_r=0,yt=0,no=0,ps=0,Np=0,Mn=0,_a=0,jl=null,vn=null,bp=!1,sf=0,Wv=0,af=1/0,lf=null,io=null,Ot=0,ro=null,va=null,vr=0,Mp=0,Dp=null,Xv=null,eu=0,Pp=null;function Dn(){return(Qe&2)!==0&&Ve!==0?Ve&-Ve:X.T!==null?Op():lc()}function Zv(){if(Mn===0)if((Ve&536870912)===0||Be){var r=Bo;Bo<<=1,(Bo&3932160)===0&&(Bo=262144),Mn=r}else Mn=536870912;return r=wn.current,r!==null&&(r.flags|=32),Mn}function En(r,s,l){(r===ot&&(je===2||je===9)||r.cancelPendingCommit!==null)&&(Ea(r,0),oo(r,Ve,Mn,!1)),Ho(r,l),((Qe&2)===0||r!==ot)&&(r===ot&&((Qe&2)===0&&(ps|=l),yt===4&&oo(r,Ve,Mn,!1)),$i(r))}function jv(r,s,l){if((Qe&6)!==0)throw Error(i(327));var c=!l&&(s&127)===0&&(s&r.expiredLanes)===0||ni(r,s),y=c?G1(r,s):xp(r,s,!0),v=c;do{if(y===0){ya&&!c&&oo(r,s,0,!1);break}else{if(l=r.current.alternate,v&&!B1(l)){y=xp(r,s,!1),v=!1;continue}if(y===2){if(v=s,r.errorRecoveryDisabledLanes&v)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var R=r;y=jl;var V=R.current.memoizedState.isDehydrated;if(V&&(Ea(R,A).flags|=256),A=xp(R,A,!1),A!==2){if(wp&&!V){R.errorRecoveryDisabledLanes|=v,ps|=v,y=4;break e}v=vn,vn=y,v!==null&&(vn===null?vn=v:vn.push.apply(vn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Ea(r,0),oo(r,s,0,!0);break}e:{switch(c=r,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:oo(c,s,Mn,!to);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=sf+300-ln(),10<y)){if(oo(c,s,Mn,!to),wi(c,0,!0)!==0)break e;vr=s,c.timeoutHandle=ME(eE.bind(null,c,l,vn,lf,bp,s,Mn,ps,_a,to,v,"Throttled",-0,0),y);break e}eE(c,l,vn,lf,bp,s,Mn,ps,_a,to,v,null,-0,0)}}break}while(!0);$i(r)}function eE(r,s,l,c,y,v,A,R,V,K,j,ne,Y,W){if(r.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},Kv(s,v,ne);var me=(v&62914560)===v?sf-ln():(v&4194048)===v?Wv-ln():0;if(me=IN(ne,me),me!==null){vr=v,r.cancelPendingCommit=me(lE.bind(null,r,s,v,l,c,y,A,R,V,j,ne,null,Y,W)),oo(r,v,A,!K);return}}lE(r,s,v,l,c,y,A,R,V)}function B1(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!In(v(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function oo(r,s,l,c){s&=~Np,s&=~ps,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var y=s;0<y;){var v=31-_t(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&Go(r,l,s)}function uf(){return(Qe&6)===0?(tu(0),!1):!0}function kp(){if(ke!==null){if(je===0)var r=ke.return;else r=ke,lr=os=null,Qh(r),ca=null,Ll=0,r=ke;for(;r!==null;)Dv(r.alternate,r),r=r.return;ke=null}}function Ea(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,aN(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),vr=0,kp(),ot=r,ke=l=sr(r.current,null),Ve=s,je=0,bn=null,to=!1,ya=ni(r,s),wp=!1,_a=Mn=Np=ps=no=yt=0,vn=jl=null,bp=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var y=31-_t(c),v=1<<y;s|=r[y],c&=~v}return _r=s,bc(),l}function tE(r,s){Me=null,X.H=$l,s===ua||s===Lc?(s=y_(),je=3):s===Lh?(s=y_(),je=4):je=s===fp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,bn=s,ke===null&&(yt=1,Xc(r,Bn(s,r.current)))}function nE(){var r=wn.current;return r===null?!0:(Ve&4194048)===Ve?$n===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?r===$n:!1}function iE(){var r=X.H;return X.H=$l,r===null?$l:r}function rE(){var r=X.A;return X.A=F1,r}function cf(){yt=4,to||(Ve&4194048)!==Ve&&wn.current!==null||(ya=!0),(no&134217727)===0&&(ps&134217727)===0||ot===null||oo(ot,Ve,Mn,!1)}function xp(r,s,l){var c=Qe;Qe|=2;var y=iE(),v=rE();(ot!==r||Ve!==s)&&(lf=null,Ea(r,s)),s=!1;var A=yt;e:do try{if(je!==0&&ke!==null){var R=ke,V=bn;switch(je){case 8:kp(),A=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(s=!0);var K=je;if(je=0,bn=null,Ta(r,R,V,K),l&&ya){A=0;break e}break;default:K=je,je=0,bn=null,Ta(r,R,V,K)}}H1(),A=yt;break}catch(j){tE(r,j)}while(!0);return s&&r.shellSuspendCounter++,lr=os=null,Qe=c,X.H=y,X.A=v,ke===null&&(ot=null,Ve=0,bc()),A}function H1(){for(;ke!==null;)oE(ke)}function G1(r,s){var l=Qe;Qe|=2;var c=iE(),y=rE();ot!==r||Ve!==s?(lf=null,af=ln()+500,Ea(r,s)):ya=ni(r,s);e:do try{if(je!==0&&ke!==null){s=ke;var v=bn;t:switch(je){case 1:je=0,bn=null,Ta(r,s,v,1);break;case 2:case 9:if(m_(v)){je=0,bn=null,sE(s);break}s=function(){je!==2&&je!==9||ot!==r||(je=7),$i(r)},v.then(s,s);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:m_(v)?(je=0,bn=null,sE(s)):(je=0,bn=null,Ta(r,s,v,7));break;case 5:var A=null;switch(ke.tag){case 26:A=ke.memoizedState;case 5:case 27:var R=ke;if(A?$E(A):R.stateNode.complete){je=0,bn=null;var V=R.sibling;if(V!==null)ke=V;else{var K=R.return;K!==null?(ke=K,ff(K)):ke=null}break t}}je=0,bn=null,Ta(r,s,v,5);break;case 6:je=0,bn=null,Ta(r,s,v,6);break;case 8:kp(),yt=6;break e;default:throw Error(i(462))}}z1();break}catch(j){tE(r,j)}while(!0);return lr=os=null,X.H=c,X.A=y,Qe=l,ke!==null?0:(ot=null,Ve=0,bc(),yt)}function z1(){for(;ke!==null&&!ch();)oE(ke)}function oE(r){var s=bv(r.alternate,r,_r);r.memoizedProps=r.pendingProps,s===null?ff(r):ke=s}function sE(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=Av(l,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=Av(l,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:Qh(s);default:Dv(l,s),s=ke=r_(s,_r),s=bv(l,s,_r)}r.memoizedProps=r.pendingProps,s===null?ff(r):ke=s}function Ta(r,s,l,c){lr=os=null,Qh(s),ca=null,Ll=0;var y=s.return;try{if(P1(r,y,s,l,Ve)){yt=1,Xc(r,Bn(l,r.current)),ke=null;return}}catch(v){if(y!==null)throw ke=y,v;yt=1,Xc(r,Bn(l,r.current)),ke=null;return}s.flags&32768?(Be||c===1?r=!0:ya||(Ve&536870912)!==0?r=!1:(to=r=!0,(c===2||c===9||c===3||c===6)&&(c=wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),aE(s,r)):ff(s)}function ff(r){var s=r;do{if((s.flags&32768)!==0){aE(s,to);return}r=s.return;var l=V1(s.alternate,s,_r);if(l!==null){ke=l;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=r}while(s!==null);yt===0&&(yt=5)}function aE(r,s){do{var l=U1(r.alternate,r);if(l!==null){l.flags&=32767,ke=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){ke=r;return}ke=r=l}while(r!==null);yt=6,ke=null}function lE(r,s,l,c,y,v,A,R,V){r.cancelPendingCommit=null;do df();while(Ot!==0);if((Qe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=Sh,hh(r,l,v,A,R,V),r===ot&&(ke=ot=null,Ve=0),va=s,ro=r,vr=l,Mp=v,Dp=y,Xv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,J1(Vr,function(){return hE(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,y=ae.p,ae.p=2,A=Qe,Qe|=4;try{L1(r,s,l)}finally{Qe=A,ae.p=y,X.T=c}}Ot=1,uE(),cE(),fE()}}function uE(){if(Ot===1){Ot=0;var r=ro,s=va,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var c=ae.p;ae.p=2;var y=Qe;Qe|=4;try{Gv(s,r);var v=Kp,A=Qy(r.containerInfo),R=v.focusedElem,V=v.selectionRange;if(A!==R&&R&&R.ownerDocument&&Jy(R.ownerDocument.documentElement,R)){if(V!==null&&yh(R)){var K=V.start,j=V.end;if(j===void 0&&(j=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(j,R.value.length);else{var ne=R.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),me=R.textContent.length,Ee=Math.min(V.start,me),rt=V.end===void 0?Ee:Math.min(V.end,me);!W.extend&&Ee>rt&&(A=rt,rt=Ee,Ee=A);var H=Yy(R,Ee),O=Yy(R,rt);if(H&&O&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==O.node||W.focusOffset!==O.offset)){var $=ne.createRange();$.setStart(H.node,H.offset),W.removeAllRanges(),Ee>rt?(W.addRange($),W.extend(O.node,O.offset)):($.setEnd(O.node,O.offset),W.addRange($))}}}}for(ne=[],W=R;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ne.length;R++){var ee=ne[R];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Cf=!!$p,Kp=$p=null}finally{Qe=y,ae.p=c,X.T=l}}r.current=s,Ot=2}}function cE(){if(Ot===2){Ot=0;var r=ro,s=va,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var c=ae.p;ae.p=2;var y=Qe;Qe|=4;try{Ov(r,s.alternate,s)}finally{Qe=y,ae.p=c,X.T=l}}Ot=3}}function fE(){if(Ot===4||Ot===3){Ot=0,tc();var r=ro,s=va,l=vr,c=Xv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ot=5:(Ot=0,va=ro=null,dE(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(io=null),nr(l),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(ti,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=X.T,y=ae.p,ae.p=2,X.T=null;try{for(var v=r.onRecoverableError,A=0;A<c.length;A++){var R=c[A];v(R.value,{componentStack:R.stack})}}finally{X.T=s,ae.p=y}}(vr&3)!==0&&df(),$i(r),y=r.pendingLanes,(l&261930)!==0&&(y&42)!==0?r===Pp?eu++:(eu=0,Pp=r):eu=0,tu(0)}}function dE(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Vl(s)))}function df(){return uE(),cE(),fE(),hE()}function hE(){if(Ot!==5)return!1;var r=ro,s=Mp;Mp=0;var l=nr(vr),c=X.T,y=ae.p;try{ae.p=32>l?32:l,X.T=null,l=Dp,Dp=null;var v=ro,A=vr;if(Ot=0,va=ro=null,vr=0,(Qe&6)!==0)throw Error(i(331));var R=Qe;if(Qe|=4,Jv(v.current),$v(v,v.current,A,l),Qe=R,tu(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(ti,v)}catch{}return!0}finally{ae.p=y,X.T=c,dE(r,s)}}function pE(r,s,l){s=Bn(l,s),s=cp(r.stateNode,s,2),r=Xr(r,s,2),r!==null&&(Ho(r,2),$i(r))}function et(r,s,l){if(r.tag===3)pE(r,r,l);else for(;s!==null;){if(s.tag===3){pE(s,r,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(io===null||!io.has(c))){r=Bn(l,r),l=mv(2),c=Xr(s,l,2),c!==null&&(gv(l,c,s,r),Ho(c,2),$i(c));break}}s=s.return}}function Vp(r,s,l){var c=r.pingCache;if(c===null){c=r.pingCache=new q1;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(l)||(wp=!0,y.add(l),r=$1.bind(null,r,s,l),s.then(r,r))}function $1(r,s,l){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ot===r&&(Ve&l)===l&&(yt===4||yt===3&&(Ve&62914560)===Ve&&300>ln()-sf?(Qe&2)===0&&Ea(r,0):Np|=l,_a===Ve&&(_a=0)),$i(r)}function mE(r,s){s===0&&(s=ac()),r=ns(r,s),r!==null&&(Ho(r,s),$i(r))}function K1(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),mE(r,l)}function Y1(r,s){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,y=r.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),mE(r,l)}function J1(r,s){return Lt(r,s)}var hf=null,Sa=null,Up=!1,pf=!1,Lp=!1,so=0;function $i(r){r!==Sa&&r.next===null&&(Sa===null?hf=Sa=r:Sa=Sa.next=r),pf=!0,Up||(Up=!0,W1())}function tu(r,s){if(!Lp&&pf){Lp=!0;do for(var l=!1,c=hf;c!==null;){if(r!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-_t(42|r)+1)-1,v&=y&~(A&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,vE(c,v))}else v=Ve,v=wi(c,c===ot?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ni(c,v)||(l=!0,vE(c,v));c=c.next}while(l);Lp=!1}}function Q1(){gE()}function gE(){pf=Up=!1;var r=0;so!==0&&sN()&&(r=so);for(var s=ln(),l=null,c=hf;c!==null;){var y=c.next,v=yE(c,s);v===0?(c.next=null,l===null?hf=y:l.next=y,y===null&&(Sa=l)):(l=c,(r!==0||(v&3)!==0)&&(pf=!0)),c=y}Ot!==0&&Ot!==5||tu(r),so!==0&&(so=0)}function yE(r,s){for(var l=r.suspendedLanes,c=r.pingedLanes,y=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var A=31-_t(v),R=1<<A,V=y[A];V===-1?((R&l)===0||(R&c)!==0)&&(y[A]=dh(R,s)):V<=s&&(r.expiredLanes|=R),v&=~R}if(s=ot,l=Ve,l=wi(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===s&&(je===2||je===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&xr(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ni(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(c!==null&&xr(c),nr(l)){case 2:case 8:l=fl;break;case 32:l=Vr;break;case 268435456:l=nc;break;default:l=Vr}return c=_E.bind(null,r),l=Lt(l,c),r.callbackPriority=s,r.callbackNode=l,s}return c!==null&&c!==null&&xr(c),r.callbackPriority=2,r.callbackNode=null,2}function _E(r,s){if(Ot!==0&&Ot!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(df()&&r.callbackNode!==l)return null;var c=Ve;return c=wi(r,r===ot?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(jv(r,c,s),yE(r,ln()),r.callbackNode!=null&&r.callbackNode===l?_E.bind(null,r):null)}function vE(r,s){if(df())return null;jv(r,s,!0)}function W1(){lN(function(){(Qe&6)!==0?Lt(cl,Q1):gE()})}function Op(){if(so===0){var r=aa;r===0&&(r=Ii,Ii<<=1,(Ii&261888)===0&&(Ii=256)),so=r}return so}function EE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ks(""+r)}function TE(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function X1(r,s,l,c,y){if(s==="submit"&&l&&l.stateNode===y){var v=EE((y[Bt]||null).action),A=c.submitter;A&&(s=(s=A[Bt]||null)?EE(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var R=new Oi("action","action",null,c,y);r.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(so!==0){var V=A?TE(y,A):new FormData(y);rp(l,{pending:!0,data:V,method:y.method,action:v},null,V)}}else typeof v=="function"&&(R.preventDefault(),V=A?TE(y,A):new FormData(y),rp(l,{pending:!0,data:V,method:y.method,action:v},v,V))},currentTarget:y}]})}}for(var Fp=0;Fp<Th.length;Fp++){var qp=Th[Fp],Z1=qp.toLowerCase(),j1=qp[0].toUpperCase()+qp.slice(1);ci(Z1,"on"+j1)}ci(Zy,"onAnimationEnd"),ci(jy,"onAnimationIteration"),ci(e_,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(m1,"onTransitionRun"),ci(g1,"onTransitionStart"),ci(y1,"onTransitionCancel"),ci(t_,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function SE(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var A=c.length-1;0<=A;A--){var R=c[A],V=R.instance,K=R.currentTarget;if(R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(j){Nc(j)}y.currentTarget=null,v=V}else for(A=0;A<c.length;A++){if(R=c[A],V=R.instance,K=R.currentTarget,R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(j){Nc(j)}y.currentTarget=null,v=V}}}}function xe(r,s){var l=s[Bs];l===void 0&&(l=s[Bs]=new Set);var c=r+"__bubble";l.has(c)||(AE(s,r,2,!1),l.add(c))}function Bp(r,s,l){var c=0;s&&(c|=4),AE(l,r,c,s)}var mf="_reactListening"+Math.random().toString(36).slice(2);function Hp(r){if(!r[mf]){r[mf]=!0,pl.forEach(function(l){l!=="selectionchange"&&(eN.has(l)||Bp(l,!1,r),Bp(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[mf]||(s[mf]=!0,Bp("selectionchange",!1,s))}}function AE(r,s,l,c){switch(ZE(s)){case 2:var y=NN;break;case 8:y=bN;break;default:y=im}l=y.bind(null,s,l,r),y=void 0,!Jo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?r.addEventListener(s,l,{capture:!0,passive:y}):r.addEventListener(s,l,!0):y!==void 0?r.addEventListener(s,l,{passive:y}):r.addEventListener(s,l,!1)}function Gp(r,s,l,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Di(R),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){c=v=A;continue e}R=R.parentNode}}c=c.return}Br(function(){var K=v,j=Ln(l),ne=[];e:{var Y=n_.get(r);if(Y!==void 0){var W=Oi,me=r;switch(r){case"keypress":if(Wo(l)===0)break e;case"keydown":case"keyup":W=Ic;break;case"focusin":me="focus",W=Zo;break;case"focusout":me="blur",W=Zo;break;case"beforeblur":case"afterblur":W=Zo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=S;break;case Zy:case jy:case e_:W=_c;break;case t_:W=w;break;case"scroll":case"scrollend":W=Rl;break;case"wheel":W=Q;break;case"copy":case"cut":case"paste":W=vc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=or;break;case"toggle":case"beforetoggle":W=be}var Ee=(s&4)!==0,rt=!Ee&&(r==="scroll"||r==="scrollend"),H=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var O=K,$;O!==null;){var ee=O;if($=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||$===null||H===null||(ee=si(O,H),ee!=null&&Ee.push(iu(O,ee,$))),rt)break;O=O.return}0<Ee.length&&(Y=new W(Y,me,null,l,j),ne.push({event:Y,listeners:Ee}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",Y&&l!==Al&&(me=l.relatedTarget||l.fromElement)&&(Di(me)||me[bi]))break e;if((W||Y)&&(Y=j.window===j?j:(Y=j.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(me=l.relatedTarget||l.toElement,W=K,me=me?Di(me):null,me!==null&&(rt=a(me),Ee=me.tag,me!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(me=null)):(W=null,me=K),W!==me)){if(Ee=wl,ee="onMouseLeave",H="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=or,ee="onPointerLeave",H="onPointerEnter",O="pointer"),rt=W==null?Y:An(W),$=me==null?Y:An(me),Y=new Ee(ee,O+"leave",W,l,j),Y.target=rt,Y.relatedTarget=$,ee=null,Di(j)===K&&(Ee=new Ee(H,O+"enter",me,l,j),Ee.target=$,Ee.relatedTarget=rt,ee=Ee),rt=ee,W&&me)t:{for(Ee=tN,H=W,O=me,$=0,ee=H;ee;ee=Ee(ee))$++;ee=0;for(var _e=O;_e;_e=Ee(_e))ee++;for(;0<$-ee;)H=Ee(H),$--;for(;0<ee-$;)O=Ee(O),ee--;for(;$--;){if(H===O||O!==null&&H===O.alternate){Ee=H;break t}H=Ee(H),O=Ee(O)}Ee=null}else Ee=null;W!==null&&CE(ne,Y,W,Ee,!1),me!==null&&rt!==null&&CE(ne,rt,me,Ee,!0)}}e:{if(Y=K?An(K):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var $e=By;else if(Fy(Y))if(Hy)$e=d1;else{$e=c1;var ge=u1}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?K&&$s(K.elementType)&&($e=By):$e=f1;if($e&&($e=$e(r,K))){qy(ne,$e,l,j);break e}ge&&ge(r,Y,K),r==="focusout"&&K&&Y.type==="number"&&K.memoizedProps.value!=null&&El(Y,"number",Y.value)}switch(ge=K?An(K):window,r){case"focusin":(Fy(ge)||ge.contentEditable==="true")&&(js=ge,_h=K,Pl=null);break;case"focusout":Pl=_h=js=null;break;case"mousedown":vh=!0;break;case"contextmenu":case"mouseup":case"dragend":vh=!1,Wy(ne,l,j);break;case"selectionchange":if(p1)break;case"keydown":case"keyup":Wy(ne,l,j)}var Pe;if(Je)e:{switch(r){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Zs?jo(r,l)&&(Ue="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ue="onCompositionStart");Ue&&(Bi&&l.locale!=="ko"&&(Zs||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Zs&&(Pe=Il()):(Li=j,Cl="value"in Li?Li.value:Li.textContent,Zs=!0)),ge=gf(K,Ue),0<ge.length&&(Ue=new qi(Ue,r,null,l,j),ne.push({event:Ue,listeners:ge}),Pe?Ue.data=Pe:(Pe=Xs(l),Pe!==null&&(Ue.data=Pe)))),(Pe=Fn?o1(r,l):s1(r,l))&&(Ue=gf(K,"onBeforeInput"),0<Ue.length&&(ge=new qi("onBeforeInput","beforeinput",null,l,j),ne.push({event:ge,listeners:Ue}),ge.data=Pe)),X1(ne,r,K,l,j)}SE(ne,s)})}function iu(r,s,l){return{instance:r,listener:s,currentTarget:l}}function gf(r,s){for(var l=s+"Capture",c=[];r!==null;){var y=r,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=si(r,l),y!=null&&c.unshift(iu(r,y,v)),y=si(r,s),y!=null&&c.push(iu(r,y,v))),r.tag===3)return c;r=r.return}return[]}function tN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function CE(r,s,l,c,y){for(var v=s._reactName,A=[];l!==null&&l!==c;){var R=l,V=R.alternate,K=R.stateNode;if(R=R.tag,V!==null&&V===c)break;R!==5&&R!==26&&R!==27||K===null||(V=K,y?(K=si(l,v),K!=null&&A.unshift(iu(l,K,V))):y||(K=si(l,v),K!=null&&A.push(iu(l,K,V)))),l=l.return}A.length!==0&&r.push({event:s,listeners:A})}var nN=/\r\n?/g,iN=/\u0000|\uFFFD/g;function IE(r){return(typeof r=="string"?r:""+r).replace(nN,`
`).replace(iN,"")}function RE(r,s){return s=IE(s),IE(r)===s}function it(r,s,l,c,y,v){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||mn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&mn(r,""+c);break;case"className":Cn(r,"class",c);break;case"tabIndex":Cn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(r,l,c);break;case"style":Sl(r,c,v);break;case"data":if(s!=="object"){Cn(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Ks(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(s!=="input"&&it(r,s,"name",y.name,y,null),it(r,s,"formEncType",y.formEncType,y,null),it(r,s,"formMethod",y.formMethod,y,null),it(r,s,"formTarget",y.formTarget,y,null)):(it(r,s,"encType",y.encType,y,null),it(r,s,"method",y.method,y,null),it(r,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Ks(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=oi);break;case"onScroll":c!=null&&xe("scroll",r);break;case"onScrollEnd":c!=null&&xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Ks(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":xe("beforetoggle",r),xe("toggle",r),Gs(r,"popover",c);break;case"xlinkActuate":wt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Gs(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=mc.get(l)||l,Gs(r,l,c))}}function zp(r,s,l,c,y,v){switch(l){case"style":Sl(r,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?mn(r,c):(typeof c=="number"||typeof c=="bigint")&&mn(r,""+c);break;case"onScroll":c!=null&&xe("scroll",r);break;case"onScrollEnd":c!=null&&xe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ml.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),v=r[Bt]||null,v=v!=null?v[l]:null,typeof v=="function"&&r.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,c,y);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Gs(r,l,c)}}}function Xt(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",r),xe("load",r);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(r,s,v,A,l,null)}}y&&it(r,s,"srcSet",l.srcSet,l,null),c&&it(r,s,"src",l.src,l,null);return;case"input":xe("invalid",r);var R=v=A=y=null,V=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var j=l[c];if(j!=null)switch(c){case"name":y=j;break;case"type":A=j;break;case"checked":V=j;break;case"defaultChecked":K=j;break;case"value":v=j;break;case"defaultValue":R=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,s));break;default:it(r,s,c,j,l,null)}}dc(r,v,R,V,K,A,y,!1);return;case"select":xe("invalid",r),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:it(r,s,y,R,l,null)}s=v,l=A,r.multiple=!!c,s!=null?Lr(r,!!c,s,!1):l!=null&&Lr(r,!!c,l,!0);return;case"textarea":xe("invalid",r),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:it(r,s,A,R,l,null)}Or(r,c,y,v);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:it(r,s,V,c,l,null)}return;case"dialog":xe("beforetoggle",r),xe("toggle",r),xe("cancel",r),xe("close",r);break;case"iframe":case"object":xe("load",r);break;case"video":case"audio":for(c=0;c<nu.length;c++)xe(nu[c],r);break;case"image":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"embed":case"source":case"link":xe("error",r),xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(r,s,K,c,l,null)}return;default:if($s(s)){for(j in l)l.hasOwnProperty(j)&&(c=l[j],c!==void 0&&zp(r,s,j,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&it(r,s,R,c,l,null))}function rN(r,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,R=null,V=null,K=null,j=null;for(W in l){var ne=l[W];if(l.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":V=ne;default:c.hasOwnProperty(W)||it(r,s,W,null,c,ne)}}for(var Y in c){var W=c[Y];if(ne=l[Y],c.hasOwnProperty(Y)&&(W!=null||ne!=null))switch(Y){case"type":v=W;break;case"name":y=W;break;case"checked":K=W;break;case"defaultChecked":j=W;break;case"value":A=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ne&&it(r,s,Y,W,c,ne)}}zs(r,A,R,V,K,j,v,y);return;case"select":W=A=R=Y=null;for(v in l)if(V=l[v],l.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":W=V;default:c.hasOwnProperty(v)||it(r,s,v,null,c,V)}for(y in c)if(v=c[y],V=l[y],c.hasOwnProperty(y)&&(v!=null||V!=null))switch(y){case"value":Y=v;break;case"defaultValue":R=v;break;case"multiple":A=v;default:v!==V&&it(r,s,y,v,c,V)}s=R,l=A,c=W,Y!=null?Lr(r,!!l,Y,!1):!!c!=!!l&&(s!=null?Lr(r,!!l,s,!0):Lr(r,!!l,l?[]:"",!1));return;case"textarea":W=Y=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:it(r,s,R,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Y=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&it(r,s,A,y,c,v)}hc(r,Y,W);return;case"option":for(var me in l)if(Y=l[me],l.hasOwnProperty(me)&&Y!=null&&!c.hasOwnProperty(me))switch(me){case"selected":r.selected=!1;break;default:it(r,s,me,null,c,Y)}for(V in c)if(Y=c[V],W=l[V],c.hasOwnProperty(V)&&Y!==W&&(Y!=null||W!=null))switch(V){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:it(r,s,V,Y,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in l)Y=l[Ee],l.hasOwnProperty(Ee)&&Y!=null&&!c.hasOwnProperty(Ee)&&it(r,s,Ee,null,c,Y);for(K in c)if(Y=c[K],W=l[K],c.hasOwnProperty(K)&&Y!==W&&(Y!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:it(r,s,K,Y,c,W)}return;default:if($s(s)){for(var rt in l)Y=l[rt],l.hasOwnProperty(rt)&&Y!==void 0&&!c.hasOwnProperty(rt)&&zp(r,s,rt,void 0,c,Y);for(j in c)Y=c[j],W=l[j],!c.hasOwnProperty(j)||Y===W||Y===void 0&&W===void 0||zp(r,s,j,Y,c,W);return}}for(var H in l)Y=l[H],l.hasOwnProperty(H)&&Y!=null&&!c.hasOwnProperty(H)&&it(r,s,H,null,c,Y);for(ne in c)Y=c[ne],W=l[ne],!c.hasOwnProperty(ne)||Y===W||Y==null&&W==null||it(r,s,ne,Y,c,W)}function wE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,R=y.duration;if(v&&R&&wE(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var V=l[c],K=V.startTime;if(K>R)break;var j=V.transferSize,ne=V.initiatorType;j&&wE(ne)&&(V=V.responseEnd,A+=j*(V<R?1:(R-K)/(V-K)))}if(--c,s+=8*(v+A)/(y.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var $p=null,Kp=null;function yf(r){return r.nodeType===9?r:r.ownerDocument}function NE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bE(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Yp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jp=null;function sN(){var r=window.event;return r&&r.type==="popstate"?r===Jp?!1:(Jp=r,!0):(Jp=null,!1)}var ME=typeof setTimeout=="function"?setTimeout:void 0,aN=typeof clearTimeout=="function"?clearTimeout:void 0,DE=typeof Promise=="function"?Promise:void 0,lN=typeof queueMicrotask=="function"?queueMicrotask:typeof DE<"u"?function(r){return DE.resolve(null).then(r).catch(uN)}:ME;function uN(r){setTimeout(function(){throw r})}function ao(r){return r==="head"}function PE(r,s){var l=s,c=0;do{var y=l.nextSibling;if(r.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(y),Ra(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")ru(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,ru(l);for(var v=l.firstChild;v;){var A=v.nextSibling,R=v.nodeName;v[Mi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&ru(r.ownerDocument.body);l=y}while(l);Ra(s)}function kE(r,s){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function Qp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Qp(l),Hs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function cN(r,s,l,c){for(;r.nodeType===1;){var y=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Mi])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=Kn(r.nextSibling),r===null)break}return null}function fN(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Kn(r.nextSibling),r===null))return null;return r}function xE(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Kn(r.nextSibling),r===null))return null;return r}function Wp(r){return r.data==="$?"||r.data==="$~"}function Xp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function dN(r,s){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Kn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Zp=null;function VE(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(s===0)return Kn(r.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}r=r.nextSibling}return null}function UE(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return r;s--}else l!=="/$"&&l!=="/&"||s++}r=r.previousSibling}return null}function LE(r,s,l){switch(s=yf(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ru(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Hs(r)}var Yn=new Map,OE=new Set;function _f(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Er=ae.d;ae.d={f:hN,r:pN,D:mN,C:gN,L:yN,m:_N,X:EN,S:vN,M:TN};function hN(){var r=Er.f(),s=uf();return r||s}function pN(r){var s=Un(r);s!==null&&s.tag===5&&s.type==="form"?tv(s):Er.r(r)}var Aa=typeof document>"u"?null:document;function FE(r,s,l){var c=Aa;if(c&&typeof s=="string"&&s){var y=pn(s);y='link[rel="'+r+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),OE.has(y)||(OE.add(y),r={rel:r,crossOrigin:l,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),Xt(s,"link",r),Rt(s),c.head.appendChild(s)))}}function mN(r){Er.D(r),FE("dns-prefetch",r,null)}function gN(r,s){Er.C(r,s),FE("preconnect",r,s)}function yN(r,s,l){Er.L(r,s,l);var c=Aa;if(c&&r&&s){var y='link[rel="preload"][as="'+pn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+pn(l.imageSizes)+'"]')):y+='[href="'+pn(r)+'"]';var v=y;switch(s){case"style":v=Ca(r);break;case"script":v=Ia(r)}Yn.has(v)||(r=E({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),Yn.set(v,r),c.querySelector(y)!==null||s==="style"&&c.querySelector(ou(v))||s==="script"&&c.querySelector(su(v))||(s=c.createElement("link"),Xt(s,"link",r),Rt(s),c.head.appendChild(s)))}}function _N(r,s){Er.m(r,s);var l=Aa;if(l&&r){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+pn(c)+'"][href="'+pn(r)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ia(r)}if(!Yn.has(v)&&(r=E({rel:"modulepreload",href:r},s),Yn.set(v,r),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(su(v)))return}c=l.createElement("link"),Xt(c,"link",r),Rt(c),l.head.appendChild(c)}}}function vN(r,s,l){Er.S(r,s,l);var c=Aa;if(c&&r){var y=Pi(c).hoistableStyles,v=Ca(r);s=s||"default";var A=y.get(v);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(ou(v)))R.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":s},l),(l=Yn.get(v))&&jp(r,l);var V=A=c.createElement("link");Rt(V),Xt(V,"link",r),V._p=new Promise(function(K,j){V.onload=K,V.onerror=j}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,vf(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(v,A)}}}function EN(r,s){Er.X(r,s);var l=Aa;if(l&&r){var c=Pi(l).hoistableScripts,y=Ia(r),v=c.get(y);v||(v=l.querySelector(su(y)),v||(r=E({src:r,async:!0},s),(s=Yn.get(y))&&em(r,s),v=l.createElement("script"),Rt(v),Xt(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function TN(r,s){Er.M(r,s);var l=Aa;if(l&&r){var c=Pi(l).hoistableScripts,y=Ia(r),v=c.get(y);v||(v=l.querySelector(su(y)),v||(r=E({src:r,async:!0,type:"module"},s),(s=Yn.get(y))&&em(r,s),v=l.createElement("script"),Rt(v),Xt(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function qE(r,s,l,c){var y=(y=De.current)?_f(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Ca(l.href),l=Pi(y).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Ca(l.href);var v=Pi(y).hoistableStyles,A=v.get(r);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,A),(v=y.querySelector(ou(r)))&&!v._p&&(A.instance=v,A.state.loading=5),Yn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Yn.set(r,l),v||SN(y,r,l,A.state))),s&&c===null)throw Error(i(528,""));return A}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ia(l),l=Pi(y).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ca(r){return'href="'+pn(r)+'"'}function ou(r){return'link[rel="stylesheet"]['+r+"]"}function BE(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function SN(r,s,l,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Xt(s,"link",l),Rt(s),r.head.appendChild(s))}function Ia(r){return'[src="'+pn(r)+'"]'}function su(r){return"script[async]"+r}function HE(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+pn(l.href)+'"]');if(c)return s.instance=c,Rt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Rt(c),Xt(c,"style",y),vf(c,l.precedence,r),s.instance=c;case"stylesheet":y=Ca(l.href);var v=r.querySelector(ou(y));if(v)return s.state.loading|=4,s.instance=v,Rt(v),v;c=BE(l),(y=Yn.get(y))&&jp(c,y),v=(r.ownerDocument||r).createElement("link"),Rt(v);var A=v;return A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),Xt(v,"link",c),s.state.loading|=4,vf(v,l.precedence,r),s.instance=v;case"script":return v=Ia(l.src),(y=r.querySelector(su(v)))?(s.instance=y,Rt(y),y):(c=l,(y=Yn.get(v))&&(c=E({},l),em(c,y)),r=r.ownerDocument||r,y=r.createElement("script"),Rt(y),Xt(y,"link",c),r.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,vf(c,l.precedence,r));return s.instance}function vf(r,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===s)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(r,v.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function jp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function em(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ef=null;function GE(r,s,l){if(Ef===null){var c=new Map,y=Ef=new Map;y.set(l,c)}else y=Ef,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),y=0;y<l.length;y++){var v=l[y];if(!(v[Mi]||v[It]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=r+A;var R=c.get(A);R?R.push(v):c.set(A,[v])}}return c}function zE(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function AN(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function $E(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function CN(r,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ca(c.href),v=s.querySelector(ou(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Tf.bind(r),s.then(r,r)),l.state.loading|=4,l.instance=v,Rt(v);return}v=s.ownerDocument||s,c=BE(c),(y=Yn.get(y))&&jp(c,y),v=v.createElement("link"),Rt(v);var A=v;A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),Xt(v,"link",c),l.instance=v}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Tf.bind(r),s.addEventListener("load",l),s.addEventListener("error",l))}}var tm=0;function IN(r,s){return r.stylesheets&&r.count===0&&Af(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&Af(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4+s);0<r.imgBytes&&tm===0&&(tm=62500*oN());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Af(r,r.stylesheets),r.unsuspend)){var v=r.unsuspend;r.unsuspend=null,v()}},(r.imgBytes>tm?50:800)+s);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Sf=null;function Af(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Sf=new Map,s.forEach(RN,r),Sf=null,Tf.call(r))}function RN(r,s){if(!(s.state.loading&4)){var l=Sf.get(r);if(l)var c=l.get(null);else{l=new Map,Sf.set(r,l);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=Tf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),s.state.loading|=4}}var au={$$typeof:G,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function wN(r,s,l,c,y,v,A,R,V){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function KE(r,s,l,c,y,v,A,R,V,K,j,ne){return r=new wN(r,s,l,A,V,K,j,ne,R),s=1,v===!0&&(s|=24),v=Rn(3,null,null,s),r.current=v,v.stateNode=r,s=xh(),s.refCount++,r.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:s},Oh(v),r}function YE(r){return r?(r=na,r):na}function JE(r,s,l,c,y,v){y=YE(y),c.context===null?c.context=y:c.pendingContext=y,c=Wr(s),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Xr(r,c,s),l!==null&&(En(l,r,s),Fl(l,r,s))}function QE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function nm(r,s){QE(r,s),(r=r.alternate)&&QE(r,s)}function WE(r){if(r.tag===13||r.tag===31){var s=ns(r,67108864);s!==null&&En(s,r,67108864),nm(r,67108864)}}function XE(r){if(r.tag===13||r.tag===31){var s=Dn();s=zo(s);var l=ns(r,s);l!==null&&En(l,r,s),nm(r,s)}}var Cf=!0;function NN(r,s,l,c){var y=X.T;X.T=null;var v=ae.p;try{ae.p=2,im(r,s,l,c)}finally{ae.p=v,X.T=y}}function bN(r,s,l,c){var y=X.T;X.T=null;var v=ae.p;try{ae.p=8,im(r,s,l,c)}finally{ae.p=v,X.T=y}}function im(r,s,l,c){if(Cf){var y=rm(c);if(y===null)Gp(r,s,c,If,l),jE(r,c);else if(DN(y,r,s,l,c))c.stopPropagation();else if(jE(r,c),s&4&&-1<MN.indexOf(r)){for(;y!==null;){var v=Un(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ri(v.pendingLanes);if(A!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var V=1<<31-_t(A);R.entanglements[1]|=V,A&=~V}$i(v),(Qe&6)===0&&(af=ln()+500,tu(0))}}break;case 31:case 13:R=ns(v,2),R!==null&&En(R,v,2),uf(),nm(v,2)}if(v=rm(c),v===null&&Gp(r,s,c,If,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Gp(r,s,c,null,l)}}function rm(r){return r=Ln(r),om(r)}var If=null;function om(r){if(If=null,r=Di(r),r!==null){var s=a(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=u(s),r!==null)return r;r=null}else if(l===31){if(r=f(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return If=r,null}function ZE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qo()){case cl:return 2;case fl:return 8;case Vr:case fh:return 32;case nc:return 268435456;default:return 32}default:return 32}}var sm=!1,lo=null,uo=null,co=null,lu=new Map,uu=new Map,fo=[],MN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jE(r,s){switch(r){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":lu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(s.pointerId)}}function cu(r,s,l,c,y,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=Un(s),s!==null&&WE(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),r)}function DN(r,s,l,c,y){switch(s){case"focusin":return lo=cu(lo,r,s,l,c,y),!0;case"dragenter":return uo=cu(uo,r,s,l,c,y),!0;case"mouseover":return co=cu(co,r,s,l,c,y),!0;case"pointerover":var v=y.pointerId;return lu.set(v,cu(lu.get(v)||null,r,s,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,uu.set(v,cu(uu.get(v)||null,r,s,l,c,y)),!0}return!1}function eT(r){var s=Di(r.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){r.blockedOn=s,ii(r.priority,function(){XE(l)});return}}else if(s===31){if(s=f(l),s!==null){r.blockedOn=s,ii(r.priority,function(){XE(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=rm(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Al=c,l.target.dispatchEvent(c),Al=null}else return s=Un(l),s!==null&&WE(s),r.blockedOn=l,!1;s.shift()}return!0}function tT(r,s,l){Rf(r)&&l.delete(s)}function PN(){sm=!1,lo!==null&&Rf(lo)&&(lo=null),uo!==null&&Rf(uo)&&(uo=null),co!==null&&Rf(co)&&(co=null),lu.forEach(tT),uu.forEach(tT)}function wf(r,s){r.blockedOn===s&&(r.blockedOn=null,sm||(sm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PN)))}var Nf=null;function nT(r){Nf!==r&&(Nf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nf===r&&(Nf=null);for(var s=0;s<r.length;s+=3){var l=r[s],c=r[s+1],y=r[s+2];if(typeof c!="function"){if(om(c||l)===null)continue;break}var v=Un(l);v!==null&&(r.splice(s,3),s-=3,rp(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Ra(r){function s(V){return wf(V,r)}lo!==null&&wf(lo,r),uo!==null&&wf(uo,r),co!==null&&wf(co,r),lu.forEach(s),uu.forEach(s);for(var l=0;l<fo.length;l++){var c=fo[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<fo.length&&(l=fo[0],l.blockedOn===null);)eT(l),l.blockedOn===null&&fo.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[Bt]||null;if(typeof v=="function")A||nT(l);else if(A){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Bt]||null)R=A.formAction;else if(om(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),nT(l)}}}function iT(){function r(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function am(r){this._internalRoot=r}bf.prototype.render=am.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Dn();JE(l,c,r,s,null,null)},bf.prototype.unmount=am.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;JE(r.current,2,null,r,null,null),uf(),s[bi]=null}};function bf(r){this._internalRoot=r}bf.prototype.unstable_scheduleHydration=function(r){if(r){var s=lc();r={blockedOn:null,target:r,priority:s};for(var l=0;l<fo.length&&s!==0&&s<fo[l].priority;l++);fo.splice(l,0,r),l===0&&eT(r)}};var rT=e.version;if(rT!=="19.2.4")throw Error(i(527,rT,"19.2.4"));ae.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var kN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{ti=Mf.inject(kN),Kt=Mf}catch{}}return du.createRoot=function(r,s){if(!o(r))throw Error(i(299));var l=!1,c="",y=fv,v=dv,A=hv;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=KE(r,1,!1,null,null,l,c,null,y,v,A,iT),r[bi]=s.current,Hp(r),new am(s)},du.hydrateRoot=function(r,s,l){if(!o(r))throw Error(i(299));var c=!1,y="",v=fv,A=dv,R=hv,V=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),s=KE(r,1,!0,s,l??null,c,y,V,v,A,R,iT),s.context=YE(null),l=s.current,c=Dn(),c=zo(c),y=Wr(c),y.callback=null,Xr(l,y,c),l=c,s.current.lanes=l,Ho(s,l),$i(s),r[bi]=s.current,Hp(r),new bf(s)},du.version="19.2.4",du}var pT;function GN(){if(pT)return cm.exports;pT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cm.exports=HN(),cm.exports}var zN=GN();const q9=zA(zN);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mT="popstate";function $N(t={}){function e(o,a){let{pathname:u="/",search:f="",hash:p=""}=Rs(o.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Vm("",{pathname:u,search:f,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let u=o.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let p=o.location.href,h=p.indexOf("#");f=h===-1?p:p.slice(0,h)}return f+"#"+(typeof a=="string"?a:Mu(a))}function i(o,a){Xn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return YN(e,n,i,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KN(){return Math.random().toString(36).substring(2,10)}function gT(t,e){return{usr:t.state,key:t.key,idx:e}}function Vm(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Rs(e):e,state:n,key:e&&e.key||i||KN()}}function Mu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Rs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function YN(t,e,n,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,f="POP",p=null,h=_();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function _(){return(u.state||{idx:null}).idx}function E(){f="POP";let D=_(),B=D==null?null:D-h;h=D,p&&p({action:f,location:x.location,delta:B})}function T(D,B){f="PUSH";let J=Vm(x.location,D,B);n&&n(J,D),h=_()+1;let G=gT(J,h),oe=x.createHref(J);try{u.pushState(G,"",oe)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(oe)}a&&p&&p({action:f,location:x.location,delta:1})}function I(D,B){f="REPLACE";let J=Vm(x.location,D,B);n&&n(J,D),h=_();let G=gT(J,h),oe=x.createHref(J);u.replaceState(G,"",oe),a&&p&&p({action:f,location:x.location,delta:0})}function k(D){return JN(D)}let x={get action(){return f},get location(){return t(o,u)},listen(D){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(mT,E),p=D,()=>{o.removeEventListener(mT,E),p=null}},createHref(D){return e(o,D)},createURL:k,encodeLocation(D){let B=k(D);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:T,replace:I,go(D){return u.go(D)}};return x}function JN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ht(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Mu(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function $A(t,e,n="/"){return QN(t,e,n,!1)}function QN(t,e,n,i){let o=typeof e=="string"?Rs(e):e,a=Rr(o.pathname||"/",n);if(a==null)return null;let u=KA(t);WN(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let h=ab(a);f=ob(u[p],h,i)}return f}function KA(t,e=[],n=[],i="",o=!1){let a=(u,f,p=o,h)=>{let _={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;ht(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let E=Ar([i,_.relativePath]),T=n.concat(_);u.children&&u.children.length>0&&(ht(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),KA(u.children,e,T,E,p)),!(u.path==null&&!u.index)&&e.push({path:E,score:ib(E,u.index),routesMeta:T})};return t.forEach((u,f)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))a(u,f);else for(let h of YA(u.path))a(u,f,!0,h)}),e}function YA(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=YA(i.join("/")),f=[];return f.push(...u.map(p=>p===""?a:[a,p].join("/"))),o&&f.push(...u),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function WN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rb(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var XN=/^:[\w-]+$/,ZN=3,jN=2,eb=1,tb=10,nb=-2,yT=t=>t==="*";function ib(t,e){let n=t.split("/"),i=n.length;return n.some(yT)&&(i+=nb),e&&(i+=jN),n.filter(o=>!yT(o)).reduce((o,a)=>o+(XN.test(a)?ZN:a===""?eb:tb),i)}function rb(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function ob(t,e,n=!1){let{routesMeta:i}=t,o={},a="/",u=[];for(let f=0;f<i.length;++f){let p=i[f],h=f===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=rd({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},_),T=p.route;if(!E&&h&&n&&!i[i.length-1].route.index&&(E=rd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:Ar([a,E.pathname]),pathnameBase:fb(Ar([a,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(a=Ar([a,E.pathnameBase]))}return u}function rd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=sb(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((h,{paramName:_,isOptional:E},T)=>{if(_==="*"){let k=f[T]||"";u=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const I=f[T];return E&&!I?h[_]=void 0:h[_]=(I||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:u,pattern:t}}function sb(t,e=!1,n=!0){Xn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function ab(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Rr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var lb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ub(t,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?Rs(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=_T(n.substring(1),"/"):a=_T(n,e)):a=e,{pathname:a,search:db(i),hash:hb(o)}}function _T(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function pm(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rg(t){let e=cb(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function wg(t,e,n,i=!1){let o;typeof t=="string"?o=Rs(t):(o={...t},ht(!o.pathname||!o.pathname.includes("?"),pm("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),pm("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),pm("#","search","hash",o)));let a=t===""||o.pathname==="",u=a?"/":o.pathname,f;if(u==null)f=n;else{let E=e.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}f=E>=0?e[E]:"/"}let p=ub(o,f),h=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(h||_)&&(p.pathname+="/"),p}var Ar=t=>t.join("/").replace(/\/\/+/g,"/"),fb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),db=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,pb=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function mb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function gb(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var JA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function QA(t,e){let n=t;if(typeof n!="string"||!lb.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,o=!1;if(JA)try{let a=new URL(window.location.href),u=n.startsWith("//")?new URL(a.protocol+n):new URL(n),f=Rr(u.pathname,e);u.origin===a.origin&&f!=null?n=f+u.search+u.hash:o=!0}catch{Xn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var WA=["POST","PUT","PATCH","DELETE"];new Set(WA);var yb=["GET",...WA];new Set(yb);var Wa=Z.createContext(null);Wa.displayName="DataRouter";var xd=Z.createContext(null);xd.displayName="DataRouterState";var _b=Z.createContext(!1),XA=Z.createContext({isTransitioning:!1});XA.displayName="ViewTransition";var vb=Z.createContext(new Map);vb.displayName="Fetchers";var Eb=Z.createContext(null);Eb.displayName="Await";var xn=Z.createContext(null);xn.displayName="Navigation";var Hu=Z.createContext(null);Hu.displayName="Location";var Si=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var Ng=Z.createContext(null);Ng.displayName="RouteError";var ZA="REACT_ROUTER_ERROR",Tb="REDIRECT",Sb="ROUTE_ERROR_RESPONSE";function Ab(t){if(t.startsWith(`${ZA}:${Tb}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Cb(t){if(t.startsWith(`${ZA}:${Sb}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pb(e.status,e.statusText,e.data)}catch{}}function Ib(t,{relative:e}={}){ht(Xa(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=Z.useContext(xn),{hash:o,pathname:a,search:u}=Gu(t,{relative:e}),f=a;return n!=="/"&&(f=a==="/"?n:Ar([n,a])),i.createHref({pathname:f,search:u,hash:o})}function Xa(){return Z.useContext(Hu)!=null}function ko(){return ht(Xa(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Hu).location}var jA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eC(t){Z.useContext(xn).static||Z.useLayoutEffect(t)}function tC(){let{isDataRoute:t}=Z.useContext(Si);return t?qb():Rb()}function Rb(){ht(Xa(),"useNavigate() may be used only in the context of a <Router> component.");let t=Z.useContext(Wa),{basename:e,navigator:n}=Z.useContext(xn),{matches:i}=Z.useContext(Si),{pathname:o}=ko(),a=JSON.stringify(Rg(i)),u=Z.useRef(!1);return eC(()=>{u.current=!0}),Z.useCallback((p,h={})=>{if(Xn(u.current,jA),!u.current)return;if(typeof p=="number"){n.go(p);return}let _=wg(p,JSON.parse(a),o,h.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ar([e,_.pathname])),(h.replace?n.replace:n.push)(_,h.state,h)},[e,n,a,o,t])}var wb=Z.createContext(null);function Nb(t){let e=Z.useContext(Si).outlet;return Z.useMemo(()=>e&&Z.createElement(wb.Provider,{value:t},e),[e,t])}function Gu(t,{relative:e}={}){let{matches:n}=Z.useContext(Si),{pathname:i}=ko(),o=JSON.stringify(Rg(n));return Z.useMemo(()=>wg(t,JSON.parse(o),i,e==="path"),[t,o,i,e])}function bb(t,e){return nC(t,e)}function nC(t,e,n,i,o){var J;ht(Xa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Z.useContext(xn),{matches:u}=Z.useContext(Si),f=u[u.length-1],p=f?f.params:{},h=f?f.pathname:"/",_=f?f.pathnameBase:"/",E=f&&f.route;{let G=E&&E.path||"";rC(h,!E||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=ko(),I;if(e){let G=typeof e=="string"?Rs(e):e;ht(_==="/"||((J=G.pathname)==null?void 0:J.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${G.pathname}" was given in the \`location\` prop.`),I=G}else I=T;let k=I.pathname||"/",x=k;if(_!=="/"){let G=_.replace(/^\//,"").split("/");x="/"+k.replace(/^\//,"").split("/").slice(G.length).join("/")}let D=$A(t,{pathname:x});Xn(E||D!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Xn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=xb(D&&D.map(G=>Object.assign({},G,{params:Object.assign({},p,G.params),pathname:Ar([_,a.encodeLocation?a.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?_:Ar([_,a.encodeLocation?a.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),u,n,i,o);return e&&B?Z.createElement(Hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},B):B}function Mb(){let t=Fb(),e=mb(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:a},"ErrorBoundary")," or"," ",Z.createElement("code",{style:a},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),n?Z.createElement("pre",{style:o},n):null,u)}var Db=Z.createElement(Mb,null),iC=class extends Z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Cb(t.digest);n&&(t=n)}let e=t!==void 0?Z.createElement(Si.Provider,{value:this.props.routeContext},Z.createElement(Ng.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?Z.createElement(Pb,{error:t},e):e}};iC.contextType=_b;var mm=new WeakMap;function Pb({children:t,error:e}){let{basename:n}=Z.useContext(xn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Ab(e.digest);if(i){let o=mm.get(e);if(o)throw o;let a=QA(i.location,n);if(JA&&!mm.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw mm.set(e,u),u}return Z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function kb({routeContext:t,match:e,children:n}){let i=Z.useContext(Wa);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(Si.Provider,{value:t},n)}function xb(t,e=[],n=null,i=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=n==null?void 0:n.errors;if(u!=null){let _=a.findIndex(E=>E.route.id&&(u==null?void 0:u[E.route.id])!==void 0);ht(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,_+1))}let f=!1,p=-1;if(n)for(let _=0;_<a.length;_++){let E=a[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=_),E.route.id){let{loaderData:T,errors:I}=n,k=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||k){f=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}let h=n&&i?(_,E)=>{var T,I;i(_,{location:n.location,params:((I=(T=n.matches)==null?void 0:T[0])==null?void 0:I.params)??{},unstable_pattern:gb(n.matches),errorInfo:E})}:void 0;return a.reduceRight((_,E,T)=>{let I,k=!1,x=null,D=null;n&&(I=u&&E.route.id?u[E.route.id]:void 0,x=E.route.errorElement||Db,f&&(p<0&&T===0?(rC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,D=null):p===T&&(k=!0,D=E.route.hydrateFallbackElement||null)));let B=e.concat(a.slice(0,T+1)),J=()=>{let G;return I?G=x:k?G=D:E.route.Component?G=Z.createElement(E.route.Component,null):E.route.element?G=E.route.element:G=_,Z.createElement(kb,{match:E,routeContext:{outlet:_,matches:B,isDataRoute:n!=null},children:G})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?Z.createElement(iC,{location:n.location,revalidation:n.revalidation,component:x,error:I,children:J(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:h}):J()},null)}function bg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vb(t){let e=Z.useContext(Wa);return ht(e,bg(t)),e}function Ub(t){let e=Z.useContext(xd);return ht(e,bg(t)),e}function Lb(t){let e=Z.useContext(Si);return ht(e,bg(t)),e}function Mg(t){let e=Lb(t),n=e.matches[e.matches.length-1];return ht(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Ob(){return Mg("useRouteId")}function Fb(){var i;let t=Z.useContext(Ng),e=Ub("useRouteError"),n=Mg("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function qb(){let{router:t}=Vb("useNavigate"),e=Mg("useNavigate"),n=Z.useRef(!1);return eC(()=>{n.current=!0}),Z.useCallback(async(o,a={})=>{Xn(n.current,jA),n.current&&(typeof o=="number"?await t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var vT={};function rC(t,e,n){!e&&!vT[t]&&(vT[t]=!0,Xn(!1,n))}Z.memo(Bb);function Bb({routes:t,future:e,state:n,onError:i}){return nC(t,void 0,n,i,e)}function B9({to:t,replace:e,state:n,relative:i}){ht(Xa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=Z.useContext(xn);Xn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Z.useContext(Si),{pathname:u}=ko(),f=tC(),p=wg(t,Rg(a),u,i==="path"),h=JSON.stringify(p);return Z.useEffect(()=>{f(JSON.parse(h),{replace:e,state:n,relative:i})},[f,h,i,e,n]),null}function H9(t){return Nb(t.context)}function Hb(t){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Gb({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:a=!1,unstable_useTransitions:u}){ht(!Xa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),p=Z.useMemo(()=>({basename:f,navigator:o,static:a,unstable_useTransitions:u,future:{}}),[f,o,a,u]);typeof n=="string"&&(n=Rs(n));let{pathname:h="/",search:_="",hash:E="",state:T=null,key:I="default"}=n,k=Z.useMemo(()=>{let x=Rr(h,f);return x==null?null:{location:{pathname:x,search:_,hash:E,state:T,key:I},navigationType:i}},[f,h,_,E,T,I,i]);return Xn(k!=null,`<Router basename="${f}"> is not able to match the URL "${h}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:Z.createElement(xn.Provider,{value:p},Z.createElement(Hu.Provider,{children:e,value:k}))}function G9({children:t,location:e}){return bb(Um(t),e)}function Um(t,e=[]){let n=[];return Z.Children.forEach(t,(i,o)=>{if(!Z.isValidElement(i))return;let a=[...e,o];if(i.type===Z.Fragment){n.push.apply(n,Um(i.props.children,a));return}ht(i.type===Hb,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Um(i.props.children,a)),n.push(u)}),n}var zf="get",$f="application/x-www-form-urlencoded";function Vd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function zb(t){return Vd(t)&&t.tagName.toLowerCase()==="button"}function $b(t){return Vd(t)&&t.tagName.toLowerCase()==="form"}function Kb(t){return Vd(t)&&t.tagName.toLowerCase()==="input"}function Yb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Jb(t,e){return t.button===0&&(!e||e==="_self")&&!Yb(t)}var Df=null;function Qb(){if(Df===null)try{new FormData(document.createElement("form"),0),Df=!1}catch{Df=!0}return Df}var Wb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gm(t){return t!=null&&!Wb.has(t)?(Xn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$f}"`),null):t}function Xb(t,e){let n,i,o,a,u;if($b(t)){let f=t.getAttribute("action");i=f?Rr(f,e):null,n=t.getAttribute("method")||zf,o=gm(t.getAttribute("enctype"))||$f,a=new FormData(t)}else if(zb(t)||Kb(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||f.getAttribute("action");if(i=p?Rr(p,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||zf,o=gm(t.getAttribute("formenctype"))||gm(f.getAttribute("enctype"))||$f,a=new FormData(f,t),!Qb()){let{name:h,type:_,value:E}=t;if(_==="image"){let T=h?`${h}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else h&&a.append(h,E)}}else{if(Vd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zf,i=null,o=$f,u=t}return a&&o==="text/plain"&&(u=a,a=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zb(t,e,n,i){let o=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${i}`:o.pathname=`${o.pathname}.${i}`:o.pathname==="/"?o.pathname=`_root.${i}`:e&&Rr(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function jb(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eM(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function tM(t,e,n){let i=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await jb(a,n);return u.links?u.links():[]}return[]}));return oM(i.flat(1).filter(eM).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ET(t,e,n,i,o,a){let u=(p,h)=>n[h]?p.route.id!==n[h].route.id:!0,f=(p,h)=>{var _;return n[h].pathname!==p.pathname||((_=n[h].route.path)==null?void 0:_.endsWith("*"))&&n[h].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,h)=>u(p,h)||f(p,h)):a==="data"?e.filter((p,h)=>{var E;let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(u(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function nM(t,e,{includeHydrateFallback:n}={}){return iM(t.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function iM(t){return[...new Set(t)]}function rM(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function oM(t,e){let n=new Set;return new Set(e),t.reduce((i,o)=>{let a=JSON.stringify(rM(o));return n.has(a)||(n.add(a),i.push({key:a,link:o})),i},[])}function oC(){let t=Z.useContext(Wa);return Dg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function sM(){let t=Z.useContext(xd);return Dg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Pg=Z.createContext(void 0);Pg.displayName="FrameworkContext";function sC(){let t=Z.useContext(Pg);return Dg(t,"You must render this element inside a <HydratedRouter> element"),t}function aM(t,e){let n=Z.useContext(Pg),[i,o]=Z.useState(!1),[a,u]=Z.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:_,onTouchStart:E}=e,T=Z.useRef(null);Z.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let x=B=>{B.forEach(J=>{u(J.isIntersecting)})},D=new IntersectionObserver(x,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[t]),Z.useEffect(()=>{if(i){let x=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(x)}}},[i]);let I=()=>{o(!0)},k=()=>{o(!1),u(!1)};return n?t!=="intent"?[a,T,{}]:[a,T,{onFocus:hu(f,I),onBlur:hu(p,k),onMouseEnter:hu(h,I),onMouseLeave:hu(_,k),onTouchStart:hu(E,I)}]:[!1,T,{}]}function hu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function lM({page:t,...e}){let{router:n}=oC(),i=Z.useMemo(()=>$A(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?Z.createElement(cM,{page:t,matches:i,...e}):null}function uM(t){let{manifest:e,routeModules:n}=sC(),[i,o]=Z.useState([]);return Z.useEffect(()=>{let a=!1;return tM(t,e,n).then(u=>{a||o(u)}),()=>{a=!0}},[t,e,n]),i}function cM({page:t,matches:e,...n}){let i=ko(),{future:o,manifest:a,routeModules:u}=sC(),{basename:f}=oC(),{loaderData:p,matches:h}=sM(),_=Z.useMemo(()=>ET(t,e,h,a,i,"data"),[t,e,h,a,i]),E=Z.useMemo(()=>ET(t,e,h,a,i,"assets"),[t,e,h,a,i]),T=Z.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let x=new Set,D=!1;if(e.forEach(J=>{var oe;let G=a.routes[J.route.id];!G||!G.hasLoader||(!_.some(se=>se.route.id===J.route.id)&&J.route.id in p&&((oe=u[J.route.id])!=null&&oe.shouldRevalidate)||G.hasClientLoader?D=!0:x.add(J.route.id))}),x.size===0)return[];let B=Zb(t,f,o.unstable_trailingSlashAwareDataRequests,"data");return D&&x.size>0&&B.searchParams.set("_routes",e.filter(J=>x.has(J.route.id)).map(J=>J.route.id).join(",")),[B.pathname+B.search]},[f,o.unstable_trailingSlashAwareDataRequests,p,i,a,_,e,t,u]),I=Z.useMemo(()=>nM(E,a),[E,a]),k=uM(E);return Z.createElement(Z.Fragment,null,T.map(x=>Z.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),I.map(x=>Z.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),k.map(({key:x,link:D})=>Z.createElement("link",{key:x,nonce:n.nonce,...D,crossOrigin:D.crossOrigin??n.crossOrigin})))}function fM(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var dM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dM&&(window.__reactRouterVersion="7.13.0")}catch{}function z9({basename:t,children:e,unstable_useTransitions:n,window:i}){let o=Z.useRef();o.current==null&&(o.current=$N({window:i,v5Compat:!0}));let a=o.current,[u,f]=Z.useState({action:a.action,location:a.location}),p=Z.useCallback(h=>{n===!1?f(h):Z.startTransition(()=>f(h))},[n]);return Z.useLayoutEffect(()=>a.listen(p),[a,p]),Z.createElement(Gb,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:n})}var aC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lC=Z.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:a,replace:u,state:f,target:p,to:h,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...I},k){let{basename:x,unstable_useTransitions:D}=Z.useContext(xn),B=typeof h=="string"&&aC.test(h),J=QA(h,x);h=J.to;let G=Ib(h,{relative:o}),[oe,se,le]=aM(i,I),M=gM(h,{replace:u,state:f,target:p,preventScrollReset:_,relative:o,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:D});function b(U){e&&e(U),U.defaultPrevented||M(U)}let N=Z.createElement("a",{...I,...le,href:J.absoluteURL||G,onClick:J.isExternal||a?e:b,ref:fM(k,se),target:p,"data-discover":!B&&n==="render"?"true":void 0});return oe&&!B?Z.createElement(Z.Fragment,null,N,Z.createElement(lM,{page:G})):N});lC.displayName="Link";var hM=Z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:f,children:p,...h},_){let E=Gu(u,{relative:h.relative}),T=ko(),I=Z.useContext(xd),{navigator:k,basename:x}=Z.useContext(xn),D=I!=null&&TM(E)&&f===!0,B=k.encodeLocation?k.encodeLocation(E).pathname:E.pathname,J=T.pathname,G=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(J=J.toLowerCase(),G=G?G.toLowerCase():null,B=B.toLowerCase()),G&&x&&(G=Rr(G,x)||G);const oe=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let se=J===B||!o&&J.startsWith(B)&&J.charAt(oe)==="/",le=G!=null&&(G===B||!o&&G.startsWith(B)&&G.charAt(B.length)==="/"),M={isActive:se,isPending:le,isTransitioning:D},b=se?e:void 0,N;typeof i=="function"?N=i(M):N=[i,se?"active":null,le?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let U=typeof a=="function"?a(M):a;return Z.createElement(lC,{...h,"aria-current":b,className:N,ref:_,style:U,to:u,viewTransition:f},typeof p=="function"?p(M):p)});hM.displayName="NavLink";var pM=Z.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:a,method:u=zf,action:f,onSubmit:p,relative:h,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...I},k)=>{let{unstable_useTransitions:x}=Z.useContext(xn),D=vM(),B=EM(f,{relative:h}),J=u.toLowerCase()==="get"?"get":"post",G=typeof f=="string"&&aC.test(f),oe=se=>{if(p&&p(se),se.defaultPrevented)return;se.preventDefault();let le=se.nativeEvent.submitter,M=(le==null?void 0:le.getAttribute("formmethod"))||u,b=()=>D(le||se.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:o,state:a,relative:h,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T});x&&n!==!1?Z.startTransition(()=>b()):b()};return Z.createElement("form",{ref:k,method:J,action:B,onSubmit:i?p:oe,...I,"data-discover":!G&&t==="render"?"true":void 0})});pM.displayName="Form";function mM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uC(t){let e=Z.useContext(Wa);return ht(e,mM(t)),e}function gM(t,{target:e,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let h=tC(),_=ko(),E=Gu(t,{relative:a});return Z.useCallback(T=>{if(Jb(T,e)){T.preventDefault();let I=n!==void 0?n:Mu(_)===Mu(E),k=()=>h(t,{replace:I,state:i,preventScrollReset:o,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:f});p?Z.startTransition(()=>k()):k()}},[_,h,E,n,i,e,t,o,a,u,f,p])}var yM=0,_M=()=>`__${String(++yM)}__`;function vM(){let{router:t}=uC("useSubmit"),{basename:e}=Z.useContext(xn),n=Ob(),i=t.fetch,o=t.navigate;return Z.useCallback(async(a,u={})=>{let{action:f,method:p,encType:h,formData:_,body:E}=Xb(a,e);if(u.navigate===!1){let T=u.fetcherKey||_M();await i(T,n,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:_,body:E,formMethod:u.method||p,formEncType:u.encType||h,flushSync:u.flushSync})}else await o(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:_,body:E,formMethod:u.method||p,formEncType:u.encType||h,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,o,e,n])}function EM(t,{relative:e}={}){let{basename:n}=Z.useContext(xn),i=Z.useContext(Si);ht(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Gu(t||".",{relative:e})},u=ko();if(t==null){a.search=u.search;let f=new URLSearchParams(a.search),p=f.getAll("index");if(p.some(_=>_==="")){f.delete("index"),p.filter(E=>E).forEach(E=>f.append("index",E));let _=f.toString();a.search=_?`?${_}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ar([n,a.pathname])),Mu(a)}function TM(t,{relative:e}={}){let n=Z.useContext(XA);ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=uC("useViewTransitionState"),o=Gu(t,{relative:e});if(!n.isTransitioning)return!1;let a=Rr(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Rr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return rd(o.pathname,u)!=null||rd(o.pathname,a)!=null}const SM=()=>{};var TT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},AM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],u=t[n++],f=t[n++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},fC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const a=t[o],u=o+1<t.length,f=u?t[o+1]:0,p=o+2<t.length,h=p?t[o+2]:0,_=a>>2,E=(a&3)<<4|f>>4;let T=(f&15)<<2|h>>6,I=h&63;p||(I=64,u||(T=64)),i.push(n[_],n[E],n[T],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const h=o<t.length?n[t.charAt(o)]:64;++o;const E=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||f==null||h==null||E==null)throw new CM;const T=a<<2|f>>4;if(i.push(T),h!==64){const I=f<<4&240|h>>2;if(i.push(I),E!==64){const k=h<<6&192|E;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IM=function(t){const e=cC(t);return fC.encodeByteArray(e,!0)},od=function(t){return IM(t).replace(/\./g,"")},dC=function(t){try{return fC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=()=>RM().__FIREBASE_DEFAULTS__,NM=()=>{if(typeof process>"u"||typeof TT>"u")return;const t=TT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dC(t[1]);return e&&JSON.parse(e)},Ud=()=>{try{return SM()||wM()||NM()||bM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hC=t=>{var e,n;return(n=(e=Ud())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},pC=t=>{const e=hC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},mC=()=>{var t;return(t=Ud())==null?void 0:t.config},gC=t=>{var e;return(e=Ud())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[od(JSON.stringify(n)),od(JSON.stringify(u)),""].join(".")}const Cu={};function DM(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?t.emulator.push(e):t.prod.push(e);return t}function PM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ST=!1;function xg(t,e){if(typeof window>"u"||typeof document>"u"||!ws(window.location.host)||Cu[t]===e||Cu[t]||ST)return;Cu[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=DM().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ST=!0,u()},T}function _(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=PM(i),I=n("text"),k=document.getElementById(I)||document.createElement("span"),x=n("learnmore"),D=document.getElementById(x)||document.createElement("a"),B=n("preprendIcon"),J=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;f(G),_(D,x);const oe=h();p(J,B),G.append(J,k,D,oe),document.body.appendChild(G)}a?(k.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function xM(){var e;const t=(e=Ud())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _C(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LM(){const t=an();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OM(){return!xM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vC(){try{return typeof indexedDB=="object"}catch{return!1}}function EC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}function FM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="FirebaseError";class ei extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=qM,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ns.prototype.create)}}class Ns{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?BM(a,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new ei(o,f,i)}}function BM(t,e){return t.replace(HM,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const HM=/\{\$([^}]+)}/g;function GM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const a=t[o],u=e[o];if(AT(a)&&AT(u)){if(!Io(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function AT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function _u(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zM(t,e){const n=new $M(t,e);return n.subscribe.bind(n)}class $M{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");KM(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=ym),o.error===void 0&&(o.error=ym),o.complete===void 0&&(o.complete=ym);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=1e3,JM=2,QM=14400*1e3,WM=.5;function CT(t,e=YM,n=JM){const i=e*Math.pow(n,t),o=Math.round(WM*i*(Math.random()-.5)*2);return Math.min(QM,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class Zn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new MM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jM(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ZM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZM(t){return t===ms?void 0:t}function jM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const tD={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},nD=Le.INFO,iD={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},rD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=iD[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ld{constructor(e){this.name=e,this._logLevel=nD,this._logHandler=rD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const oD=(t,e)=>e.some(n=>t instanceof n);let IT,RT;function sD(){return IT||(IT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aD(){return RT||(RT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TC=new WeakMap,Lm=new WeakMap,SC=new WeakMap,_m=new WeakMap,Vg=new WeakMap;function lD(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(To(t.result)),o()},u=()=>{i(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&TC.set(n,t)}).catch(()=>{}),Vg.set(e,t),e}function uD(t){if(Lm.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Lm.set(t,e)}let Om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return To(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cD(t){Om=t(Om)}function fD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(vm(this),e,...n);return SC.set(i,e.sort?e.sort():[e]),To(i)}:aD().includes(t)?function(...e){return t.apply(vm(this),e),To(TC.get(this))}:function(...e){return To(t.apply(vm(this),e))}}function dD(t){return typeof t=="function"?fD(t):(t instanceof IDBTransaction&&uD(t),oD(t,sD())?new Proxy(t,Om):t)}function To(t){if(t instanceof IDBRequest)return lD(t);if(_m.has(t))return _m.get(t);const e=dD(t);return e!==t&&(_m.set(t,e),Vg.set(e,t)),e}const vm=t=>Vg.get(t);function AC(t,e,{blocked:n,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(t,e),f=To(u);return i&&u.addEventListener("upgradeneeded",p=>{i(To(u.result),p.oldVersion,p.newVersion,To(u.transaction),p)}),n&&u.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),f.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const hD=["get","getKey","getAll","getAllKeys","count"],pD=["put","add","delete","clear"],Em=new Map;function wT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=pD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||hD.includes(n)))return;const a=async function(u,...f){const p=this.transaction(u,o?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[n](...f),o&&p.done]))[0]};return Em.set(e,a),a}cD(t=>({...t,get:(e,n,i)=>wT(e,n)||t.get(e,n,i),has:(e,n)=>!!wT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function gD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",NT="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Ld("@firebase/app"),yD="@firebase/app-compat",_D="@firebase/analytics-compat",vD="@firebase/analytics",ED="@firebase/app-check-compat",TD="@firebase/app-check",SD="@firebase/auth",AD="@firebase/auth-compat",CD="@firebase/database",ID="@firebase/data-connect",RD="@firebase/database-compat",wD="@firebase/functions",ND="@firebase/functions-compat",bD="@firebase/installations",MD="@firebase/installations-compat",DD="@firebase/messaging",PD="@firebase/messaging-compat",kD="@firebase/performance",xD="@firebase/performance-compat",VD="@firebase/remote-config",UD="@firebase/remote-config-compat",LD="@firebase/storage",OD="@firebase/storage-compat",FD="@firebase/firestore",qD="@firebase/ai",BD="@firebase/firestore-compat",HD="firebase",GD="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",zD={[Fm]:"fire-core",[yD]:"fire-core-compat",[vD]:"fire-analytics",[_D]:"fire-analytics-compat",[TD]:"fire-app-check",[ED]:"fire-app-check-compat",[SD]:"fire-auth",[AD]:"fire-auth-compat",[CD]:"fire-rtdb",[ID]:"fire-data-connect",[RD]:"fire-rtdb-compat",[wD]:"fire-fn",[ND]:"fire-fn-compat",[bD]:"fire-iid",[MD]:"fire-iid-compat",[DD]:"fire-fcm",[PD]:"fire-fcm-compat",[kD]:"fire-perf",[xD]:"fire-perf-compat",[VD]:"fire-rc",[UD]:"fire-rc-compat",[LD]:"fire-gcs",[OD]:"fire-gcs-compat",[FD]:"fire-fst",[BD]:"fire-fst-compat",[qD]:"fire-vertex","fire-js":"fire-js",[HD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Map,$D=new Map,Bm=new Map;function bT(t,e){try{t.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vi(t){const e=t.name;if(Bm.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,t);for(const n of sd.values())bT(n,t);for(const n of $D.values())bT(n,t);return!0}function xo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},So=new Ns("app","Firebase",KD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw So.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=GD;function JD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:qm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw So.create("bad-app-name",{appName:String(o)});if(n||(n=mC()),!n)throw So.create("no-options");const a=sd.get(o);if(a){if(Io(n,a.options)&&Io(i,a.config))return a;throw So.create("duplicate-app",{appName:o})}const u=new eD(o);for(const p of Bm.values())u.addComponent(p);const f=new YD(n,i,u);return sd.set(o,f),f}function Od(t=qm){const e=sd.get(t);if(!e&&t===qm&&mC())return JD();if(!e)throw So.create("no-app",{appName:t});return e}function Sn(t,e,n){let i=zD[t]??t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(u.join(" "));return}vi(new Zn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="firebase-heartbeat-database",WD=1,Du="firebase-heartbeat-store";let Tm=null;function CC(){return Tm||(Tm=AC(QD,WD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Du)}catch(n){console.warn(n)}}}}).catch(t=>{throw So.create("idb-open",{originalErrorMessage:t.message})})),Tm}async function XD(t){try{const n=(await CC()).transaction(Du),i=await n.objectStore(Du).get(IC(t));return await n.done,i}catch(e){if(e instanceof ei)wr.warn(e.message);else{const n=So.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function MT(t,e){try{const i=(await CC()).transaction(Du,"readwrite");await i.objectStore(Du).put(e,IC(t)),await i.done}catch(n){if(n instanceof ei)wr.warn(n.message);else{const i=So.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(i.message)}}}function IC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1024,jD=30;class eP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nP(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=DT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>jD){const u=iP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=DT(),{heartbeatsToSend:i,unsentEntries:o}=tP(this._heartbeatsCache.heartbeats),a=od(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return wr.warn(n),""}}}function DT(){return new Date().toISOString().substring(0,10)}function tP(t,e=ZD){const n=[];let i=t.slice();for(const o of t){const a=n.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),PT(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),PT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class nP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vC()?EC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return MT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return MT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function PT(t){return od(JSON.stringify({version:2,heartbeats:t})).length}function iP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){vi(new Zn("platform-logger",e=>new mD(e),"PRIVATE")),vi(new Zn("heartbeat",e=>new eP(e),"PRIVATE")),Sn(Fm,NT,t),Sn(Fm,NT,"esm2020"),Sn("fire-js","")}rP("");var kT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,RC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,b){function N(){}N.prototype=b.prototype,M.F=b.prototype,M.prototype=new N,M.prototype.constructor=M,M.D=function(U,L,q){for(var P=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)P[qe-2]=arguments[qe];return b.prototype[L].apply(U,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,b,N){N||(N=0);const U=Array(16);if(typeof b=="string")for(var L=0;L<16;++L)U[L]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(L=0;L<16;++L)U[L]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=M.g[0],N=M.g[1],L=M.g[2];let q=M.g[3],P;P=b+(q^N&(L^q))+U[0]+3614090360&4294967295,b=N+(P<<7&4294967295|P>>>25),P=q+(L^b&(N^L))+U[1]+3905402710&4294967295,q=b+(P<<12&4294967295|P>>>20),P=L+(N^q&(b^N))+U[2]+606105819&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(b^L&(q^b))+U[3]+3250441966&4294967295,N=L+(P<<22&4294967295|P>>>10),P=b+(q^N&(L^q))+U[4]+4118548399&4294967295,b=N+(P<<7&4294967295|P>>>25),P=q+(L^b&(N^L))+U[5]+1200080426&4294967295,q=b+(P<<12&4294967295|P>>>20),P=L+(N^q&(b^N))+U[6]+2821735955&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(b^L&(q^b))+U[7]+4249261313&4294967295,N=L+(P<<22&4294967295|P>>>10),P=b+(q^N&(L^q))+U[8]+1770035416&4294967295,b=N+(P<<7&4294967295|P>>>25),P=q+(L^b&(N^L))+U[9]+2336552879&4294967295,q=b+(P<<12&4294967295|P>>>20),P=L+(N^q&(b^N))+U[10]+4294925233&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(b^L&(q^b))+U[11]+2304563134&4294967295,N=L+(P<<22&4294967295|P>>>10),P=b+(q^N&(L^q))+U[12]+1804603682&4294967295,b=N+(P<<7&4294967295|P>>>25),P=q+(L^b&(N^L))+U[13]+4254626195&4294967295,q=b+(P<<12&4294967295|P>>>20),P=L+(N^q&(b^N))+U[14]+2792965006&4294967295,L=q+(P<<17&4294967295|P>>>15),P=N+(b^L&(q^b))+U[15]+1236535329&4294967295,N=L+(P<<22&4294967295|P>>>10),P=b+(L^q&(N^L))+U[1]+4129170786&4294967295,b=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(b^N))+U[6]+3225465664&4294967295,q=b+(P<<9&4294967295|P>>>23),P=L+(b^N&(q^b))+U[11]+643717713&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^b&(L^q))+U[0]+3921069994&4294967295,N=L+(P<<20&4294967295|P>>>12),P=b+(L^q&(N^L))+U[5]+3593408605&4294967295,b=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(b^N))+U[10]+38016083&4294967295,q=b+(P<<9&4294967295|P>>>23),P=L+(b^N&(q^b))+U[15]+3634488961&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^b&(L^q))+U[4]+3889429448&4294967295,N=L+(P<<20&4294967295|P>>>12),P=b+(L^q&(N^L))+U[9]+568446438&4294967295,b=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(b^N))+U[14]+3275163606&4294967295,q=b+(P<<9&4294967295|P>>>23),P=L+(b^N&(q^b))+U[3]+4107603335&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^b&(L^q))+U[8]+1163531501&4294967295,N=L+(P<<20&4294967295|P>>>12),P=b+(L^q&(N^L))+U[13]+2850285829&4294967295,b=N+(P<<5&4294967295|P>>>27),P=q+(N^L&(b^N))+U[2]+4243563512&4294967295,q=b+(P<<9&4294967295|P>>>23),P=L+(b^N&(q^b))+U[7]+1735328473&4294967295,L=q+(P<<14&4294967295|P>>>18),P=N+(q^b&(L^q))+U[12]+2368359562&4294967295,N=L+(P<<20&4294967295|P>>>12),P=b+(N^L^q)+U[5]+4294588738&4294967295,b=N+(P<<4&4294967295|P>>>28),P=q+(b^N^L)+U[8]+2272392833&4294967295,q=b+(P<<11&4294967295|P>>>21),P=L+(q^b^N)+U[11]+1839030562&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^b)+U[14]+4259657740&4294967295,N=L+(P<<23&4294967295|P>>>9),P=b+(N^L^q)+U[1]+2763975236&4294967295,b=N+(P<<4&4294967295|P>>>28),P=q+(b^N^L)+U[4]+1272893353&4294967295,q=b+(P<<11&4294967295|P>>>21),P=L+(q^b^N)+U[7]+4139469664&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^b)+U[10]+3200236656&4294967295,N=L+(P<<23&4294967295|P>>>9),P=b+(N^L^q)+U[13]+681279174&4294967295,b=N+(P<<4&4294967295|P>>>28),P=q+(b^N^L)+U[0]+3936430074&4294967295,q=b+(P<<11&4294967295|P>>>21),P=L+(q^b^N)+U[3]+3572445317&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^b)+U[6]+76029189&4294967295,N=L+(P<<23&4294967295|P>>>9),P=b+(N^L^q)+U[9]+3654602809&4294967295,b=N+(P<<4&4294967295|P>>>28),P=q+(b^N^L)+U[12]+3873151461&4294967295,q=b+(P<<11&4294967295|P>>>21),P=L+(q^b^N)+U[15]+530742520&4294967295,L=q+(P<<16&4294967295|P>>>16),P=N+(L^q^b)+U[2]+3299628645&4294967295,N=L+(P<<23&4294967295|P>>>9),P=b+(L^(N|~q))+U[0]+4096336452&4294967295,b=N+(P<<6&4294967295|P>>>26),P=q+(N^(b|~L))+U[7]+1126891415&4294967295,q=b+(P<<10&4294967295|P>>>22),P=L+(b^(q|~N))+U[14]+2878612391&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~b))+U[5]+4237533241&4294967295,N=L+(P<<21&4294967295|P>>>11),P=b+(L^(N|~q))+U[12]+1700485571&4294967295,b=N+(P<<6&4294967295|P>>>26),P=q+(N^(b|~L))+U[3]+2399980690&4294967295,q=b+(P<<10&4294967295|P>>>22),P=L+(b^(q|~N))+U[10]+4293915773&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~b))+U[1]+2240044497&4294967295,N=L+(P<<21&4294967295|P>>>11),P=b+(L^(N|~q))+U[8]+1873313359&4294967295,b=N+(P<<6&4294967295|P>>>26),P=q+(N^(b|~L))+U[15]+4264355552&4294967295,q=b+(P<<10&4294967295|P>>>22),P=L+(b^(q|~N))+U[6]+2734768916&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~b))+U[13]+1309151649&4294967295,N=L+(P<<21&4294967295|P>>>11),P=b+(L^(N|~q))+U[4]+4149444226&4294967295,b=N+(P<<6&4294967295|P>>>26),P=q+(N^(b|~L))+U[11]+3174756917&4294967295,q=b+(P<<10&4294967295|P>>>22),P=L+(b^(q|~N))+U[2]+718787259&4294967295,L=q+(P<<15&4294967295|P>>>17),P=N+(q^(L|~b))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+q&4294967295}i.prototype.v=function(M,b){b===void 0&&(b=M.length);const N=b-this.blockSize,U=this.C;let L=this.h,q=0;for(;q<b;){if(L==0)for(;q<=N;)o(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<b;)if(U[L++]=M.charCodeAt(q++),L==this.blockSize){o(this,U),L=0;break}}else for(;q<b;)if(U[L++]=M[q++],L==this.blockSize){o(this,U),L=0;break}}this.h=L,this.o+=b},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;b=this.o*8;for(var N=M.length-8;N<M.length;++N)M[N]=b&255,b/=256;for(this.v(M),M=Array(16),b=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)M[b++]=this.g[N]>>>U&255;return M};function a(M,b){var N=f;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=b(M)}function u(M,b){this.h=b;const N=[];let U=!0;for(let L=M.length-1;L>=0;L--){const q=M[L]|0;U&&q==b||(N[L]=q,U=!1)}this.g=N}var f={};function p(M){return-128<=M&&M<128?a(M,function(b){return new u([b|0],b<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return D(h(-M));const b=[];let N=1;for(let U=0;M>=N;U++)b[U]=M/N|0,N*=4294967296;return new u(b,0)}function _(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return D(_(M.substring(1),b));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(b,8));let U=E;for(let q=0;q<M.length;q+=8){var L=Math.min(8,M.length-q);const P=parseInt(M.substring(q,q+L),b);L<8?(L=h(Math.pow(b,L)),U=U.j(L).add(h(P))):(U=U.j(N),U=U.add(h(P)))}return U}var E=p(0),T=p(1),I=p(16777216);t=u.prototype,t.m=function(){if(x(this))return-D(this).m();let M=0,b=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);M+=(U>=0?U:4294967296+U)*b,b*=4294967296}return M},t.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(x(this))return"-"+D(this).toString(M);const b=h(Math.pow(M,6));var N=this;let U="";for(;;){const L=oe(N,b).g;N=B(N,L.j(b));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(M);if(N=L,k(N))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},t.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function x(M){return M.h==-1}t.l=function(M){return M=B(this,M),x(M)?-1:k(M)?0:1};function D(M){const b=M.g.length,N=[];for(let U=0;U<b;U++)N[U]=~M.g[U];return new u(N,~M.h).add(T)}t.abs=function(){return x(this)?D(this):this},t.add=function(M){const b=Math.max(this.g.length,M.g.length),N=[];let U=0;for(let L=0;L<=b;L++){let q=U+(this.i(L)&65535)+(M.i(L)&65535),P=(q>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);U=P>>>16,q&=65535,P&=65535,N[L]=P<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function B(M,b){return M.add(D(b))}t.j=function(M){if(k(this)||k(M))return E;if(x(this))return x(M)?D(this).j(D(M)):D(D(this).j(M));if(x(M))return D(this.j(D(M)));if(this.l(I)<0&&M.l(I)<0)return h(this.m()*M.m());const b=this.g.length+M.g.length,N=[];for(var U=0;U<2*b;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let L=0;L<M.g.length;L++){const q=this.i(U)>>>16,P=this.i(U)&65535,qe=M.i(L)>>>16,mt=M.i(L)&65535;N[2*U+2*L]+=P*mt,J(N,2*U+2*L),N[2*U+2*L+1]+=q*mt,J(N,2*U+2*L+1),N[2*U+2*L+1]+=P*qe,J(N,2*U+2*L+1),N[2*U+2*L+2]+=q*qe,J(N,2*U+2*L+2)}for(M=0;M<b;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=b;M<2*b;M++)N[M]=0;return new u(N,0)};function J(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function G(M,b){this.g=M,this.h=b}function oe(M,b){if(k(b))throw Error("division by zero");if(k(M))return new G(E,E);if(x(M))return b=oe(D(M),b),new G(D(b.g),D(b.h));if(x(b))return b=oe(M,D(b)),new G(D(b.g),b.h);if(M.g.length>30){if(x(M)||x(b))throw Error("slowDivide_ only works with positive integers.");for(var N=T,U=b;U.l(M)<=0;)N=se(N),U=se(U);var L=le(N,1),q=le(U,1);for(U=le(U,2),N=le(N,2);!k(U);){var P=q.add(U);P.l(M)<=0&&(L=L.add(N),q=P),U=le(U,1),N=le(N,1)}return b=B(M,L.j(b)),new G(L,b)}for(L=E;M.l(b)>=0;){for(N=Math.max(1,Math.floor(M.m()/b.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=h(N),P=q.j(b);x(P)||P.l(M)>0;)N-=U,q=h(N),P=q.j(b);k(q)&&(q=T),L=L.add(q),M=B(M,P)}return new G(L,M)}t.B=function(M){return oe(this,M).h},t.and=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let U=0;U<b;U++)N[U]=this.i(U)&M.i(U);return new u(N,this.h&M.h)},t.or=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let U=0;U<b;U++)N[U]=this.i(U)|M.i(U);return new u(N,this.h|M.h)},t.xor=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let U=0;U<b;U++)N[U]=this.i(U)^M.i(U);return new u(N,this.h^M.h)};function se(M){const b=M.g.length+1,N=[];for(let U=0;U<b;U++)N[U]=M.i(U)<<1|M.i(U-1)>>>31;return new u(N,M.h)}function le(M,b){const N=b>>5;b%=32;const U=M.g.length-N,L=[];for(let q=0;q<U;q++)L[q]=b>0?M.i(q+N)>>>b|M.i(q+N+1)<<32-b:M.i(q+N);return new u(L,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,RC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Ao=u}).apply(typeof kT<"u"?kT:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wC,vu,NC,Kf,Hm,bC,MC,DC;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var S=0;S<g.length;++S){var C=g[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function o(g,S){if(S)e:{var C=i;g=g.split(".");for(var w=0;w<g.length-1;w++){var z=g[w];if(!(z in C))break e;C=C[z]}g=g[g.length-1],w=C[g],S=S(w),S!=w&&S!=null&&e(C,g,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(S){var C=[],w;for(w in S)Object.prototype.hasOwnProperty.call(S,w)&&C.push([w,S[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function p(g,S,C){return g.call.apply(g.bind,arguments)}function h(g,S,C){return h=p,h.apply(null,arguments)}function _(g,S){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),g.apply(this,w)}}function E(g,S){function C(){}C.prototype=S.prototype,g.Z=S.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(w,z,Q){for(var ue=Array(arguments.length-2),be=2;be<arguments.length;be++)ue[be-2]=arguments[be];return S.prototype[z].apply(w,ue)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const S=g.length;if(S>0){const C=Array(S);for(let w=0;w<S;w++)C[w]=g[w];return C}return[]}function k(g,S){for(let w=1;w<arguments.length;w++){const z=arguments[w];var C=typeof z;if(C=C!="object"?C:z?Array.isArray(z)?"array":C:"null",C=="array"||C=="object"&&typeof z.length=="number"){C=g.length||0;const Q=z.length||0;g.length=C+Q;for(let ue=0;ue<Q;ue++)g[C+ue]=z[ue]}else g.push(z)}}class x{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function D(g){u.setTimeout(()=>{throw g},0)}function B(){var g=M;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class J{constructor(){this.h=this.g=null}add(S,C){const w=G.get();w.set(S,C),this.h?this.h.next=w:this.g=w,this.h=w}}var G=new x(()=>new oe,g=>g.reset());class oe{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let se,le=!1,M=new J,b=()=>{const g=Promise.resolve(void 0);se=()=>{g.then(N)}};function N(){for(var g;g=B();){try{g.h.call(g.g)}catch(C){D(C)}var S=G;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}le=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,S),u.removeEventListener("test",C,S)}catch{}return g})();function P(g){return/^[\s\xa0]*$/.test(g)}function qe(g,S){L.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}E(qe,L),qe.prototype.init=function(g,S){const C=this.type=g.type,w=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(C=="mouseover"?S=g.fromElement:C=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),X=0;function ae(g,S,C,w,z){this.listener=g,this.proxy=null,this.src=S,this.type=C,this.capture=!!w,this.ha=z,this.key=++X,this.da=this.fa=!1}function ye(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ze(g,S,C){for(const w in g)S.call(C,g[w],w,g)}function Xe(g,S){for(const C in g)S.call(void 0,g[C],C,g)}function F(g){const S={};for(const C in g)S[C]=g[C];return S}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(g,S){let C,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(C in w)g[C]=w[C];for(let Q=0;Q<ie.length;Q++)C=ie[Q],Object.prototype.hasOwnProperty.call(w,C)&&(g[C]=w[C])}}function pe(g){this.src=g,this.g={},this.h=0}pe.prototype.add=function(g,S,C,w,z){const Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);const ue=De(g,S,w,z);return ue>-1?(S=g[ue],C||(S.fa=!1)):(S=new ae(S,this.src,Q,!!w,z),S.fa=C,g.push(S)),S};function Ae(g,S){const C=S.type;if(C in g.g){var w=g.g[C],z=Array.prototype.indexOf.call(w,S,void 0),Q;(Q=z>=0)&&Array.prototype.splice.call(w,z,1),Q&&(ye(S),g.g[C].length==0&&(delete g.g[C],g.h--))}}function De(g,S,C,w){for(let z=0;z<g.length;++z){const Q=g[z];if(!Q.da&&Q.listener==S&&Q.capture==!!C&&Q.ha==w)return z}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Ut={};function ct(g,S,C,w,z){if(Array.isArray(S)){for(let Q=0;Q<S.length;Q++)ct(g,S[Q],C,w,z);return null}return C=ul(C),g&&g[mt]?g.J(S,C,f(w)?!!w.capture:!1,z):Oo(g,S,C,!1,w,z)}function Oo(g,S,C,w,z,Q){if(!S)throw Error("Invalid event type");const ue=f(z)?!!z.capture:!!z;let be=Fo(g);if(be||(g[He]=be=new pe(g)),C=be.add(S,C,w,ue,Q),C.proxy)return C;if(w=Ls(),C.proxy=w,w.src=g,w.listener=C,g.addEventListener)q||(z=ue),z===void 0&&(z=!1),g.addEventListener(S.toString(),w,z);else if(g.attachEvent)g.attachEvent(Ci(S.toString()),w);else if(g.addListener&&g.removeListener)g.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ls(){function g(C){return S.call(g.src,g.listener,C)}const S=al;return g}function Os(g,S,C,w,z){if(Array.isArray(S))for(var Q=0;Q<S.length;Q++)Os(g,S[Q],C,w,z);else w=f(w)?!!w.capture:!!w,C=ul(C),g&&g[mt]?(g=g.i,Q=String(S).toString(),Q in g.g&&(S=g.g[Q],C=De(S,C,w,z),C>-1&&(ye(S[C]),Array.prototype.splice.call(S,C,1),S.length==0&&(delete g.g[Q],g.h--)))):g&&(g=Fo(g))&&(S=g.g[S.toString()],g=-1,S&&(g=De(S,C,w,z)),(C=g>-1?S[g]:null)&&Fs(C))}function Fs(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[mt])Ae(S.i,g);else{var C=g.type,w=g.proxy;S.removeEventListener?S.removeEventListener(C,w,g.capture):S.detachEvent?S.detachEvent(Ci(C),w):S.addListener&&S.removeListener&&S.removeListener(w),(C=Fo(S))?(Ae(C,g),C.h==0&&(C.src=null,S[He]=null)):ye(g)}}}function Ci(g){return g in Ut?Ut[g]:Ut[g]="on"+g}function al(g,S){if(g.da)g=!0;else{S=new qe(S,this);const C=g.listener,w=g.ha||g.src;g.fa&&Fs(g),g=C.call(w,S)}return g}function Fo(g){return g=g[He],g instanceof pe?g:null}var ll="__closure_events_fn_"+(Math.random()*1e9>>>0);function ul(g){return typeof g=="function"?g:(g[ll]||(g[ll]=function(S){return g.handleEvent(S)}),g[ll])}function At(){U.call(this),this.i=new pe(this),this.M=this,this.G=null}E(At,U),At.prototype[mt]=!0,At.prototype.removeEventListener=function(g,S,C,w){Os(this,g,S,C,w)};function Lt(g,S){var C,w=g.G;if(w)for(C=[];w;w=w.G)C.push(w);if(g=g.M,w=S.type||S,typeof S=="string")S=new L(S,g);else if(S instanceof L)S.target=S.target||g;else{var z=S;S=new L(w,g),ce(S,z)}z=!0;let Q,ue;if(C)for(ue=C.length-1;ue>=0;ue--)Q=S.g=C[ue],z=xr(Q,w,!0,S)&&z;if(Q=S.g=g,z=xr(Q,w,!0,S)&&z,z=xr(Q,w,!1,S)&&z,C)for(ue=0;ue<C.length;ue++)Q=S.g=C[ue],z=xr(Q,w,!1,S)&&z}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const C=g.g[S];for(let w=0;w<C.length;w++)ye(C[w]);delete g.g[S],g.h--}}this.G=null},At.prototype.J=function(g,S,C,w){return this.i.add(String(g),S,!1,C,w)},At.prototype.K=function(g,S,C,w){return this.i.add(String(g),S,!0,C,w)};function xr(g,S,C,w){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let z=!0;for(let Q=0;Q<S.length;++Q){const ue=S[Q];if(ue&&!ue.da&&ue.capture==C){const be=ue.listener,vt=ue.ha||ue.src;ue.fa&&Ae(g.i,ue),z=be.call(vt,w)!==!1&&z}}return z&&!w.defaultPrevented}function ch(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function tc(g){g.g=ch(()=>{g.g=null,g.i&&(g.i=!1,tc(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class ln extends U{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:tc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qo(g){U.call(this),this.h=g,this.g={}}E(qo,U);var cl=[];function fl(g){ze(g.g,function(S,C){this.g.hasOwnProperty(C)&&Fs(S)},g),g.g={}}qo.prototype.N=function(){qo.Z.N.call(this),fl(this)},qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=u.JSON.stringify,fh=u.JSON.parse,nc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function ic(){}function rc(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){L.call(this,"d")}E(Kt,L);function Vn(){L.call(this,"c")}E(Vn,L);var _t={},oc=null;function qs(){return oc=oc||new At}_t.Ia="serverreachability";function sc(g){L.call(this,_t.Ia,g)}E(sc,L);function Ii(g){const S=qs();Lt(S,new sc(S))}_t.STAT_EVENT="statevent";function Bo(g,S){L.call(this,_t.STAT_EVENT,g),this.stat=S}E(Bo,L);function Ct(g){const S=qs();Lt(S,new Bo(S,g))}_t.Ja="timingevent";function Ri(g,S){L.call(this,_t.Ja,g),this.size=S}E(Ri,L);function wi(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function dh(g,S,C,w,z,Q){g.info(function(){if(g.g)if(Q){var ue="",be=Q.split("&");for(let Je=0;Je<be.length;Je++){var vt=be[Je].split("=");if(vt.length>1){const ft=vt[0];vt=vt[1];const Fn=ft.split("_");ue=Fn.length>=2&&Fn[1]=="type"?ue+(ft+"="+vt+"&"):ue+(ft+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+S+`
`+C+`
`+ue})}function ac(g,S,C,w,z,Q,ue){g.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+S+`
`+C+`
`+Q+" "+ue})}function Ni(g,S,C,w){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+hh(g,C)+(w?" "+w:"")})}function Ho(g,S){g.info(function(){return"TIMEOUT: "+S})}ni.prototype.info=function(){};function hh(g,S){if(!g.g)return S;if(!S)return null;try{const Q=JSON.parse(S);if(Q){for(g=0;g<Q.length;g++)if(Array.isArray(Q[g])){var C=Q[g];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var z=w[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ue=1;ue<w.length;ue++)w[ue]=""}}}}return Vr(Q)}catch{return S}}var Go={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hl;function zo(){}E(zo,ic),zo.prototype.g=function(){return new XMLHttpRequest},hl=new zo;function nr(g){return encodeURIComponent(String(g))}function lc(g){var S=1;g=g.split(":");const C=[];for(;S>0&&g.length;)C.push(g.shift()),S--;return g.length&&C.push(g.join(":")),C}function ii(g,S,C,w){this.j=g,this.i=S,this.l=C,this.S=w||1,this.V=new qo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var It={},Bt={};function bi(g,S,C){g.M=1,g.A=$o(wt(S)),g.u=C,g.R=!0,Bs(g,null)}function Bs(g,S){g.F=Date.now(),Mi(g),g.B=wt(g.A);var C=g.B,w=g.S;Array.isArray(w)||(w=[String(w)]),$s(C.i,"t",w),g.C=0,C=g.j.L,g.h=new ri,g.g=Ac(g.j,C?S:null,!g.u),g.P>0&&(g.O=new ln(h(g.Y,g,g.g),g.P)),S=g.V,C=g.g,w=g.ba;var z="readystatechange";Array.isArray(z)||(z&&(cl[0]=z.toString()),z=cl);for(let Q=0;Q<z.length;Q++){const ue=ct(C,z[Q],w||S.handleEvent,!1,S.h||S);if(!ue)break;S.g[ue.key]=ue}S=g.J?F(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),Ii(),dh(g.i,g.v,g.B,g.l,g.S,g.u)}ii.prototype.ba=function(g){g=g.target;const S=this.O;S&&ai(g)==3?S.j():this.Y(g)},ii.prototype.Y=function(g){try{if(g==this.g)e:{const be=ai(this.g),vt=this.g.ya(),Je=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||be!=4||vt==7||(vt==8||Je<=0?Ii(3):Ii(2)),Di(this);var S=this.g.ca();this.X=S;var C=ph(this);if(this.o=S==200,ac(this.i,this.v,this.B,this.l,this.S,be,S),this.o){if(this.U&&!this.L){t:{if(this.g){var w,z=this.g;if((w=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(w)){var Q=w;break t}}Q=null}if(g=Q)Ni(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pi(this,g);else{this.o=!1,this.m=3,Ct(12),An(this),Un(this);break e}}if(this.R){g=!0;let ft;for(;!this.K&&this.C<C.length;)if(ft=cc(this,C),ft==Bt){be==4&&(this.m=4,Ct(14),g=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==It){this.m=4,Ct(15),Ni(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ni(this.i,this.l,ft,null),Pi(this,ft);if(uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),g=!1),this.o=this.o&&g,!g)Ni(this.i,this.l,C,"[Invalid Chunked Response]"),An(this),Un(this);else if(C.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Nl(ue),ue.P=!0,Ct(11))}}else Ni(this.i,this.l,C,null),Pi(this,C);be==4&&An(this),this.o&&!this.K&&(be==4?vc(this.j,this):(this.o=!1,Mi(this)))}else rr(this.g),S==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),An(this),Un(this)}}}catch{}finally{}};function ph(g){if(!uc(g))return g.g.la();const S=Yt(g.g);if(S==="")return"";let C="";const w=S.length,z=ai(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return An(g),Un(g),"";g.h.i=new u.TextDecoder}for(let Q=0;Q<w;Q++)g.h.h=!0,C+=g.h.i.decode(S[Q],{stream:!(z&&Q==w-1)});return S.length=0,g.h.g+=C,g.C=0,g.h.g}function uc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function cc(g,S){var C=g.C,w=S.indexOf(`
`,C);return w==-1?Bt:(C=Number(S.substring(C,w)),isNaN(C)?It:(w+=1,w+C>S.length?Bt:(S=S.slice(w,w+C),g.C=w+C,S)))}ii.prototype.cancel=function(){this.K=!0,An(this)};function Mi(g){g.T=Date.now()+g.H,Hs(g,g.H)}function Hs(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=wi(h(g.aa,g),S)}function Di(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ii.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Ho(this.i,this.B),this.M!=2&&(Ii(),Ct(17)),An(this),this.m=2,Un(this)):Hs(this,this.T-g)};function Un(g){g.j.I==0||g.K||vc(g.j,g)}function An(g){Di(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,fl(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function Pi(g,S){try{var C=g.j;if(C.I!=0&&(C.g==g||xi(C.h,g))){if(!g.L&&xi(C.h,g)&&C.I==3){try{var w=C.Ba.g.parse(S)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Ws(C),Gr(C);else break e;Zo(C),Ct(18)}}else C.xa=z[1],0<C.xa-C.K&&z[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=wi(h(C.Va,C),6e3));ki(C.h)<=1&&C.ta&&(C.ta=void 0)}else qi(C,11)}else if((g.L||C.g==g)&&Ws(C),!P(S))for(z=C.Ba.g.parse(S),S=0;S<z.length;S++){let Je=z[S];const ft=Je[0];if(!(ft<=C.K))if(C.K=ft,Je=Je[1],C.I==2)if(Je[0]=="c"){C.M=Je[1],C.ba=Je[2];const Fn=Je[3];Fn!=null&&(C.ka=Fn,C.j.info("VER="+C.ka));const Bi=Je[4];Bi!=null&&(C.za=Bi,C.j.info("SVER="+C.za));const li=Je[5];li!=null&&typeof li=="number"&&li>0&&(w=1.5*li,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const ui=g.g;if(ui){const jo=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var Q=w.h;Q.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(gl(Q,Q.h),Q.h=null))}if(w.G){const Xs=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;Xs&&(w.wa=Xs,Ze(w.J,w.G,Xs))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var ue=g;if(w.na=Sc(w,w.L?w.ba:null,w.W),ue.L){yl(w.h,ue);var be=ue,vt=w.O;vt&&(be.H=vt),be.D&&(Di(be),Mi(be)),w.g=ue}else yc(w);C.i.length>0&&Fi(C)}else Je[0]!="stop"&&Je[0]!="close"||qi(C,7);else C.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?qi(C,7):Rl(C):Je[0]!="noop"&&C.l&&C.l.qa(Je),C.A=0)}}Ii(4)}catch{}}var Rt=class{constructor(g,S){this.g=g,this.map=S}};function pl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ml(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function ki(g){return g.h?1:g.g?g.g.size:0}function xi(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function gl(g,S){g.g?g.g.add(S):g.h=S}function yl(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}pl.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function _l(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const C of g.g.values())S=S.concat(C.G);return S}return I(g.i)}var fc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gs(g,S){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const w=g[C].indexOf("=");let z,Q=null;w>=0?(z=g[C].substring(0,w),Q=g[C].substring(w+1)):z=g[C],S(z,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Cn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Cn?(this.l=g.l,Ht(this,g.j),this.o=g.o,this.g=g.g,Ur(this,g.u),this.h=g.h,vl(this,mc(g.i)),this.m=g.m):g&&(S=String(g).match(fc))?(this.l=!1,Ht(this,S[1]||"",!0),this.o=Vi(S[2]||""),this.g=Vi(S[3]||"",!0),Ur(this,S[4]),this.h=Vi(S[5]||"",!0),vl(this,S[6]||"",!0),this.m=Vi(S[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}Cn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(Ko(S,zs,!0),":");var C=this.g;return(C||S=="file")&&(g.push("//"),(S=this.o)&&g.push(Ko(S,zs,!0),"@"),g.push(nr(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Ko(C,C.charAt(0)=="/"?El:dc,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Ko(C,hc)),g.join("")},Cn.prototype.resolve=function(g){const S=wt(this);let C=!!g.j;C?Ht(S,g.j):C=!!g.o,C?S.o=g.o:C=!!g.g,C?S.g=g.g:C=g.u!=null;var w=g.h;if(C)Ur(S,g.u);else if(C=!!g.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var z=S.h.lastIndexOf("/");z!=-1&&(w=S.h.slice(0,z+1)+w)}if(z=w,z==".."||z==".")w="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){w=z.lastIndexOf("/",0)==0,z=z.split("/");const Q=[];for(let ue=0;ue<z.length;){const be=z[ue++];be=="."?w&&ue==z.length&&Q.push(""):be==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&ue==z.length&&Q.push("")):(Q.push(be),w=!0)}w=Q.join("/")}else w=z}return C?S.h=w:C=g.i.toString()!=="",C?vl(S,mc(g.i)):C=!!g.m,C&&(S.m=g.m),S};function wt(g){return new Cn(g)}function Ht(g,S,C){g.j=C?Vi(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Ur(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function vl(g,S,C){S instanceof Or?(g.i=S,Ks(g.i,g.l)):(C||(S=Ko(S,Lr)),g.i=new Or(S,g.l))}function Ze(g,S,C){g.i.set(S,C)}function $o(g){return Ze(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Vi(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ko(g,S,C){return typeof g=="string"?(g=encodeURI(g).replace(S,pn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function pn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var zs=/[#\/\?@]/g,dc=/[#\?:]/g,El=/[#\?]/g,Lr=/[#\?@]/g,hc=/#/g;function Or(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function mn(g){g.g||(g.g=new Map,g.h=0,g.i&&Gs(g.i,function(S,C){g.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=Or.prototype,t.add=function(g,S){mn(this),this.i=null,g=Fr(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(S),this.h+=1,this};function pc(g,S){mn(g),S=Fr(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function Tl(g,S){return mn(g),S=Fr(g,S),g.g.has(S)}t.forEach=function(g,S){mn(this),this.g.forEach(function(C,w){C.forEach(function(z){g.call(S,z,w,this)},this)},this)};function Sl(g,S){mn(g);let C=[];if(typeof S=="string")Tl(g,S)&&(C=C.concat(g.g.get(Fr(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)C=C.concat(g[S]);return C}t.set=function(g,S){return mn(this),this.i=null,g=Fr(this,g),Tl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},t.get=function(g,S){return g?(g=Sl(this,g),g.length>0?String(g[0]):S):S};function $s(g,S,C){pc(g,S),C.length>0&&(g.i=null,g.g.set(Fr(g,S),I(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let w=0;w<S.length;w++){var C=S[w];const z=nr(C);C=Sl(this,C);for(let Q=0;Q<C.length;Q++){let ue=z;C[Q]!==""&&(ue+="="+nr(C[Q])),g.push(ue)}}return this.i=g.join("&")};function mc(g){const S=new Or;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function Fr(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function Ks(g,S){S&&!g.j&&(mn(g),g.i=null,g.g.forEach(function(C,w){const z=w.toLowerCase();w!=z&&(pc(this,w),$s(this,z,C))},g)),g.j=S}function oi(g,S){const C=new ni;if(u.Image){const w=new Image;w.onload=_(Ln,C,"TestLoadImage: loaded",!0,S,w),w.onerror=_(Ln,C,"TestLoadImage: error",!1,S,w),w.onabort=_(Ln,C,"TestLoadImage: abort",!1,S,w),w.ontimeout=_(Ln,C,"TestLoadImage: timeout",!1,S,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=g}else S(!1)}function Al(g,S){const C=new ni,w=new AbortController,z=setTimeout(()=>{w.abort(),Ln(C,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:w.signal}).then(Q=>{clearTimeout(z),Q.ok?Ln(C,"TestPingServer: ok",!0,S):Ln(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(z),Ln(C,"TestPingServer: error",!1,S)})}function Ln(g,S,C,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(C)}catch{}}function qr(){this.g=new nc}function Ui(g){this.i=g.Sb||null,this.h=g.ab||!1}E(Ui,ic),Ui.prototype.g=function(){return new Yo(this.i,this.h)};function Yo(g,S){At.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Yo,At),t=Yo.prototype,t.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,si(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ys(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ys(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?Br(this):si(this),this.readyState==3&&Ys(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Br(this))},t.Na=function(g){this.g&&(this.response=g,Br(this))},t.ga=function(){this.g&&Br(this)};function Br(g){g.readyState=4,g.l=null,g.j=null,g.B=null,si(g)}t.setRequestHeader=function(g,S){this.A.append(g,S)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=S.next();return g.join(`\r
`)};function si(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function On(g){let S="";return ze(g,function(C,w){S+=w,S+=":",S+=C,S+=`\r
`}),S}function Jo(g,S,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=On(C),typeof g=="string"?C!=null&&nr(C):Ze(g,S,C))}function tt(g){At.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(tt,At);var Li=/^https?$/i,Cl=["POST","PUT"];t=tt.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,S,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hl.g(),this.g.onreadystatechange=T(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(Q){Qo(this,Q);return}if(g=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)C.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())C.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Cl,S,void 0)>=0)||w||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of C)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Q){Qo(this,Q)}};function Qo(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,Il(g),ir(g)}function Il(g){g.A||(g.A=!0,Lt(g,"complete"),Lt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Lt(this,"complete"),Lt(this,"abort"),ir(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ir(this,!0)),tt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Wo(this):this.Xa())},t.Xa=function(){Wo(this)};function Wo(g){if(g.h&&typeof a<"u"){if(g.v&&ai(g)==4)setTimeout(g.Ca.bind(g),0);else if(Lt(g,"readystatechange"),ai(g)==4){g.h=!1;try{const Q=g.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var w;if(w=Q===0){let ue=String(g.D).match(fc)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),w=!Li.test(ue?ue.toLowerCase():"")}C=w}if(C)Lt(g,"complete"),Lt(g,"success");else{g.o=6;try{var z=ai(g)>2?g.g.statusText:""}catch{z=""}g.l=z+" ["+g.ca()+"]",Il(g)}}finally{ir(g)}}}}function ir(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,S||Lt(g,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ai(g){return g.g?g.g.readyState:0}t.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),fh(S)}};function Yt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function rr(g){const S={};g=(g.g&&ai(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<g.length;w++){if(P(g[w]))continue;var C=lc(g[w]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=S[z]||[];S[z]=Q,Q.push(C)}Xe(S,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(g,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||S}function Hr(g){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,g),this.Za=Oi("retryDelaySeedMs",1e4,g),this.Ta=Oi("forwardChannelMaxRetries",2,g),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new pl(g&&g.concurrentRequestLimit),this.Ba=new qr,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Hr.prototype,t.ka=8,t.I=1,t.connect=function(g,S,C,w){Ct(0),this.W=g,this.H=S||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=Sc(this,null,this.W),Fi(this)};function Rl(g){if(Js(g),g.I==3){var S=g.V++,C=wt(g.J);if(Ze(C,"SID",g.M),Ze(C,"RID",S),Ze(C,"TYPE","terminate"),Xo(g,C),S=new ii(g,g.j,S),S.M=2,S.A=$o(wt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=S.A,C=!0),C||(S.g=Ac(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Mi(S)}Tc(g)}function Gr(g){g.g&&(Nl(g),g.g.cancel(),g.g=null)}function Js(g){Gr(g),g.v&&(u.clearTimeout(g.v),g.v=null),Ws(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Fi(g){if(!ml(g.h)&&!g.m){g.m=!0;var S=g.Ea;se||b(),le||(se(),le=!0),M.add(S,g),g.D=0}}function Qs(g,S){return ki(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=wi(h(g.Ea,g,S),Ec(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const z=new ii(this,this.j,g);let Q=this.o;if(this.U&&(Q?(Q=F(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(z.J=Q,Q=null),this.S)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(S+=w,S>4096){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=gc(this,z,S),C=wt(this.J),Ze(C,"RID",g),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),Xo(this,C),Q&&(this.R?S="headers="+nr(On(Q))+"&"+S:this.u&&Jo(C,this.u,Q)),gl(this.h,z),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",S),Ze(C,"SID","null"),z.U=!0,bi(z,C,null)):bi(z,C,S),this.I=2}}else this.I==3&&(g?wl(this,g):this.i.length==0||ml(this.h)||wl(this))};function wl(g,S){var C;S?C=S.l:C=g.V++;const w=wt(g.J);Ze(w,"SID",g.M),Ze(w,"RID",C),Ze(w,"AID",g.K),Xo(g,w),g.u&&g.o&&Jo(w,g.u,g.o),C=new ii(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),S&&(g.i=S.G.concat(g.i)),S=gc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),gl(g.h,C),bi(C,w,S)}function Xo(g,S){g.H&&ze(g.H,function(C,w){Ze(S,w,C)}),g.l&&ze({},function(C,w){Ze(S,w,C)})}function gc(g,S,C){C=Math.min(g.i.length,C);const w=g.l?h(g.l.Ka,g.l,g):null;e:{var z=g.i;let be=-1;for(;;){const vt=["count="+C];be==-1?C>0?(be=z[0].g,vt.push("ofs="+be)):be=0:vt.push("ofs="+be);let Je=!0;for(let ft=0;ft<C;ft++){var Q=z[ft].g;const Fn=z[ft].map;if(Q-=be,Q<0)be=Math.max(0,z[ft].g-100),Je=!1;else try{Q="req"+Q+"_"||"";try{var ue=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Bi,li]of ue){let ui=li;f(li)&&(ui=Vr(li)),vt.push(Q+Bi+"="+encodeURIComponent(ui))}}catch(Bi){throw vt.push(Q+"type="+encodeURIComponent("_badmap")),Bi}}catch{w&&w(Fn)}}if(Je){ue=vt.join("&");break e}}ue=void 0}return g=g.i.splice(0,C),S.G=g,ue}function yc(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;se||b(),le||(se(),le=!0),M.add(S,g),g.A=0}}function Zo(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=wi(h(g.Da,g),Ec(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,_c(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=wi(h(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Gr(this),_c(this))};function Nl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function _c(g){g.g=new ii(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=wt(g.na);Ze(S,"RID","rpc"),Ze(S,"SID",g.M),Ze(S,"AID",g.K),Ze(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&Ze(S,"TO",g.ia),Ze(S,"TYPE","xmlhttp"),Xo(g,S),g.u&&g.o&&Jo(S,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=$o(wt(S)),C.u=null,C.R=!0,Bs(C,g)}t.Va=function(){this.C!=null&&(this.C=null,Gr(this),Zo(this),Ct(19))};function Ws(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function vc(g,S){var C=null;if(g.g==S){Ws(g),Nl(g),g.g=null;var w=2}else if(xi(g.h,S))C=S.G,yl(g.h,S),w=1;else return;if(g.I!=0){if(S.o)if(w==1){C=S.u?S.u.length:0,S=Date.now()-S.F;var z=g.D;w=qs(),Lt(w,new Ri(w,C)),Fi(g)}else yc(g);else if(z=S.m,z==3||z==0&&S.X>0||!(w==1&&Qs(g,S)||w==2&&Zo(g)))switch(C&&C.length>0&&(S=g.h,S.i=S.i.concat(C)),z){case 1:qi(g,5);break;case 4:qi(g,10);break;case 3:qi(g,6);break;default:qi(g,2)}}}function Ec(g,S){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*S}function qi(g,S){if(g.j.info("Error code "+S),S==2){var C=h(g.bb,g),w=g.Ua;const z=!w;w=new Cn(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ht(w,"https"),$o(w),z?oi(w.toString(),C):Al(w.toString(),C)}else Ct(2);g.I=0,g.l&&g.l.pa(S),Tc(g),Js(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Tc(g){if(g.I=0,g.ja=[],g.l){const S=_l(g.h);(S.length!=0||g.i.length!=0)&&(k(g.ja,S),k(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function Sc(g,S,C){var w=C instanceof Cn?wt(C):new Cn(C);if(w.g!="")S&&(w.g=S+"."+w.g),Ur(w,w.u);else{var z=u.location;w=z.protocol,S=S?S+"."+z.hostname:z.hostname,z=+z.port;const Q=new Cn(null);w&&Ht(Q,w),S&&(Q.g=S),z&&Ur(Q,z),C&&(Q.h=C),w=Q}return C=g.G,S=g.wa,C&&S&&Ze(w,C,S),Ze(w,"VER",g.ka),Xo(g,w),w}function Ac(g,S,C){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new tt(new Ui({ab:C})):new tt(g.ma),S.Fa(g.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}t=Cc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zr(){}zr.prototype.g=function(g,S){return new un(g,S)};function un(g,S){At.call(this),this.g=new Hr(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!P(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!P(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new or(this)}E(un,At),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Rl(this.g)},un.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=Vr(g),g=C);S.i.push(new Rt(S.Ya++,g)),S.I==3&&Fi(S)},un.prototype.N=function(){this.g.l=null,delete this.j,Rl(this.g),delete this.g,un.Z.N.call(this)};function Ic(g){Kt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const C in S){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}E(Ic,Kt);function Rc(){Vn.call(this),this.status=1}E(Rc,Vn);function or(g){this.g=g}E(or,Cc),or.prototype.ra=function(){Lt(this.g,"a")},or.prototype.qa=function(g){Lt(this.g,new Ic(g))},or.prototype.pa=function(g){Lt(this.g,new Rc)},or.prototype.oa=function(){Lt(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,DC=function(){return new zr},MC=function(){return qs()},bC=_t,Hm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Kf=Go,dl.COMPLETE="complete",NC=dl,rc.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",At.prototype.listen=At.prototype.J,vu=rc,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,wC=tt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="12.8.0";function oP(t){Za=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Ld("@firebase/firestore");function wa(){return Es.logLevel}function he(t,...e){if(Es.logLevel<=Le.DEBUG){const n=e.map(Ug);Es.debug(`Firestore (${Za}): ${t}`,...n)}}function Nr(t,...e){if(Es.logLevel<=Le.ERROR){const n=e.map(Ug);Es.error(`Firestore (${Za}): ${t}`,...n)}}function za(t,...e){if(Es.logLevel<=Le.WARN){const n=e.map(Ug);Es.warn(`Firestore (${Za}): ${t}`,...n)}}function Ug(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,PC(t,i,n)}function PC(t,e,n){let i=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Nr(i),new Error(i)}function We(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||PC(e,o,i)}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(rn.UNAUTHENTICATED)))}shutdown(){}}class aP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class lP{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let a=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Cr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new kC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class uP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class cP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new uP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=dP(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<n&&(i+=e.charAt(o[a]%62))}return i}}function Oe(t,e){return t<e?-1:t>e?1:0}function Gm(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const o=t.charAt(i),a=e.charAt(i);if(o!==a)return Sm(o)===Sm(a)?Oe(o,a):Sm(o)?1:-1}return Oe(t.length,e.length)}const hP=55296,pP=57343;function Sm(t){const e=t.charCodeAt(0);return e>=hP&&e<=pP}function $a(t,e,n){return t.length===e.length&&t.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="__name__";class Ki{constructor(e,n,i){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Se(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const a=Ki.compareSegments(e.get(o),n.get(o));if(a!==0)return a}return Oe(e.length,n.length)}static compareSegments(e,n){const i=Ki.isNumericId(e),o=Ki.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Ki.extractNumericId(e).compare(Ki.extractNumericId(n)):Gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class st extends Ki{construct(e,n,i){return new st(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Ki{construct(e,n,i){return new jt(e,n,i)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VT}static keyField(){return new jt([VT])}static fromServerFormat(e){const n=[];let i="",o=0;const a=()=>{if(i.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new de(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(a(),o++)}if(a(),u)throw new de(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(st.fromString(e))}static fromName(e){return new ve(st.fromString(e).popFirst(5))}static empty(){return new ve(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t,e,n){if(!n)throw new de(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gP(t,e,n,i){if(e===!0&&i===!0)throw new de(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UT(t){if(!ve.isDocumentKey(t))throw new de(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LT(t){if(ve.isDocumentKey(t))throw new de(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Fd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se(12329,{type:typeof t})}function Ro(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fd(t);throw new de(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function $u(t,e){if(!VC(t))throw new de(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const u=t[i];if(o&&typeof u!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new de(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=-62135596800,FT=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*FT);return new ut(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<OT)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FT}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($u(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:xt("string",ut._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ut(0,0))}static max(){return new Re(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-1;function yP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ut(n+1,0):new ut(n,i));return new wo(o,ve.empty(),e)}function _P(t){return new wo(t.readTime,t.key,Pu)}class wo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new wo(Re.min(),ve.empty(),Pu)}static max(){return new wo(Re.max(),ve.empty(),Pu)}}function vP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==EP)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,i)=>{n(e)}))}static reject(e){return new re(((n,i)=>{i(e)}))}static waitFor(e){return new re(((n,i)=>{let o=0,a=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++a,u&&a===o&&n()}),(p=>i(p)))})),u=!0,a===o&&n()}))}static or(e){let n=re.resolve(!1);for(const i of e)n=n.next((o=>o?re.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,a)=>{i.push(n.call(this,o,a))})),this.waitFor(i)}static mapArray(e,n){return new re(((i,o)=>{const a=e.length,u=new Array(a);let f=0;for(let p=0;p<a;p++){const h=p;n(e[h]).next((_=>{u[h]=_,++f,f===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,n){return new re(((i,o)=>{const a=()=>{e()===!0?n().next((()=>{a()}),o):i()};a()}))}}function SP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=-1;function Bd(t){return t==null}function ad(t){return t===0&&1/t==-1/0}function AP(t){return typeof t=="number"&&Number.isInteger(t)&&!ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="";function CP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qT(e)),e=IP(t.get(n),e);return qT(e)}function IP(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const a=t.charAt(o);switch(a){case"\0":n+="";break;case UC:n+="";break;default:n+=a}}return n}function qT(t){return t+UC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kf(this.root,e,this.comparator,!0)}}class kf{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,i,o,a){this.key=e,this.value=n,this.color=i??Zt.RED,this.left=o??Zt.EMPTY,this.right=a??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,a){return new Zt(e??this.key,n??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,n,i),null):a===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,i,o,a){return this}insert(e,n,i){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new HT(this.data.getIterator())}getIteratorFrom(e){return new HT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class HT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Ft(jt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new OC("Invalid base64 string: "+a):a}})(e);return new en(n)}static fromUint8Array(e){const n=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const RP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=RP.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bo(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="server_timestamp",qC="__type__",BC="__previous_value__",HC="__local_write_time__";function Fg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qC])==null?void 0:i.stringValue)===FC}function Hd(t){const e=t.mapValue.fields[BC];return Fg(e)?Hd(e):e}function ku(t){const e=No(t.mapValue.fields[HC].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,i,o,a,u,f,p,h,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_,this.apiKey=E}}const ld="(default)";class xu{constructor(e,n){this.projectId=e,this.database=n||ld}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===ld}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}function NP(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new de(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__type__",bP="__max__",xf={mapValue:{}},zC="__vector__",ud="value";function Mo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fg(t)?4:DP(t)?9007199254740991:MP(t)?10:11:Se(28295,{value:t})}function ji(t,e){if(t===e)return!0;const n=Mo(t);if(n!==Mo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=No(o.timestampValue),f=No(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,a){return bo(o.bytesValue).isEqual(bo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,a){return St(o.geoPointValue.latitude)===St(a.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(a.geoPointValue.longitude)})(t,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return St(o.integerValue)===St(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=St(o.doubleValue),f=St(a.doubleValue);return u===f?ad(u)===ad(f):isNaN(u)&&isNaN(f)}return!1})(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},f=a.mapValue.fields||{};if(BT(u)!==BT(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!ji(u[p],f[p])))return!1;return!0})(t,e);default:return Se(52216,{left:t})}}function Vu(t,e){return(t.values||[]).find((n=>ji(n,e)))!==void 0}function Ka(t,e){if(t===e)return 0;const n=Mo(t),i=Mo(e);if(n!==i)return Oe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=St(a.integerValue||a.doubleValue),p=St(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(t,e);case 3:return GT(t.timestampValue,e.timestampValue);case 4:return GT(ku(t),ku(e));case 5:return Gm(t.stringValue,e.stringValue);case 6:return(function(a,u){const f=bo(a),p=bo(u);return f.compareTo(p)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),p=u.split("/");for(let h=0;h<f.length&&h<p.length;h++){const _=Oe(f[h],p[h]);if(_!==0)return _}return Oe(f.length,p.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=Oe(St(a.latitude),St(u.latitude));return f!==0?f:Oe(St(a.longitude),St(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return zT(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var T,I,k,x;const f=a.fields||{},p=u.fields||{},h=(T=f[ud])==null?void 0:T.arrayValue,_=(I=p[ud])==null?void 0:I.arrayValue,E=Oe(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((x=_==null?void 0:_.values)==null?void 0:x.length)||0);return E!==0?E:zT(h,_)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===xf.mapValue&&u===xf.mapValue)return 0;if(a===xf.mapValue)return 1;if(u===xf.mapValue)return-1;const f=a.fields||{},p=Object.keys(f),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=Gm(p[E],_[E]);if(T!==0)return T;const I=Ka(f[p[E]],h[_[E]]);if(I!==0)return I}return Oe(p.length,_.length)})(t.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function GT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=No(t),i=No(e),o=Oe(n.seconds,i.seconds);return o!==0?o:Oe(n.nanos,i.nanos)}function zT(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const a=Ka(n[o],i[o]);if(a)return a}return Oe(n.length,i.length)}function Ya(t){return zm(t)}function zm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=No(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return bo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ve.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",o=!0;for(const a of n.values||[])o?o=!1:i+=",",i+=zm(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${zm(n.fields[u])}`;return o+"}"})(t.mapValue):Se(61005,{value:t})}function Yf(t){switch(Mo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hd(t);return e?16+Yf(e):16;case 5:return 2*t.stringValue.length;case 6:return bo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Yf(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let o=0;return Ms(i.fields,((a,u)=>{o+=a.length+Yf(u)})),o})(t.mapValue);default:throw Se(13486,{value:t})}}function $T(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $m(t){return!!t&&"integerValue"in t}function qg(t){return!!t&&"arrayValue"in t}function KT(t){return!!t&&"nullValue"in t}function YT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jf(t){return!!t&&"mapValue"in t}function MP(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[GC])==null?void 0:i.stringValue)===zC}function Iu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Iu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Iu(t.arrayValue.values[n]);return e}return{...t}}function DP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Jf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(n)}setAll(e){let n=jt.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!n.isImmediateParentOf(f)){const p=this.getFieldsMap(n);this.applyChanges(p,i,o),i={},o=[],n=f.popLast()}u?i[f.lastSegment()]=Iu(u):o.push(f.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,o)}delete(e){const n=this.field(e.popLast());Jf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Jf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ms(n,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Jn(Iu(this.value))}}function $C(t){const e=[];return Ms(t.fields,((n,i)=>{const o=new jt([n]);if(Jf(i)){const a=$C(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,i,o,a,u,f){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new on(e,0,Re.min(),Re.min(),Re.min(),Jn.empty(),0)}static newFoundDocument(e,n,i,o){return new on(e,1,n,Re.min(),i,o,0)}static newNoDocument(e,n){return new on(e,2,n,Re.min(),Re.min(),Jn.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,Re.min(),Re.min(),Jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){this.position=e,this.inclusive=n}}function JT(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const a=e[o],u=t.position[o];if(a.field.isKeyField()?i=ve.comparator(ve.fromName(u.referenceValue),n.key):i=Ka(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function QT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ji(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function PP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class kt extends KC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new xP(e,n,i):n==="array-contains"?new LP(e,i):n==="in"?new OP(e,i):n==="not-in"?new FP(e,i):n==="array-contains-any"?new qP(e,i):new kt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new VP(e,i):new UP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ka(n,this.value)):n!==null&&Mo(this.value)===Mo(n)&&this.matchesComparison(Ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends KC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ei(e,n)}matches(e){return YC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YC(t){return t.op==="and"}function JC(t){return kP(t)&&YC(t)}function kP(t){for(const e of t.filters)if(e instanceof Ei)return!1;return!0}function Km(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+Ya(t.value);if(JC(t))return t.filters.map((e=>Km(e))).join(",");{const e=t.filters.map((n=>Km(n))).join(",");return`${t.op}(${e})`}}function QC(t,e){return t instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&ji(i.value,o.value)})(t,e):t instanceof Ei?(function(i,o){return o instanceof Ei&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,f)=>a&&QC(u,o.filters[f])),!0):!1})(t,e):void Se(19439)}function WC(t){return t instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ya(n.value)}`})(t):t instanceof Ei?(function(n){return n.op.toString()+" {"+n.getFilters().map(WC).join(" ,")+"}"})(t):"Filter"}class xP extends kt{constructor(e,n,i){super(e,n,i),this.key=ve.fromName(i.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class VP extends kt{constructor(e,n){super(e,"in",n),this.keys=XC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class UP extends kt{constructor(e,n){super(e,"not-in",n),this.keys=XC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function XC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class LP extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qg(n)&&Vu(n.arrayValue,this.value)}}class OP extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vu(this.value.arrayValue,n)}}class FP extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vu(this.value.arrayValue,n)}}class qP extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Vu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n=null,i=[],o=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function WT(t,e=null,n=[],i=[],o=null,a=null,u=null){return new BP(t,e,n,i,o,a,u)}function Bg(t){const e=Ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Km(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ya(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ya(i))).join(",")),e.Te=n}return e.Te}function Hg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QT(t.startAt,e.startAt)&&QT(t.endAt,e.endAt)}function Ym(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n=null,i=[],o=[],a=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function HP(t,e,n,i,o,a,u,f){return new tl(t,e,n,i,o,a,u,f)}function Gg(t){return new tl(t)}function XT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GP(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ZC(t){return t.collectionGroup!==null}function Ru(t){const e=Ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Ft(jt.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Uu(a,i))})),n.has(jt.keyField().canonicalString())||e.Ie.push(new Uu(jt.keyField(),i))}return e.Ie}function Yi(t){const e=Ne(t);return e.Ee||(e.Ee=zP(e,Ru(t))),e.Ee}function zP(t,e){if(t.limitType==="F")return WT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Uu(o.field,a)}));const n=t.endAt?new cd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new cd(t.startAt.position,t.startAt.inclusive):null;return WT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Jm(t,e){const n=t.filters.concat([e]);return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $P(t,e){const n=t.explicitOrderBy.concat([e]);return new tl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Qm(t,e,n){return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gd(t,e){return Hg(Yi(t),Yi(e))&&t.limitType===e.limitType}function jC(t){return`${Bg(Yi(t))}|lt:${t.limitType}`}function Na(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>WC(o))).join(", ")}]`),Bd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Ya(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Ya(o))).join(",")),`Target(${i})`})(Yi(t))}; limitType=${t.limitType})`}function zd(t,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ve.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,o){for(const a of Ru(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(t,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,p){const h=JT(u,f,p);return u.inclusive?h<=0:h<0})(i.startAt,Ru(i),o)||i.endAt&&!(function(u,f,p){const h=JT(u,f,p);return u.inclusive?h>=0:h>0})(i.endAt,Ru(i),o))})(t,e)}function KP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eI(t){return(e,n)=>{let i=!1;for(const o of Ru(t)){const a=YP(o,e,n);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function YP(t,e,n){const i=t.field.isKeyField()?ve.comparator(e.key,n.key):(function(a,u,f){const p=u.data.field(a),h=f.data.field(a);return p!==null&&h!==null?Ka(p,h):Se(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((n,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return LC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new pt(ve.comparator);function br(){return JP}const tI=new pt(ve.comparator);function Eu(...t){let e=tI;for(const n of t)e=e.insert(n.key,n);return e}function nI(t){let e=tI;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ys(){return wu()}function iI(){return wu()}function wu(){return new Ds((t=>t.toString()),((t,e)=>t.isEqual(e)))}const QP=new pt(ve.comparator),WP=new Ft(ve.comparator);function Fe(...t){let e=WP;for(const n of t)e=e.add(n);return e}const XP=new Ft(Oe);function ZP(){return XP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function rI(t){return{integerValue:""+t}}function jP(t,e){return AP(e)?rI(e):zg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this._=void 0}}function e2(t,e,n){return t instanceof fd?(function(o,a){const u={fields:{[qC]:{stringValue:FC},[HC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Fg(a)&&(a=Hd(a)),a&&(u.fields[BC]=a),{mapValue:u}})(n,e):t instanceof Lu?sI(t,e):t instanceof Ou?aI(t,e):(function(o,a){const u=oI(o,a),f=ZT(u)+ZT(o.Ae);return $m(u)&&$m(o.Ae)?rI(f):zg(o.serializer,f)})(t,e)}function t2(t,e,n){return t instanceof Lu?sI(t,e):t instanceof Ou?aI(t,e):n}function oI(t,e){return t instanceof dd?(function(i){return $m(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class fd extends $d{}class Lu extends $d{constructor(e){super(),this.elements=e}}function sI(t,e){const n=lI(e);for(const i of t.elements)n.some((o=>ji(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Ou extends $d{constructor(e){super(),this.elements=e}}function aI(t,e){let n=lI(e);for(const i of t.elements)n=n.filter((o=>!ji(o,i)));return{arrayValue:{values:n}}}class dd extends $d{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ZT(t){return St(t.integerValue||t.doubleValue)}function lI(t){return qg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function n2(t,e){return t.field.isEqual(e.field)&&(function(i,o){return i instanceof Lu&&o instanceof Lu||i instanceof Ou&&o instanceof Ou?$a(i.elements,o.elements,ji):i instanceof dd&&o instanceof dd?ji(i.Ae,o.Ae):i instanceof fd&&o instanceof fd})(t.transform,e.transform)}class i2{constructor(e,n){this.version=e,this.transformResults=n}}class Ji{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kd{}function uI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $g(t.key,Ji.none()):new Ku(t.key,t.data,Ji.none());{const n=t.data,i=Jn.empty();let o=new Ft(jt.comparator);for(let a of e.fields)if(!o.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Ps(t.key,i,new hi(o.toArray()),Ji.none())}}function r2(t,e,n){t instanceof Ku?(function(o,a,u){const f=o.value.clone(),p=e0(o.fieldTransforms,a,u.transformResults);f.setAll(p),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):t instanceof Ps?(function(o,a,u){if(!Qf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const f=e0(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(cI(o)),p.setAll(f),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(t,e,n):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Nu(t,e,n,i){return t instanceof Ku?(function(a,u,f,p){if(!Qf(a.precondition,u))return f;const h=a.value.clone(),_=t0(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Ps?(function(a,u,f,p){if(!Qf(a.precondition,u))return f;const h=t0(a.fieldTransforms,p,u),_=u.data;return _.setAll(cI(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,u,f){return Qf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(t,e,n)}function o2(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),a=oI(i.transform,o||null);a!=null&&(n===null&&(n=Jn.empty()),n.set(i.field,a))}return n||null}function jT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&$a(i,o,((a,u)=>n2(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ku extends Kd{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ps extends Kd{constructor(e,n,i,o,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function cI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function e0(t,e,n){const i=new Map;We(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let o=0;o<n.length;o++){const a=t[o],u=a.transform,f=e.data.field(a.field);i.set(a.field,t2(u,f,n[o]))}return i}function t0(t,e,n){const i=new Map;for(const o of t){const a=o.transform,u=n.data.field(o.field);i.set(o.field,e2(a,u,e))}return i}class $g extends Kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s2 extends Kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&r2(a,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Nu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Nu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=iI();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=n.has(o.key)?null:f;const p=uI(u,f);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,((n,i)=>jT(n,i)))&&$a(this.baseMutations,e.baseMutations,((n,i)=>jT(n,i)))}}class Kg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return QP})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Kg(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ge;function c2(t){switch(t){case te.OK:return Se(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Se(15467,{code:t})}}function fI(t){if(t===void 0)return Nr("GRPC error has no .code"),te.UNKNOWN;switch(t){case Pt.OK:return te.OK;case Pt.CANCELLED:return te.CANCELLED;case Pt.UNKNOWN:return te.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return te.INTERNAL;case Pt.UNAVAILABLE:return te.UNAVAILABLE;case Pt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Pt.NOT_FOUND:return te.NOT_FOUND;case Pt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Pt.ABORTED:return te.ABORTED;case Pt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Pt.DATA_LOSS:return te.DATA_LOSS;default:return Se(39323,{code:t})}}(Ge=Pt||(Pt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=new Ao([4294967295,4294967295],0);function n0(t){const e=f2().encode(t),n=new RC;return n.update(e),new Uint8Array(n.digest())}function i0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ao([n,i],0),new Ao([o,a],0)]}class Yg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Tu(`Invalid padding: ${n}`);if(i<0)throw new Tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ao.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(Ao.fromNumber(i)));return o.compare(d2)===1&&(o=new Ao([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=n0(e),[i,o]=i0(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Yg(a,o,n);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const n=n0(e),[i,o]=i0(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.be(u)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,i,o,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Yd(Re.min(),o,new pt(Oe),br(),Fe())}}class Yu{constructor(e,n,i,o,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Yu(i,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,i,o){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=o}}class dI{constructor(e,n){this.targetId=e,this.Ce=n}}class hI{constructor(e,n,i=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class r0{constructor(){this.ve=0,this.Fe=o0(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),i=Fe();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:a})}})),new Yu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=o0()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class h2{constructor(e){this.Ge=e,this.ze=new Map,this.je=br(),this.He=Vf(),this.Je=Vf(),this.Ze=new pt(Oe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const a=o.target;if(Ym(a))if(i===0){const u=new ve(a.path);this.et(n,u,on.newNoDocument(u,Re.min()))}else We(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(n);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let u,f;try{u=bo(i).toUint8Array()}catch(p){if(p instanceof OC)return za("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Yg(u,o,a)}catch(p){return za(p instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(n,a,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&Ym(f.target)){const p=new ve(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,on.newNoDocument(p,e))}a.Be&&(n.set(u,a.ke()),a.Ke())}}));let i=Fe();this.Je.forEach(((a,u)=>{let f=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Yd(e,n,this.Ze,this.je,i);return this.je=br(),this.He=Vf(),this.Je=Vf(),this.Ze=new pt(Oe),o}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new r0,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ft(Oe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ft(Oe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new r0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vf(){return new pt(ve.comparator)}function o0(){return new pt(ve.comparator)}const p2={asc:"ASCENDING",desc:"DESCENDING"},m2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g2={and:"AND",or:"OR"};class y2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wm(t,e){return t.useProto3Json||Bd(e)?e:{value:e}}function hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _2(t,e){return hd(t,e.toTimestamp())}function Qi(t){return We(!!t,49232),Re.fromTimestamp((function(n){const i=No(n);return new ut(i.seconds,i.nanos)})(t))}function Jg(t,e){return Xm(t,e).canonicalString()}function Xm(t,e){const n=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function mI(t){const e=st.fromString(t);return We(EI(e),10190,{key:e.toString()}),e}function Zm(t,e){return Jg(t.databaseId,e.path)}function Am(t,e){const n=mI(e);if(n.get(1)!==t.databaseId.projectId)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(yI(n))}function gI(t,e){return Jg(t.databaseId,e)}function v2(t){const e=mI(t);return e.length===4?st.emptyPath():yI(e)}function jm(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function s0(t,e,n){return{name:Zm(t,e),fields:n.value.mapValue.fields}}function E2(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Se(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(We(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?te.UNKNOWN:fI(h.code);return new de(_,h.message||"")})(u);n=new hI(i,o,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Am(t,i.document.name),a=Qi(i.document.updateTime),u=i.document.createTime?Qi(i.document.createTime):Re.min(),f=new Jn({mapValue:{fields:i.document.fields}}),p=on.newFoundDocument(o,a,u,f),h=i.targetIds||[],_=i.removedTargetIds||[];n=new Wf(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Am(t,i.document),a=i.readTime?Qi(i.readTime):Re.min(),u=on.newNoDocument(o,a),f=i.removedTargetIds||[];n=new Wf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Am(t,i.document),a=i.removedTargetIds||[];n=new Wf([],a,o,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new u2(o,a),f=i.targetId;n=new dI(f,u)}}return n}function T2(t,e){let n;if(e instanceof Ku)n={update:s0(t,e.key,e.value)};else if(e instanceof $g)n={delete:Zm(t,e.key)};else if(e instanceof Ps)n={update:s0(t,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof s2))return Se(16599,{dt:e.type});n={verify:Zm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof fd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Lu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ou)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof dd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Se(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:_2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se(27497)})(t,e.precondition)),n}function S2(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map((n=>(function(o,a){let u=o.updateTime?Qi(o.updateTime):Qi(a);return u.isEqual(Re.min())&&(u=Qi(a)),new i2(u,o.transformResults||[])})(n,e)))):[]}function A2(t,e){return{documents:[gI(t,e.path)]}}function C2(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gI(t,o);const a=(function(h){if(h.length!==0)return vI(Ei.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(T){return{field:ba(T.field),direction:w2(T.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const f=Wm(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:o}}function I2(t){let e=v2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){We(i===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];n.where&&(a=(function(E){const T=_I(E);return T instanceof Ei&&JC(T)?T.getFilters():[T]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((T=>(function(k){return new Uu(Ma(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(T)))})(n.orderBy));let f=null;n.limit&&(f=(function(E){let T;return T=typeof E=="object"?E.value:E,Bd(T)?null:T})(n.limit));let p=null;n.startAt&&(p=(function(E){const T=!!E.before,I=E.values||[];return new cd(I,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const T=!E.before,I=E.values||[];return new cd(I,T)})(n.endAt)),HP(e,o,u,a,f,"F",p,h)}function R2(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _I(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ma(n.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ma(n.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ma(n.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ma(n.unaryFilter.field);return kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kt.create(Ma(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ei.create(n.compositeFilter.filters.map((i=>_I(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(t):Se(30097,{filter:t})}function w2(t){return p2[t]}function N2(t){return m2[t]}function b2(t){return g2[t]}function ba(t){return{fieldPath:t.canonicalString()}}function Ma(t){return jt.fromServerFormat(t.fieldPath)}function vI(t){return t instanceof kt?(function(n){if(n.op==="=="){if(YT(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NAN"}};if(KT(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YT(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NAN"}};if(KT(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(n.field),op:N2(n.op),value:n.value}}})(t):t instanceof Ei?(function(n){const i=n.getFilters().map((o=>vI(o)));return i.length===1?i[0]:{compositeFilter:{op:b2(n.op),filters:i}}})(t):Se(54877,{filter:t})}function M2(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function EI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function TI(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n,i,o,a=Re.min(),u=Re.min(),f=en.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.yt=e}}function P2(t){const e=I2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.Sn=new x2}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(wo.min())}updateCollectionGroup(e,n,i){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class x2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Ft(st.comparator),a=!o.has(i);return this.index[n]=o.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ft(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SI=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(SI,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ja(0)}static ar(){return new Ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="LruGarbageCollector",V2=1048576;function u0([t,e],[n,i]){const o=Oe(t,n);return o===0?Oe(e,i):o}class U2{constructor(e){this.Pr=e,this.buffer=new Ft(u0),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();u0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class L2{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(l0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?he(l0,"Ignoring IndexedDB error during garbage collection: ",n):await ja(n)}await this.Ar(3e5)}))}}class O2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(qd.ce);const i=new U2(n);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(a0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a0):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,o,a,u,f,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),wa()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${a} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function F2(t,e){return new O2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.changes=new Ds((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?re.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Nu(i.mutation,o,hi.empty(),ut.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Fe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Fe()){const o=ys();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((a=>{let u=Eu();return a.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=ys();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Fe())))}populateOverlays(e,n,i){const o=[];return i.forEach((a=>{n.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,f)=>{n.set(u,f)}))}))}computeViews(e,n,i,o){let a=br();const u=wu(),f=(function(){return wu()})();return n.forEach(((p,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Ps)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),Nu(_.mutation,h,_.mutation.getFieldMask(),ut.now())):u.set(h.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),n.forEach(((h,_)=>f.set(h,new B2(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,n){const i=wu();let o=new pt(((u,f)=>u-f)),a=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const f of u)f.keys().forEach((p=>{const h=n.get(p);if(h===null)return;let _=i.get(p)||hi.empty();_=f.applyToLocalView(h,_),i.set(p,_);const E=(o.get(f.batchId)||Fe()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),h=p.key,_=p.value,E=iI();_.forEach((T=>{if(!a.has(T)){const I=uI(n.get(T),i.get(T));I!==null&&E.set(T,I),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return re.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return GP(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-a.size):re.resolve(ys());let f=Pu,p=a;return u.next((h=>re.forEach(h,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),a.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,Fe()))).next((_=>({batchId:f,changes:nI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((i=>{let o=Eu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const a=n.collectionGroup;let u=Eu();return this.indexManager.getCollectionParents(e,a).next((f=>re.forEach(f,(p=>{const h=(function(E,T){return new tl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,o)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,on.newInvalidDocument(_)))}));let f=Eu();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&Nu(_.mutation,h,hi.empty(),ut.now()),zd(n,h)&&(f=f.insert(p,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Qi(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:P2(o.bundledQuery),readTime:Qi(o.readTime)}})(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.overlays=new pt(ve.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ys();return re.forEach(n,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,a)=>{this.bt(e,n,a)})),re.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),re.resolve()}getOverlaysForCollection(e,n,i){const o=ys(),a=n.length+1,u=new ve(n.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,h=p.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let a=new pt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=ys(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=ys(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=o)););return re.resolve(f)}bt(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new l2(n,i));let a=this.Lr.get(n);a===void 0&&(a=Fe(),this.Lr.set(n,a)),this.Lr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.kr=new Ft(zt.Kr),this.qr=new Ft(zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new zt(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new zt(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new ve(new st([])),i=new zt(n,e),o=new zt(n,e+1),a=[];return this.qr.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ve(new st([])),i=new zt(n,e),o=new zt(n,e+1);let a=Fe();return this.qr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new zt(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ve.comparator(e.key,n.key)||Oe(e.Hr,n.Hr)}static Ur(e,n){return Oe(e.Hr,n.Hr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ft(zt.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new a2(a,n,i,o);this.mutationQueue.push(u);for(const f of o)this.Jr=this.Jr.add(new zt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.Xr(i),a=o<0?0:o;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Og:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new zt(n,0),o=new zt(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,o],(u=>{const f=this.Zr(u.Hr);a.push(f)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ft(Oe);return n.forEach((o=>{const a=new zt(o,0),u=new zt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(f=>{i=i.add(f.Hr)}))})),re.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let a=i;ve.isDocumentKey(a)||(a=a.child(""));const u=new zt(new ve(a),0);let f=new Ft(Oe);return this.Jr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(f=f.add(p.Hr)),!0)}),u),re.resolve(this.Yr(f))}Yr(e){const n=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){We(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return re.forEach(n.mutations,(o=>{const a=new zt(o.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new zt(n,0),o=this.Jr.firstAfterOrEqual(i);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.ti=e,this.docs=(function(){return new pt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),a=o?o.size:0,u=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return re.resolve(i?i.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let i=br();return n.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():on.newInvalidDocument(o))})),re.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let a=br();const u=n.path,f=new ve(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||vP(_P(_),i)<=0||(o.has(_.key)||zd(n,_))&&(a=a.insert(_.key,_.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,n,i,o){Se(9500)}ni(e,n){return re.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new J2(this)}getSize(e){return re.resolve(this.size)}}class J2 extends q2{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.persistence=e,this.ri=new Ds((n=>Bg(n)),Hg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new Qg,this.targetCount=0,this.oi=Ja._r()}forEachTarget(e,n){return this.ri.forEach(((i,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ja(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,i){let o=0;const a=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=n&&i.get(f.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),re.waitFor(a).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return re.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),re.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const o=this.persistence.referenceDelegate,a=[];return o&&n.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return re.resolve(i)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this._i={},this.overlays={},this.ai=new qd(0),this.ui=!1,this.ui=!0,this.ci=new $2,this.referenceDelegate=e(this),this.li=new Q2(this),this.indexManager=new k2,this.remoteDocumentCache=(function(o){return new Y2(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new D2(n),this.Pi=new G2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new z2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new K2(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){he("MemoryPersistence","Starting transaction:",e);const o=new W2(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((a=>this.referenceDelegate.Ii(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,n){return re.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class W2 extends TP{constructor(e){super(),this.currentSequenceNumber=e}}class Wg{constructor(e){this.persistence=e,this.Ri=new Qg,this.Ai=null}static Vi(e){return new Wg(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),re.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(i=>{const o=ve.fromPath(i);return this.mi(e,o).next((a=>{a||n.removeEntry(o,Re.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class pd{constructor(e,n){this.persistence=e,this.fi=new Ds((i=>CP(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=F2(this,n)}static Vi(e,n){return new pd(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((a=>a?re.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,n).next((f=>{f||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yf(e.data.value)),n}wr(e,n,i){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return re.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=o}static Es(e,n){let i=Fe(),o=Fe();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Xg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return OM()?8:SP(an())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const a={result:null};return this.gs(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,n,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new X2;return this.ys(e,n,u).next((f=>{if(a.result=f,this.As)return this.ws(e,n,u,f.size)}))})).next((()=>a.result))}ws(e,n,i,o){return i.documentReadCount<this.Vs?(wa()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Na(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(wa()<=Le.DEBUG&&he("QueryEngine","Query:",Na(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(wa()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Na(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(n))):re.resolve())}gs(e,n){if(XT(n))return re.resolve(null);let i=Yi(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Qm(n,null,"F"),i=Yi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Fe(...a);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.bs(n,f);return this.Ss(n,h,u,p.readTime)?this.gs(e,Qm(n,null,"F")):this.Ds(e,h,n,p)}))))})))))}ps(e,n,i,o){return XT(n)||o.isEqual(Re.min())?re.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(n,a);return this.Ss(n,u,i,o)?re.resolve(null):(wa()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Na(n)),this.Ds(e,u,n,yP(o,Pu)).next((f=>f)))}))}bs(e,n){let i=new Ft(eI(e));return n.forEach(((o,a)=>{zd(e,a)&&(i=i.add(a))})),i}Ss(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ys(e,n,i){return wa()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Na(n)),this.fs.getDocumentsMatchingQuery(e,n,wo.min(),i)}Ds(e,n,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="LocalStore",j2=3e8;class ek{constructor(e,n,i,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new pt(Oe),this.Fs=new Ds((a=>Bg(a)),Hg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function tk(t,e,n,i){return new ek(t,e,n,i)}async function CI(t,e){const n=Ne(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let p=Fe();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){f.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(i,p).next((h=>({Ns:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function nk(t,e){const n=Ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,h,_){const E=h.batch,T=E.keys();let I=re.resolve();return T.forEach((k=>{I=I.next((()=>_.getEntry(p,k))).next((x=>{const D=h.docVersions.get(k);We(D!==null,48541),x.version.compareTo(D)<0&&(E.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),_.addEntry(x)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Fe();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(p=p.add(f.batch.mutations[h].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function II(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function ik(t,e){const n=Ne(t),i=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;f.push(n.li.removeMatchingKeys(a,_.removedDocuments,E).next((()=>n.li.addMatchingKeys(a,_.addedDocuments,E))));let I=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(en.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),o=o.insert(E,I),(function(x,D,B){return x.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=j2?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,I,_)&&f.push(n.li.updateTargetData(a,I))}));let p=br(),h=Fe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(a,_))})),f.push(rk(a,u,e.documentUpdates).next((_=>{p=_.Bs,h=_.Ls}))),!i.isEqual(Re.min())){const _=n.li.getLastRemoteSnapshotVersion(a).next((E=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(_)}return re.waitFor(f).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(n.vs=o,a)))}function rk(t,e,n){let i=Fe(),o=Fe();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=br();return n.forEach(((f,p)=>{const h=a.get(f);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):he(Zg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",p.version)})),{Bs:u,Ls:o}}))}function ok(t,e){const n=Ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Og),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function sk(t,e){const n=Ne(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.li.getTargetData(i,e).next((a=>a?(o=a,re.resolve(o)):n.li.allocateTargetId(i).next((u=>(o=new vo(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function eg(t,e,n){const i=Ne(t),o=i.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!el(u))throw u;he(Zg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function c0(t,e,n){const i=Ne(t);let o=Re.min(),a=Fe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const E=Ne(p),T=E.Fs.get(_);return T!==void 0?re.resolve(E.vs.get(T)):E.li.getTargetData(h,_)})(i,u,Yi(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,n?o:Re.min(),n?a:Fe()))).next((f=>(ak(i,KP(e),f),{documents:f,ks:a})))))}function ak(t,e,n){let i=t.Ms.get(e)||Re.min();n.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.Ms.set(e,i)}class f0{constructor(){this.activeTargetIds=ZP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lk{constructor(){this.vo=new f0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new f0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="ConnectivityMonitor";class h0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(d0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(d0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf=null;function tg(){return Uf===null?Uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uf++,"0x"+Uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="RestConnection",ck={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class fk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===ld?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,n,i,o,a){const u=tg(),f=this.Qo(e,n.toUriEncodedString());he(Cm,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,a);const{host:h}=new URL(f),_=ws(h);return this.zo(e,f,p,i,_).then((E=>(he(Cm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw za(Cm,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E}))}jo(e,n,i,o,a,u){return this.Wo(e,n,i,o,a)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Za})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Qo(e,n){const i=ck[e];let o=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection",pu=(t,e,n)=>{t.listen(e,(i=>{try{n(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Va extends fk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Va.c_){const e=MC();pu(e,bC.STAT_EVENT,(n=>{n.stat===Hm.PROXY?he(nn,"STAT_EVENT: detected buffering proxy"):n.stat===Hm.NOPROXY&&he(nn,"STAT_EVENT: detected no buffering proxy")})),Va.c_=!0}}zo(e,n,i,o,a){const u=tg();return new Promise(((f,p)=>{const h=new wC;h.setWithCredentials(!0),h.listenOnce(NC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Kf.NO_ERROR:const E=h.getResponseJson();he(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Kf.TIMEOUT:he(nn,`RPC '${e}' ${u} timed out`),p(new de(te.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const T=h.getStatus();if(he(nn,`RPC '${e}' ${u} failed with status:`,T,"response text:",h.getResponseText()),T>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const x=(function(B){const J=B.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(J)>=0?J:te.UNKNOWN})(k.status);p(new de(x,k.message))}else p(new de(te.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new de(te.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{he(nn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);he(nn,`RPC '${e}' ${u} sending request:`,o),h.send(n,"POST",_,i,15)}))}T_(e,n,i){const o=tg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const h=a.join("");he(nn,`Creating RPC '${e}' stream ${o}: ${h}`,f);const _=u.createWebChannel(h,f);this.I_(_);let E=!1,T=!1;const I=new dk({Ho:k=>{T?he(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(E||(he(nn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),he(nn,`RPC '${e}' stream ${o} sending:`,k),_.send(k))},Jo:()=>_.close()});return pu(_,vu.EventType.OPEN,(()=>{T||(he(nn,`RPC '${e}' stream ${o} transport opened.`),I.i_())})),pu(_,vu.EventType.CLOSE,(()=>{T||(T=!0,he(nn,`RPC '${e}' stream ${o} transport closed`),I.o_(),this.E_(_))})),pu(_,vu.EventType.ERROR,(k=>{T||(T=!0,za(nn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),I.o_(new de(te.UNAVAILABLE,"The operation could not be completed")))})),pu(_,vu.EventType.MESSAGE,(k=>{var x;if(!T){const D=k.data[0];We(!!D,16349);const B=D,J=(B==null?void 0:B.error)||((x=B[0])==null?void 0:x.error);if(J){he(nn,`RPC '${e}' stream ${o} received error:`,J);const G=J.status;let oe=(function(M){const b=Pt[M];if(b!==void 0)return fI(b)})(G),se=J.message;oe===void 0&&(oe=te.INTERNAL,se="Unknown error status: "+G+" with message "+J.message),T=!0,I.o_(new de(oe,se)),_.close()}else he(nn,`RPC '${e}' stream ${o} received:`,D),I.__(D)}})),Va.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return DC()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t){return new Va(t)}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t){return new y2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Va.c_=!1;class RI{constructor(e,n,i=1e3,o=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=o,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="PersistentStream";class wI{constructor(e,n,i,o,a,u,f,p){this.Ci=e,this.b_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Nr(n.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(p0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(he(p0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pk extends wI{constructor(e,n,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=E2(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Qi(u.readTime):Re.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=jm(this.serializer),n.addTarget=(function(a,u){let f;const p=u.target;if(f=Ym(p)?{documents:A2(a,p)}:{query:C2(a,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=pI(a,u.resumeToken);const h=Wm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Re.min())>0){f.readTime=hd(a,u.snapshotVersion.toTimestamp());const h=Wm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=R2(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=jm(this.serializer),n.removeTarget=e,this.K_(n)}}class mk extends wI{constructor(e,n,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=S2(e.writeResults,e.commitTime),i=Qi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>T2(this.serializer,i)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{}class yk extends gk{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Xm(n,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(te.UNKNOWN,a.toString())}))}jo(e,n,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,Xm(n,i),o,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _k(t,e,n,i){return new yk(t,e,n,i)}class vk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="RemoteStore";class Ek{constructor(e,n,i,o,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{ks(this)&&(he(Ts,"Restarting streams for network reachability change."),await(async function(p){const h=Ne(p);h.Ea.add(4),await Ju(h),h.Va.set("Unknown"),h.Ea.delete(4),await Qd(h)})(this))}))})),this.Va=new vk(i,o)}}async function Qd(t){if(ks(t))for(const e of t.Ra)await e(!0)}async function Ju(t){for(const e of t.Ra)await e(!1)}function NI(t,e){const n=Ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ny(n)?ty(n):nl(n).O_()&&ey(n,e))}function jg(t,e){const n=Ne(t),i=nl(n);n.Ia.delete(e),i.O_()&&bI(n,e),n.Ia.size===0&&(i.O_()?i.L_():ks(n)&&n.Va.set("Unknown"))}function ey(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).Z_(e)}function bI(t,e){t.da.$e(e),nl(t).X_(e)}function ty(t){t.da=new h2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.Va.ua()}function ny(t){return ks(t)&&!nl(t).x_()&&t.Ia.size>0}function ks(t){return Ne(t).Ea.size===0}function MI(t){t.da=void 0}async function Tk(t){t.Va.set("Online")}async function Sk(t){t.Ia.forEach(((e,n)=>{ey(t,e)}))}async function Ak(t,e){MI(t),ny(t)?(t.Va.ha(e),ty(t)):t.Va.set("Unknown")}async function Ck(t,e,n){if(t.Va.set("Online"),e instanceof hI&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const f of a.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.da.removeTarget(f))})(t,e)}catch(i){he(Ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await md(t,i)}else if(e instanceof Wf?t.da.Xe(e):e instanceof dI?t.da.st(e):t.da.tt(e),!n.isEqual(Re.min()))try{const i=await II(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const f=a.da.Tt(u);return f.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),bI(a,p);const E=new vo(_.target,p,h,_.sequenceNumber);ey(a,E)})),a.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(i){he(Ts,"Failed to raise snapshot:",i),await md(t,i)}}async function md(t,e,n){if(!el(e))throw e;t.Ea.add(1),await Ju(t),t.Va.set("Offline"),n||(n=()=>II(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{he(Ts,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qd(t)}))}function DI(t,e){return e().catch((n=>md(t,n,e)))}async function Wd(t){const e=Ne(t),n=Do(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Og;for(;Ik(e);)try{const o=await ok(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,Rk(e,o)}catch(o){await md(e,o)}PI(e)&&kI(e)}function Ik(t){return ks(t)&&t.Ta.length<10}function Rk(t,e){t.Ta.push(e);const n=Do(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function PI(t){return ks(t)&&!Do(t).x_()&&t.Ta.length>0}function kI(t){Do(t).start()}async function wk(t){Do(t).ra()}async function Nk(t){const e=Do(t);for(const n of t.Ta)e.ea(n.mutations)}async function bk(t,e,n){const i=t.Ta.shift(),o=Kg.from(i,e,n);await DI(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await Wd(t)}async function Mk(t,e){e&&Do(t).Y_&&await(async function(i,o){if((function(u){return c2(u)&&u!==te.ABORTED})(o.code)){const a=i.Ta.shift();Do(i).B_(),await DI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Wd(i)}})(t,e),PI(t)&&kI(t)}async function m0(t,e){const n=Ne(t);n.asyncQueue.verifyOperationInProgress(),he(Ts,"RemoteStore received new credentials");const i=ks(n);n.Ea.add(3),await Ju(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qd(n)}async function Dk(t,e){const n=Ne(t);e?(n.Ea.delete(2),await Qd(n)):e||(n.Ea.add(2),await Ju(n),n.Va.set("Unknown"))}function nl(t){return t.ma||(t.ma=(function(n,i,o){const a=Ne(n);return a.sa(),new pk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Zo:Tk.bind(null,t),Yo:Sk.bind(null,t),t_:Ak.bind(null,t),J_:Ck.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),ny(t)?ty(t):t.Va.set("Unknown")):(await t.ma.stop(),MI(t))}))),t.ma}function Do(t){return t.fa||(t.fa=(function(n,i,o){const a=Ne(n);return a.sa(),new mk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:wk.bind(null,t),t_:Mk.bind(null,t),ta:Nk.bind(null,t),na:bk.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Wd(t)):(await t.fa.stop(),t.Ta.length>0&&(he(Ts,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,i,o,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,a){const u=Date.now()+i,f=new iy(e,n,u,o,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(t,e){if(Nr("AsyncQueue",`${e}: ${t}`),el(t))return new de(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{static emptySet(e){return new Ua(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ve.comparator(n.key,i.key):(n,i)=>ve.comparator(n.key,i.key),this.keyedMap=Eu(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ua;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.ga=new pt(ve.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Qa{constructor(e,n,i,o,a,u,f,p,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,o,a){const u=[];return n.forEach((f=>{u.push({type:0,doc:f})})),new Qa(e,n,Ua.emptySet(n),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class kk{constructor(){this.queries=y0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ne(n),a=o.queries;o.queries=y0(),a.forEach(((u,f)=>{for(const p of f.ba)p.onError(i)}))})(this,new de(te.ABORTED,"Firestore shutting down"))}}function y0(){return new Ds((t=>jC(t)),Gd)}async function xI(t,e){const n=Ne(t);let i=3;const o=e.query;let a=n.queries.get(o);a?!a.Sa()&&e.Da()&&(i=2):(a=new Pk,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(o,!0);break;case 1:a.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const f=ry(u,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(f)}n.queries.set(o,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&oy(n)}async function VI(t,e){const n=Ne(t),i=e.query;let o=3;const a=n.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?o=e.Da()?0:1:!a.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function xk(t,e){const n=Ne(t);let i=!1;for(const o of e){const a=o.query,u=n.queries.get(a);if(u){for(const f of u.ba)f.Fa(o)&&(i=!0);u.wa=o}}i&&oy(n)}function Vk(t,e,n){const i=Ne(t),o=i.queries.get(e);if(o)for(const a of o.ba)a.onError(n);i.queries.delete(e)}function oy(t){t.Ca.forEach((e=>{e.next()}))}var ng,_0;(_0=ng||(ng={})).Ma="default",_0.Cache="cache";class UI{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.key=e}}class OI{constructor(e){this.key=e}}class Uk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.eu=eI(e),this.tu=new Ua(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new g0,o=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,u=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),I=zd(this.query,E)?E:null,k=!!T&&this.mutatedKeys.has(T.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;T&&I?T.data.isEqual(I.data)?k!==x&&(i.track({type:3,doc:I}),D=!0):this.su(T,I)||(i.track({type:2,doc:I}),D=!0,(p&&this.eu(I,p)>0||h&&this.eu(I,h)<0)&&(f=!0)):!T&&I?(i.track({type:0,doc:I}),D=!0):T&&!I&&(i.track({type:1,doc:T}),D=!0,(p||h)&&(f=!0)),D&&(I?(u=u.add(I),a=x?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Ss:f,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(I,k){const x=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:D})}};return x(I)-x(k)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const f=n&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,h=p!==this.Xa;return this.Xa=p,u.length!==0||h?{snapshot:new Qa(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new OI(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new LI(i))})),n}cu(e){this.Za=e.ks,this.Ya=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const sy="SyncEngine";class Lk{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Ok{constructor(e){this.key=e,this.hu=!1}}class Fk{constructor(e,n,i,o,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Ds((f=>jC(f)),Gd),this.Iu=new Map,this.Eu=new Set,this.Ru=new pt(ve.comparator),this.Au=new Map,this.Vu=new Qg,this.du={},this.mu=new Map,this.fu=Ja.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qk(t,e,n=!0){const i=zI(t);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await FI(i,e,n,!0),o}async function Bk(t,e){const n=zI(t);await FI(n,e,!0,!1)}async function FI(t,e,n,i){const o=await sk(t.localStore,Yi(e)),a=o.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let f;return i&&(f=await Hk(t,e,a,u==="current",o.resumeToken)),t.isPrimaryClient&&n&&NI(t.remoteStore,o),f}async function Hk(t,e,n,i,o){t.pu=(E,T,I)=>(async function(x,D,B,J){let G=D.view.ru(B);G.Ss&&(G=await c0(x.localStore,D.query,!1).then((({documents:M})=>D.view.ru(M,G))));const oe=J&&J.targetChanges.get(D.targetId),se=J&&J.targetMismatches.get(D.targetId)!=null,le=D.view.applyChanges(G,x.isPrimaryClient,oe,se);return E0(x,D.targetId,le.au),le.snapshot})(t,E,T,I);const a=await c0(t.localStore,e,!0),u=new Uk(e,a.ks),f=u.ru(a.documents),p=Yu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),h=u.applyChanges(f,t.isPrimaryClient,p);E0(t,n,h.au);const _=new Lk(e,n,u);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function Gk(t,e,n){const i=Ne(t),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!Gd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await eg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&jg(i.remoteStore,o.targetId),ig(i,o.targetId)})).catch(ja)):(ig(i,o.targetId),await eg(i.localStore,o.targetId,!0))}async function zk(t,e){const n=Ne(t),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),jg(n.remoteStore,i.targetId))}async function $k(t,e,n){const i=Zk(t);try{const o=await(function(u,f){const p=Ne(u),h=ut.now(),_=f.reduce(((I,k)=>I.add(k.key)),Fe());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=br(),x=Fe();return p.xs.getEntries(I,_).next((D=>{k=D,k.forEach(((B,J)=>{J.isValidDocument()||(x=x.add(B))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,k))).next((D=>{E=D;const B=[];for(const J of f){const G=o2(J,E.get(J.key).overlayedDocument);G!=null&&B.push(new Ps(J.key,G,$C(G.value.mapValue),Ji.exists(!0)))}return p.mutationQueue.addMutationBatch(I,h,B,f)})).next((D=>{T=D;const B=D.applyToLocalDocumentSet(E,x);return p.documentOverlayCache.saveOverlays(I,D.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:nI(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,p){let h=u.du[u.currentUser.toKey()];h||(h=new pt(Oe)),h=h.insert(f,p),u.du[u.currentUser.toKey()]=h})(i,o.batchId,n),await Qu(i,o.changes),await Wd(i.remoteStore)}catch(o){const a=ry(o,"Failed to persist write");n.reject(a)}}async function qI(t,e){const n=Ne(t);try{const i=await ik(n.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=n.Au.get(a);u&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?We(u.hu,14607):o.removedDocuments.size>0&&(We(u.hu,42227),u.hu=!1))})),await Qu(n,i,e)}catch(i){await ja(i)}}function v0(t,e,n){const i=Ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const p=Ne(u);p.onlineState=f;let h=!1;p.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(f)&&(h=!0)})),h&&oy(p)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Kk(t,e,n){const i=Ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new pt(ve.comparator);u=u.insert(a,on.newNoDocument(a,Re.min()));const f=Fe().add(a),p=new Yd(Re.min(),new Map,new pt(Oe),u,f);await qI(i,p),i.Ru=i.Ru.remove(a),i.Au.delete(e),ay(i)}else await eg(i.localStore,e,!1).then((()=>ig(i,e,n))).catch(ja)}async function Yk(t,e){const n=Ne(t),i=e.batch.batchId;try{const o=await nk(n.localStore,e);HI(n,i,null),BI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Qu(n,o)}catch(o){await ja(o)}}async function Jk(t,e,n){const i=Ne(t);try{const o=await(function(u,f){const p=Ne(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,f).next((E=>(We(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(h,E)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);HI(i,e,n),BI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Qu(i,o)}catch(o){await ja(o)}}function BI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function HI(t,e,n){const i=Ne(t);let o=i.du[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(n?a.reject(n):a.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function ig(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((i=>{t.Vu.containsKey(i)||GI(t,i)}))}function GI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(jg(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),ay(t))}function E0(t,e,n){for(const i of n)i instanceof LI?(t.Vu.addReference(i.key,e),Qk(t,i)):i instanceof OI?(he(sy,"Document no longer in limbo: "+i.key),t.Vu.removeReference(i.key,e),t.Vu.containsKey(i.key)||GI(t,i.key)):Se(19791,{wu:i})}function Qk(t,e){const n=e.key,i=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(i)||(he(sy,"New document in limbo: "+n),t.Eu.add(i),ay(t))}function ay(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ve(st.fromString(e)),i=t.fu.next();t.Au.set(i,new Ok(n)),t.Ru=t.Ru.insert(n,i),NI(t.remoteStore,new vo(Yi(Gg(n.path)),i,"TargetPurposeLimboResolution",qd.ce))}}async function Qu(t,e,n){const i=Ne(t),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{u.push(i.pu(p,e,n).then((h=>{var _;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(h){o.push(h);const E=Xg.Es(p.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.J_(o),await(async function(p,h){const _=Ne(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(h,(T=>re.forEach(T.Ts,(I=>_.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>re.forEach(T.Is,(I=>_.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!el(E))throw E;he(Zg,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const I=_.vs.get(T),k=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(k);_.vs=_.vs.insert(T,x)}}})(i.localStore,a))}async function Wk(t,e){const n=Ne(t);if(!n.currentUser.isEqual(e)){he(sy,"User change. New user:",e.toKey());const i=await CI(n.localStore,e);n.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((p=>{p.reject(new de(te.CANCELLED,u))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Qu(n,i.Ns)}}function Xk(t,e){const n=Ne(t),i=n.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let o=Fe();const a=n.Iu.get(e);if(!a)return o;for(const u of a){const f=n.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function zI(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kk.bind(null,e),e.Pu.J_=xk.bind(null,e.eventManager),e.Pu.yu=Vk.bind(null,e.eventManager),e}function Zk(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jk.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tk(this.persistence,new Z2,e.initialUser,this.serializer)}Cu(e){return new AI(Wg.Vi,this.serializer)}Du(e){return new lk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class jk extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof pd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new L2(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new AI((i=>pd.Vi(i,n)),this.serializer)}}class rg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>v0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wk.bind(null,this.syncEngine),await Dk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kk})()}createDatastore(e){const n=Jd(e.databaseInfo.databaseId),i=hk(e.databaseInfo);return _k(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,a,u,f){return new Ek(i,o,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>v0(this.syncEngine,n,0)),(function(){return h0.v()?new h0:new uk})())}createSyncEngine(e,n){return(function(o,a,u,f,p,h,_){const E=new Fk(o,a,u,f,p,h);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const a=Ne(o);he(Ts,"RemoteStore shutting down."),a.Ea.add(5),await Ju(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}rg.provider={build:()=>new rg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="FirestoreClient";class ex{constructor(e,n,i,o,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=Lg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{he(Po,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(he(Po,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ry(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Rm(t,e){t.asyncQueue.verifyOperationInProgress(),he(Po,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async o=>{i.isEqual(o)||(await CI(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function T0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tx(t);he(Po,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>m0(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,o)=>m0(e.remoteStore,o))),t._onlineComponents=e}async function tx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(Po,"Using user provided OfflineComponentProvider");try{await Rm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;za("Error using user provided cache. Falling back to memory cache: "+n),await Rm(t,new gd)}}else he(Po,"Using default OfflineComponentProvider"),await Rm(t,new jk(void 0));return t._offlineComponents}async function KI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(Po,"Using user provided OnlineComponentProvider"),await T0(t,t._uninitializedComponentsProvider._online)):(he(Po,"Using default OnlineComponentProvider"),await T0(t,new rg))),t._onlineComponents}function nx(t){return KI(t).then((e=>e.syncEngine))}async function YI(t){const e=await KI(t),n=e.eventManager;return n.onListen=qk.bind(null,e.syncEngine),n.onUnlisten=Gk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Bk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zk.bind(null,e.syncEngine),n}function ix(t,e,n={}){const i=new Cr;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,p,h){const _=new $I({next:T=>{_.Nu(),u.enqueueAndForget((()=>VI(a,E)));const I=T.docs.has(f);!I&&T.fromCache?h.reject(new de(te.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&T.fromCache&&p&&p.source==="server"?h.reject(new de(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new UI(Gg(f.path),_,{includeMetadataChanges:!0,Ka:!0});return xI(a,E)})(await YI(t),t.asyncQueue,e,n,i))),i.promise}function rx(t,e,n={}){const i=new Cr;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,p,h){const _=new $I({next:T=>{_.Nu(),u.enqueueAndForget((()=>VI(a,E))),T.fromCache&&p.source==="server"?h.reject(new de(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new UI(f,_,{includeMetadataChanges:!0,Ka:!0});return xI(a,E)})(await YI(t),t.asyncQueue,e,n,i))),i.promise}function ox(t,e){const n=new Cr;return t.asyncQueue.enqueueAndForget((async()=>$k(await nx(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="ComponentProvider",S0=new Map;function ax(t,e,n,i,o){return new wP(t,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,JI(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="firestore.googleapis.com",A0=!0;class C0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QI,this.ssl=A0}else this.host=e.host,this.ssl=e.ssl??A0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V2)throw new de(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xd{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new sP;switch(i.type){case"firstParty":return new cP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=S0.get(n);i&&(he(sx,"Removing Datastore"),S0.delete(n),i.terminate())})(this),Promise.resolve()}}function lx(t,e,n,i={}){var h;t=Ro(t,Xd);const o=ws(e),a=t._getSettings(),u={...a,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;o&&(kg(`https://${f}`),xg("Firestore",!0)),a.host!==QI&&a.host!==f&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:f,ssl:o,emulatorOptions:i};if(!Io(p,u)&&(t._setSettings(p),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=rn.MOCK_USER;else{_=yC(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new de(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new rn(T)}t._authCredentials=new aP(new kC(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class Vt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if($u(n,Vt._jsonSchema))return new Vt(e,i||null,new ve(st.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:xt("string",Vt._jsonSchemaVersion),referencePath:xt("string")};class Co extends xs{constructor(e,n,i){super(e,n,Gg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new ve(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function Y9(t,e,...n){if(t=qt(t),xC("collection","path",e),t instanceof Xd){const i=st.fromString(e,...n);return LT(i),new Co(t,null,i)}{if(!(t instanceof Vt||t instanceof Co))throw new de(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(st.fromString(e,...n));return LT(i),new Co(t.firestore,null,i)}}function J9(t,e,...n){if(t=qt(t),arguments.length===1&&(e=Lg.newId()),xC("doc","path",e),t instanceof Xd){const i=st.fromString(e,...n);return UT(i),new Vt(t,null,new ve(i))}{if(!(t instanceof Vt||t instanceof Co))throw new de(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(st.fromString(e,...n));return UT(i),new Vt(t.firestore,t instanceof Co?t.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RI(this,"async_queue_retry"),this._c=()=>{const i=Im();i&&he(I0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Cr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;he(I0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Nr("INTERNAL UNHANDLED ERROR: ",w0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=iy.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:w0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function w0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Wu extends Xd{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new R0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function Q9(t,e){const n=typeof t=="object"?t:Od(),i=typeof t=="string"?t:ld,o=xo(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=pC("firestore");a&&lx(o,...a)}return o}function ly(t){if(t._terminated)throw new de(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ux(t),t._firestoreClient}function ux(t){var i,o,a,u;const e=t._freezeSettings(),n=ax(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,(o=t._app)==null?void 0:o.options.apiKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ex(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(p){const h=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(en.fromBase64String(e))}catch(n){throw new de(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($u(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:xt("string",Qn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wi._jsonSchemaVersion}}static fromJSON(e){if($u(e,Wi._jsonSchema))return new Wi(e.latitude,e.longitude)}}Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:xt("string",Wi._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($u(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new gi(e.vectorValues);throw new de(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:xt("string",gi._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=/^__.*__$/;class fx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ku(e,this.data,n,this.fieldTransforms)}}function ZI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:t})}}class uy{constructor(e,n,i,o,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new uy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return yd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ZI(this.dataSource)&&cx.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class dx{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Jd(e)}createContext(e,n,i,o=!1){return new uy({dataSource:e,methodName:n,targetDoc:i,path:jt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jI(t){const e=t._freezeSettings(),n=Jd(t._databaseId);return new dx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hx(t,e,n,i,o,a={}){const u=t.createContext(a.merge||a.mergeFields?2:0,e,n,o);nR("Data must be an object, but it was:",u,i);const f=eR(i,u);let p,h;if(a.merge)p=new hi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const T=Zd(e,E,n);if(!u.contains(T))throw new de(te.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);yx(_,T)||_.push(T)}p=new hi(_),h=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,h=u.fieldTransforms;return new fx(new Jn(f),p,h)}function px(t,e,n,i=!1){return cy(n,t.createContext(i?4:3,e))}function cy(t,e){if(tR(t=qt(t)))return nR("Unsupported field value:",e,t),eR(t,e);if(t instanceof XI)return(function(i,o){if(!ZI(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const f of i){let p=cy(f,o.childContextForArray(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,o){if((i=qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ut.fromDate(i);return{timestampValue:hd(o.serializer,a)}}if(i instanceof ut){const a=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hd(o.serializer,a)}}if(i instanceof Wi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qn)return{bytesValue:pI(o.serializer,i._byteString)};if(i instanceof Vt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Jg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof gi)return(function(u,f){const p=u instanceof gi?u.toArray():u;return{mapValue:{fields:{[GC]:{stringValue:zC},[ud]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return zg(f.serializer,_)}))}}}}}})(i,o);if(TI(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Fd(i)}`)})(t,e)}function eR(t,e){const n={};return LC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,((i,o)=>{const a=cy(o,e.childContextForField(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function tR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof Wi||t instanceof Qn||t instanceof Vt||t instanceof XI||t instanceof gi||TI(t))}function nR(t,e,n){if(!tR(n)||!VC(n)){const i=Fd(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function Zd(t,e,n){if((e=qt(e))instanceof WI)return e._internalPath;if(typeof e=="string")return gx(t,e);throw yd("Field path arguments must be of type string or ",t,!1,void 0,n)}const mx=new RegExp("[~\\*/\\[\\]]");function gx(t,e,n){if(e.search(mx)>=0)throw yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new WI(...e.split("."))._internalPath}catch{throw yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yd(t,e,n,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new de(te.INVALID_ARGUMENT,f+t+p)}function yx(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{convertValue(e,n="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ms(e,((o,a)=>{i[o]=this.convertValue(a,n)})),i}convertVectorValue(e){var i,o,a;const n=(a=(o=(i=e.fields)==null?void 0:i[ud].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>St(u.doubleValue)));return new gi(n)}convertGeoPoint(e){return new Wi(St(e.latitude),St(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Hd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const n=No(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=st.fromString(e);We(EI(i),9688,{name:e});const o=new xu(i.get(1),i.get(3)),a=new ve(i.popFirst(5));return o.isEqual(n)||Nr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}const N0="@firebase/firestore",b0="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,i,o,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Zd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vx extends rR{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class oR extends fy{}function W9(t,e,...n){let i=[];e instanceof fy&&i.push(e),i=i.concat(n),(function(a){const u=a.filter((p=>p instanceof hy)).length,f=a.filter((p=>p instanceof dy)).length;if(u>1||u>0&&f>0)throw new de(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)t=o._apply(t);return t}class dy extends oR{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new dy(e,n,i)}_apply(e){const n=this._parse(e);return sR(e._query,n),new xs(e.firestore,e.converter,Jm(e._query,n))}_parse(e){const n=jI(e.firestore);return(function(a,u,f,p,h,_,E){let T;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){D0(E,_);const k=[];for(const x of E)k.push(M0(p,a,x));T={arrayValue:{values:k}}}else T=M0(p,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||D0(E,_),T=px(f,u,E,_==="in"||_==="not-in");return kt.create(h,_,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class hy extends fy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,a){let u=o;const f=a.getFlattenedFilters();for(const p of f)sR(u,p),u=Jm(u,p)})(e._query,n),new xs(e.firestore,e.converter,Jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends oR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new py(e,n)}_apply(e){const n=(function(o,a,u){if(o.startAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uu(a,u)})(e._query,this._field,this._direction);return new xs(e.firestore,e.converter,$P(e._query,n))}}function X9(t,e="asc"){const n=e,i=Zd("orderBy",t);return py._create(i,n)}function M0(t,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new de(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZC(e)&&n.indexOf("/")!==-1)throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(st.fromString(n));if(!ve.isDocumentKey(i))throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $T(t,new ve(i))}if(n instanceof Vt)return $T(t,n._key);throw new de(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(n)}.`)}function D0(t,e){if(!Array.isArray(t)||t.length===0)throw new de(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sR(t,e){const n=(function(o,a){for(const u of o)for(const f of u.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Tx(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends rR{constructor(e,n,i,o,a,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Zd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:xt("string",vs._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class Xf extends vs{data(e={}){return super.data(e)}}class La{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Su(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Xf(this._firestore,this._userDataWriter,i.key,i,new Su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const p=new Xf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Su(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const p=new Xf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Su(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:Sx(f.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=La._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Sx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */La._jsonSchemaVersion="firestore/querySnapshot/1.0",La._jsonSchema={type:xt("string",La._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){t=Ro(t,Vt);const e=Ro(t.firestore,Wu),n=ly(e);return ix(n,t._key).then((i=>Ax(e,t,i)))}function j9(t){t=Ro(t,xs);const e=Ro(t.firestore,Wu),n=ly(e),i=new iR(e);return Ex(t._query),rx(n,t._query).then((o=>new La(e,i,t,o)))}function eH(t,e,n){t=Ro(t,Vt);const i=Ro(t.firestore,Wu),o=Tx(t.converter,e),a=jI(i);return aR(i,[hx(a,"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Ji.none())])}function tH(t){return aR(Ro(t.firestore,Wu),[new $g(t._key,Ji.none())])}function aR(t,e){const n=ly(t);return ox(n,e)}function Ax(t,e,n){const i=n.docs.get(e._key),o=new iR(t);return new vs(t,o,e._key,i,new Su(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){oP(bs),vi(new Zn("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new Wu(new lP(i.getProvider("auth-internal")),new fP(u,i.getProvider("app-check-internal")),NP(u,o),u);return a={useFetchStreams:n,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),Sn(N0,b0,e),Sn(N0,b0,"esm2020")})();var Cx="firebase",Ix="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn(Cx,Ix,"app");const lR="@firebase/installations",my="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1e4,cR=`w:${my}`,fR="FIS_v2",Rx="https://firebaseinstallations.googleapis.com/v1",wx=3600*1e3,Nx="installations",bx="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ss=new Ns(Nx,bx,Mx);function dR(t){return t instanceof ei&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR({projectId:t}){return`${Rx}/projects/${t}/installations`}function pR(t){return{token:t.token,requestStatus:2,expiresIn:Px(t.expiresIn),creationTime:Date.now()}}async function mR(t,e){const i=(await e.json()).error;return Ss.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function gR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Dx(t,{refreshToken:e}){const n=gR(t);return n.append("Authorization",kx(e)),n}async function yR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Px(t){return Number(t.replace("s","000"))}function kx(t){return`${fR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=hR(t),o=gR(t),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={fid:n,authVersion:fR,appId:t.appId,sdkVersion:cR},f={method:"POST",headers:o,body:JSON.stringify(u)},p=await yR(()=>fetch(i,f));if(p.ok){const h=await p.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:pR(h.authToken)}}else throw await mR("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=/^[cdef][\w-]{21}$/,og="";function Lx(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Ox(t);return Ux.test(n)?n:og}catch{return og}}function Ox(t){return Vx(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new Map;function ER(t,e){const n=jd(t);TR(n,e),Fx(n,e)}function TR(t,e){const n=vR.get(t);if(n)for(const i of n)i(e)}function Fx(t,e){const n=qx();n&&n.postMessage({key:t,fid:e}),Bx()}let _s=null;function qx(){return!_s&&"BroadcastChannel"in self&&(_s=new BroadcastChannel("[Firebase] FID Change"),_s.onmessage=t=>{TR(t.data.key,t.data.fid)}),_s}function Bx(){vR.size===0&&_s&&(_s.close(),_s=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="firebase-installations-database",Gx=1,As="firebase-installations-store";let wm=null;function gy(){return wm||(wm=AC(Hx,Gx,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(As)}}})),wm}async function _d(t,e){const n=jd(t),o=(await gy()).transaction(As,"readwrite"),a=o.objectStore(As),u=await a.get(n);return await a.put(e,n),await o.done,(!u||u.fid!==e.fid)&&ER(t,e.fid),e}async function SR(t){const e=jd(t),i=(await gy()).transaction(As,"readwrite");await i.objectStore(As).delete(e),await i.done}async function eh(t,e){const n=jd(t),o=(await gy()).transaction(As,"readwrite"),a=o.objectStore(As),u=await a.get(n),f=e(u);return f===void 0?await a.delete(n):await a.put(f,n),await o.done,f&&(!u||u.fid!==f.fid)&&ER(t,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yy(t){let e;const n=await eh(t.appConfig,i=>{const o=zx(i),a=$x(t,o);return e=a.registrationPromise,a.installationEntry});return n.fid===og?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function zx(t){const e=t||{fid:Lx(),registrationStatus:0};return AR(e)}function $x(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ss.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Kx(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Yx(t)}:{installationEntry:e}}async function Kx(t,e){try{const n=await xx(t,e);return _d(t.appConfig,n)}catch(n){throw dR(n)&&n.customData.serverCode===409?await SR(t.appConfig):await _d(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Yx(t){let e=await P0(t.appConfig);for(;e.registrationStatus===1;)await _R(100),e=await P0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await yy(t);return i||n}return e}function P0(t){return eh(t,e=>{if(!e)throw Ss.create("installation-not-found");return AR(e)})}function AR(t){return Jx(t)?{fid:t.fid,registrationStatus:0}:t}function Jx(t){return t.registrationStatus===1&&t.registrationTime+uR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx({appConfig:t,heartbeatServiceProvider:e},n){const i=Wx(t,n),o=Dx(t,n),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={installation:{sdkVersion:cR,appId:t.appId}},f={method:"POST",headers:o,body:JSON.stringify(u)},p=await yR(()=>fetch(i,f));if(p.ok){const h=await p.json();return pR(h)}else throw await mR("Generate Auth Token",p)}function Wx(t,{fid:e}){return`${hR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _y(t,e=!1){let n;const i=await eh(t.appConfig,a=>{if(!CR(a))throw Ss.create("not-registered");const u=a.authToken;if(!e&&jx(u))return a;if(u.requestStatus===1)return n=Xx(t,e),a;{if(!navigator.onLine)throw Ss.create("app-offline");const f=tV(a);return n=Zx(t,f),f}});return n?await n:i.authToken}async function Xx(t,e){let n=await k0(t.appConfig);for(;n.authToken.requestStatus===1;)await _R(100),n=await k0(t.appConfig);const i=n.authToken;return i.requestStatus===0?_y(t,e):i}function k0(t){return eh(t,e=>{if(!CR(e))throw Ss.create("not-registered");const n=e.authToken;return nV(n)?{...e,authToken:{requestStatus:0}}:e})}async function Zx(t,e){try{const n=await Qx(t,e),i={...e,authToken:n};return await _d(t.appConfig,i),n}catch(n){if(dR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await SR(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await _d(t.appConfig,i)}throw n}}function CR(t){return t!==void 0&&t.registrationStatus===2}function jx(t){return t.requestStatus===2&&!eV(t)}function eV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+wx}function tV(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function nV(t){return t.requestStatus===1&&t.requestTime+uR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iV(t){const e=t,{installationEntry:n,registrationPromise:i}=await yy(e);return i?i.catch(console.error):_y(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(t,e=!1){const n=t;return await oV(n),(await _y(n,e)).token}async function oV(t){const{registrationPromise:e}=await yy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){if(!t||!t.options)throw Nm("App Configuration");if(!t.name)throw Nm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Nm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Nm(t){return Ss.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="installations",aV="installations-internal",lV=t=>{const e=t.getProvider("app").getImmediate(),n=sV(e),i=xo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},uV=t=>{const e=t.getProvider("app").getImmediate(),n=xo(e,IR).getImmediate();return{getId:()=>iV(n),getToken:o=>rV(n,o)}};function cV(){vi(new Zn(IR,lV,"PUBLIC")),vi(new Zn(aV,uV,"PRIVATE"))}cV();Sn(lR,my);Sn(lR,my,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="analytics",fV="firebase_id",dV="origin",hV=60*1e3,pV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new Ld("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kn=new Ns("analytics","Analytics",mV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){if(!t.startsWith(vy)){const e=kn.create("invalid-gtag-resource",{gtagURL:t});return dn.warn(e.message),""}return t}function RR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function _V(t,e){const n=yV("firebase-js-sdk-policy",{createScriptURL:gV}),i=document.createElement("script"),o=`${vy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function vV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function EV(t,e,n,i,o,a){const u=i[o];try{if(u)await e[u];else{const p=(await RR(n)).find(h=>h.measurementId===o);p&&await e[p.appId]}}catch(f){dn.error(f)}t("config",o,a)}async function TV(t,e,n,i,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const f=await RR(n);for(const p of u){const h=f.find(E=>E.measurementId===p),_=h&&e[h.appId];if(_)a.push(_);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",i,o||{})}catch(a){dn.error(a)}}function SV(t,e,n,i){async function o(a,...u){try{if(a==="event"){const[f,p]=u;await TV(t,e,n,f,p)}else if(a==="config"){const[f,p]=u;await EV(t,e,n,i,f,p)}else if(a==="consent"){const[f,p]=u;t("consent",f,p)}else if(a==="get"){const[f,p,h]=u;t("get",f,p,h)}else if(a==="set"){const[f]=u;t("set",f)}else t(a,...u)}catch(f){dn.error(f)}}return o}function AV(t,e,n,i,o){let a=function(...u){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=SV(a,t,e,n),{gtagCore:a,wrappedGtag:window[o]}}function CV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(vy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=30,RV=1e3;class wV{constructor(e={},n=RV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wR=new wV;function NV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function bV(t){var u;const{appId:e,apiKey:n}=t,i={method:"GET",headers:NV(n)},o=pV.replace("{app-id}",e),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let f="";try{const p=await a.json();(u=p.error)!=null&&u.message&&(f=p.error.message)}catch{}throw kn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:f})}return a.json()}async function MV(t,e=wR,n){const{appId:i,apiKey:o,measurementId:a}=t.options;if(!i)throw kn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:i};throw kn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new kV;return setTimeout(async()=>{f.abort()},hV),NR({appId:i,apiKey:o,measurementId:a},u,f,e)}async function NR(t,{throttleEndTimeMillis:e,backoffCount:n},i,o=wR){var f;const{appId:a,measurementId:u}=t;try{await DV(i,e)}catch(p){if(u)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:u};throw p}try{const p=await bV(t);return o.deleteThrottleMetadata(a),p}catch(p){const h=p;if(!PV(h)){if(o.deleteThrottleMetadata(a),u)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw p}const _=Number((f=h==null?void 0:h.customData)==null?void 0:f.httpStatus)===503?CT(n,o.intervalMillis,IV):CT(n,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return o.setThrottleMetadata(a,E),dn.debug(`Calling attemptFetch again in ${_} millis`),NR(t,E,i,o)}}function DV(t,e){return new Promise((n,i)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(a),i(kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function PV(t){if(!(t instanceof ei)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class kV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function xV(t,e,n,i,o){if(o&&o.global){t("event",n,i);return}else{const a=await e,u={...i,send_to:a};t("event",n,u)}}async function VV(t,e,n,i){if(i&&i.global){const o={};for(const a of Object.keys(n))o[`user_properties.${a}`]=n[a];return t("set",o),Promise.resolve()}else{const o=await e;t("config",o,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(){if(vC())try{await EC()}catch(t){return dn.warn(kn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dn.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function LV(t,e,n,i,o,a,u){const f=MV(t);f.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>dn.error(T)),e.push(f);const p=UV().then(T=>{if(T)return i.getId()}),[h,_]=await Promise.all([f,p]);CV(a)||_V(a,h.measurementId),o("js",new Date);const E=(u==null?void 0:u.config)??{};return E[dV]="firebase",E.update=!0,_!=null&&(E[fV]=_),o("config",h.measurementId,E),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.app=e}_delete(){return delete Oa[this.app.options.appId],Promise.resolve()}}let Oa={},x0=[];const V0={};let bm="dataLayer",FV="gtag",U0,Ey,L0=!1;function qV(){const t=[];if(_C()&&t.push("This is a browser extension environment."),FM()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,o)=>`(${o+1}) ${i}`).join(" "),n=kn.create("invalid-analytics-context",{errorInfo:e});dn.warn(n.message)}}function BV(t,e,n){qV();const i=t.options.appId;if(!i)throw kn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kn.create("no-api-key");if(Oa[i]!=null)throw kn.create("already-exists",{id:i});if(!L0){vV(bm);const{wrappedGtag:a,gtagCore:u}=AV(Oa,x0,V0,bm,FV);Ey=a,U0=u,L0=!0}return Oa[i]=LV(t,x0,V0,e,U0,bm,n),new OV(t)}function nH(t=Od()){t=qt(t);const e=xo(t,vd);return e.isInitialized()?e.getImmediate():HV(t)}function HV(t,e={}){const n=xo(t,vd);if(n.isInitialized()){const o=n.getImmediate();if(Io(e,n.getOptions()))return o;throw kn.create("already-initialized")}return n.initialize({options:e})}function GV(t,e,n){t=qt(t),VV(Ey,Oa[t.app.options.appId],e,n).catch(i=>dn.error(i))}function zV(t,e,n,i){t=qt(t),xV(Ey,Oa[t.app.options.appId],e,n,i).catch(o=>dn.error(o))}const O0="@firebase/analytics",F0="0.10.19";function $V(){vi(new Zn(vd,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return BV(i,o,n)},"PUBLIC")),vi(new Zn("analytics-internal",t,"PRIVATE")),Sn(O0,F0),Sn(O0,F0,"esm2020");function t(e){try{const n=e.getProvider(vd).getImmediate();return{logEvent:(i,o,a)=>zV(n,i,o,a),setUserProperties:(i,o)=>GV(n,i,o)}}catch(n){throw kn.create("interop-component-reg-failed",{reason:n})}}}$V();function bR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KV=bR,MR=new Ns("auth","Firebase",bR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Ld("@firebase/auth");function YV(t,...e){Ed.logLevel<=Le.WARN&&Ed.warn(`Auth (${bs}): ${t}`,...e)}function Zf(t,...e){Ed.logLevel<=Le.ERROR&&Ed.error(`Auth (${bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,...e){throw Ty(t,...e)}function Xi(t,...e){return Ty(t,...e)}function DR(t,e,n){const i={...KV(),[e]:n};return new Ns("auth","Firebase",i).create(e,{appName:t.name})}function Ir(t){return DR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ty(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return MR.create(t,...e)}function Te(t,e,...n){if(!t)throw Ty(e,...n)}function Tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zf(e),new Error(e)}function Mr(t,e){t||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function JV(){return q0()==="http:"||q0()==="https:"}function q0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JV()||_C()||"connection"in navigator)?navigator.onLine:!0}function WV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=kM()||UM()}get(){return QV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jV=new Xu(3e4,6e4);function Vo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Uo(t,e,n,i,o={}){return kR(t,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=zu({key:t.config.apiKey,...u}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:p,...a};return VM()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&ws(t.emulatorConfig.host)&&(h.credentials="include"),PR.fetch()(await xR(t,t.config.apiHost,n,f),h)})}async function kR(t,e,n){t._canInitEmulator=!1;const i={...XV,...e};try{const o=new tU(t),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Lf(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[p,h]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(t,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Lf(t,"email-already-in-use",u);if(p==="USER_DISABLED")throw Lf(t,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw DR(t,_,h);Ti(t,_)}}catch(o){if(o instanceof ei)throw o;Ti(t,"network-request-failed",{message:String(o)})}}async function Zu(t,e,n,i,o={}){const a=await Uo(t,e,n,i,o);return"mfaPendingCredential"in a&&Ti(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function xR(t,e,n,i){const o=`${e}${n}?${i}`,a=t,u=a.config.emulator?Sy(t.config,o):`${t.config.apiScheme}://${o}`;return ZV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function eU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xi(this.auth,"network-request-failed")),jV.get())})}}function Lf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Xi(t,e,i);return o.customData._tokenResponse=n,o}function B0(t){return t!==void 0&&t.enterprise!==void 0}class nU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iU(t,e){return Uo(t,"GET","/v2/recaptchaConfig",Vo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(t,e){return Uo(t,"POST","/v1/accounts:delete",e)}async function Td(t,e){return Uo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oU(t,e=!1){const n=qt(t),i=await n.getIdToken(e),o=Ay(i);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:bu(Mm(o.auth_time)),issuedAtTime:bu(Mm(o.iat)),expirationTime:bu(Mm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Mm(t){return Number(t)*1e3}function Ay(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{const o=dC(n);return o?JSON.parse(o):(Zf("Failed to decode base64 JWT payload"),null)}catch(o){return Zf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function H0(t){const e=Ay(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ei&&sU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function sU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bu(this.lastLoginAt),this.creationTime=bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(t){var E;const e=t.auth,n=await t.getIdToken(),i=await Fu(t,Td(e,{idToken:n}));Te(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=(E=o.providerUserInfo)!=null&&E.length?VR(o.providerUserInfo):[],u=uU(t.providerData,a),f=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),h=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ag(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,_)}async function lU(t){const e=qt(t);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uU(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function VR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(t,e){const n=await kR(t,{},async()=>{const i=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=t.config,u=await xR(t,o,"/v1/token",`key=${a}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return t.emulatorConfig&&ws(t.emulatorConfig.host)&&(p.credentials="include"),PR.fetch()(u,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fU(t,e){return Uo(t,"POST","/v2/accounts:revokeToken",Vo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=H0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:a}=await cU(e,n);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:a}=n,u=new Fa;return i&&(Te(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Te(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Te(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pi{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new aU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ag(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Fu(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oU(this,e)}reload(){return lU(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await Fu(this,rU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,a=n.phoneNumber??void 0,u=n.photoURL??void 0,f=n.tenantId??void 0,p=n._redirectEventId??void 0,h=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:k,stsTokenManager:x}=n;Te(E&&x,e,"internal-error");const D=Fa.fromJSON(this.name,x);Te(typeof E=="string",e,"internal-error"),po(i,e.name),po(o,e.name),Te(typeof T=="boolean",e,"internal-error"),Te(typeof I=="boolean",e,"internal-error"),po(a,e.name),po(u,e.name),po(f,e.name),po(p,e.name),po(h,e.name),po(_,e.name);const B=new pi({uid:E,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:D,createdAt:h,lastLoginAt:_});return k&&Array.isArray(k)&&(B.providerData=k.map(J=>({...J}))),p&&(B._redirectEventId=p),B}static async _fromIdTokenResponse(e,n,i=!1){const o=new Fa;o.updateFromServerResponse(n);const a=new pi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Sd(a),a}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?VR(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Fa;f.updateFromIdToken(i);const p=new pi({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ag(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;function Sr(t){Mr(t instanceof Function,"Expected a class definition");let e=G0.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,G0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}UR.type="NONE";const z0=UR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e,n){return`firebase:${t}:${e}:${n}`}class qa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=jf(this.userKey,o.apiKey,a),this.fullPersistenceKey=jf("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?pi._fromGetAccountInfoResponse(this.auth,n,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new qa(Sr(z0),e,i);const o=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||Sr(z0);const u=jf(i,e.config.apiKey,e.name);let f=null;for(const h of n)try{const _=await h._get(u);if(_){let E;if(typeof _=="string"){const T=await Td(e,{idToken:_}).catch(()=>{});if(!T)break;E=await pi._fromGetAccountInfoResponse(e,T,_)}else E=pi._fromJSON(e,_);h!==a&&(f=E),a=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new qa(a,e,i):(a=p[0],f&&await a._set(u,f.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new qa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HR(e))return"Blackberry";if(GR(e))return"Webos";if(OR(e))return"Safari";if((e.includes("chrome/")||FR(e))&&!e.includes("edge/"))return"Chrome";if(BR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function LR(t=an()){return/firefox\//i.test(t)}function OR(t=an()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FR(t=an()){return/crios\//i.test(t)}function qR(t=an()){return/iemobile/i.test(t)}function BR(t=an()){return/android/i.test(t)}function HR(t=an()){return/blackberry/i.test(t)}function GR(t=an()){return/webos/i.test(t)}function Cy(t=an()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dU(t=an()){var e;return Cy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function hU(){return LM()&&document.documentMode===10}function zR(t=an()){return Cy(t)||BR(t)||GR(t)||HR(t)||/windows phone/i.test(t)||qR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t,e=[]){let n;switch(t){case"Browser":n=$0(an());break;case"Worker":n=`${$0(an())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,f)=>{try{const p=e(a);u(p)}catch(p){f(p)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(t,e={}){return Uo(t,"GET","/v2/passwordPolicy",Vo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=6;class yU{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K0(this),this.idTokenSubscription=new K0(this),this.beforeStateQueue=new pU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),i=await pi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Pn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(Ir(this));const n=e?qt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mU(this),n=new yU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ns("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await fU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(n);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$R(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&YV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vs(t){return qt(t)}class K0{constructor(e){this.auth=e,this.observer=null,this.addObserver=zM(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vU(t){th=t}function KR(t){return th.loadJS(t)}function EU(){return th.recaptchaEnterpriseScript}function TU(){return th.gapiScript}function SU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class AU{constructor(){this.enterprise=new CU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const IU="recaptcha-enterprise",YR="NO_RECAPTCHA";class RU{constructor(e){this.type=IU,this.auth=Vs(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,f)=>{iU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const h=new nU(p);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(p=>{f(p)})})}function o(a,u,f){const p=window.grecaptcha;B0(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(YR)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AU().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(f=>{if(!n&&B0(window.grecaptcha))o(f,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=EU();p.length!==0&&(p+=f),KR(p).then(()=>{o(f,a,u)}).catch(h=>{u(h)})}}).catch(f=>{u(f)})})}}async function Y0(t,e,n,i=!1,o=!1){const a=new RU(t);let u;if(o)u=YR;else try{u=await a.verify(n)}catch{u=await a.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,h=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function lg(t,e,n,i,o){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Y0(t,e,n,n==="getOobCode");return i(t,u)}else return i(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Y0(t,e,n,n==="getOobCode");return i(t,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t,e){const n=xo(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(Io(a,e??{}))return o;Ti(o,"already-initialized")}return n.initialize({options:e})}function NU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function bU(t,e,n){const i=Vs(t);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=JR(e),{host:u,port:f}=MU(e),p=f===null?"":`:${f}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(Io(h,i.config.emulator)&&Io(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,ws(u)?(kg(`${a}//${u}${p}`),xg("Auth",!0)):DU()}function JR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MU(t){const e=JR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:J0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:J0(u)}}}function J0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function PU(t,e){return Uo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e){return Zu(t,"POST","/v1/accounts:signInWithPassword",Vo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",Vo(t,e))}async function VU(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",Vo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends Iy{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new qu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new qu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lg(e,n,"signInWithPassword",kU);case"emailLink":return xU(e,{email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lg(e,i,"signUpPassword",PU);case"emailLink":return VU(e,{idToken:n,email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e){return Zu(t,"POST","/v1/accounts:signInWithIdp",Vo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU="http://localhost";class Cs extends Iy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=n;if(!i||!o)return null;const u=new Cs(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Ba(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ba(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ba(e,n)}buildRequest(){const e={requestUri:UU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OU(t){const e=yu(_u(t)).link,n=e?yu(_u(e)).deep_link_id:null,i=yu(_u(t)).deep_link_id;return(i?yu(_u(i)).link:null)||i||n||e||t}class Ry{constructor(e){const n=yu(_u(e)),i=n.apiKey??null,o=n.oobCode??null,a=LU(n.mode??null);Te(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=OU(e);try{return new Ry(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(e,n){return qu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ry.parseLink(n);return Te(i,"argument-error"),qu._fromEmailAndCode(e,i.code,i.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends QR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends ju{constructor(){super("facebook.com")}static credential(e){return Cs._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cs._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return go.credential(n,i)}catch{return null}}}go.GOOGLE_SIGN_IN_METHOD="google.com";go.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends ju{constructor(){super("github.com")}static credential(e){return Cs._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends ju{constructor(){super("twitter.com")}static credential(e,n){return Cs._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return _o.credential(n,i)}catch{return null}}}_o.TWITTER_SIGN_IN_METHOD="twitter.com";_o.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){return Zu(t,"POST","/v1/accounts:signUp",Vo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const a=await pi._fromIdTokenResponse(e,i,o),u=Q0(i);return new Is({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Q0(i);return new Is({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Q0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends ei{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Ad(e,n,i,o)}}function WR(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,a,e,i):a})}async function qU(t,e,n=!1){const i=await Fu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Is._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e,n=!1){const{auth:i}=t;if(Pn(i.app))return Promise.reject(Ir(i));const o="reauthenticate";try{const a=await Fu(t,WR(i,o,e,t),n);Te(a.idToken,i,"internal-error");const u=Ay(a.idToken);Te(u,i,"internal-error");const{sub:f}=u;return Te(t.uid===f,i,"user-mismatch"),Is._forOperation(t,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ti(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e,n=!1){if(Pn(t.app))return Promise.reject(Ir(t));const i="signIn",o=await WR(t,i,e),a=await Is._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(a.user),a}async function HU(t,e){return XR(Vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t){const e=Vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iH(t,e,n){if(Pn(t.app))return Promise.reject(Ir(t));const i=Vs(t),u=await lg(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FU).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&ZR(t),p}),f=await Is._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function rH(t,e,n){return Pn(t.app)?Promise.reject(Ir(t)):HU(qt(t),il.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ZR(t),i})}function GU(t,e,n,i){return qt(t).onIdTokenChanged(e,n,i)}function zU(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function oH(t,e,n,i){return qt(t).onAuthStateChanged(e,n,i)}function sH(t){return qt(t).signOut()}const Cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=1e3,KU=10;class ew extends jR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);hU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,KU):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},$U)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ew.type="LOCAL";const YU=ew;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends jR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tw.type="SESSION";const nw=tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new nh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:a}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async h=>h(n.origin,a)),p=await JU(f);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((f,p)=>{const h=wy("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(T.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return window}function WU(t){Zi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}async function XU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function jU(){return iw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firebaseLocalStorageDb",eL=1,Id="firebaseLocalStorage",ow="fbase_key";class ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ih(t,e){return t.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function tL(){const t=indexedDB.deleteDatabase(rw);return new ec(t).toPromise()}function ug(){const t=indexedDB.open(rw,eL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Id,{keyPath:ow})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Id)?e(i):(i.close(),await tL(),e(await ug()))})})}async function W0(t,e,n){const i=ih(t,!0).put({[ow]:e,value:n});return new ec(i).toPromise()}async function nL(t,e){const n=ih(t,!1).get(e),i=await new ec(n).toPromise();return i===void 0?null:i.value}function X0(t,e){const n=ih(t,!0).delete(e);return new ec(n).toPromise()}const iL=800,rL=3;class sw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>rL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(jU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await XU(),!this.activeServiceWorker)return;this.sender=new QU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await W0(e,Cd,"1"),await X0(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>W0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>nL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>X0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=ih(o,!1).getAll();return new ec(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sw.type="LOCAL";const oL=sw;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t,e){return e?Sr(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny extends Iy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aL(t){return XR(t.auth,new Ny(t),t.bypassAuthState)}function lL(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),BU(n,new Ny(t),t.bypassAuthState)}async function uL(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),qU(n,new Ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aL;case"linkViaPopup":case"linkViaRedirect":return uL;case"reauthViaPopup":case"reauthViaRedirect":return lL;default:Ti(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Xu(2e3,1e4);class Pa extends aw{constructor(e,n,i,o,a){super(e,n,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cL.get())};e()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="pendingRedirect",ed=new Map;class dL extends aw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const i=await hL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hL(t,e){const n=gL(e),i=mL(t);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function pL(t,e){ed.set(t._key(),e)}function mL(t){return Sr(t._redirectPersistence)}function gL(t){return jf(fL,t.config.apiKey,t.name)}async function yL(t,e,n=!1){if(Pn(t.app))return Promise.reject(Ir(t));const i=Vs(t),o=sL(i,e),u=await new dL(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=600*1e3;class vL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!lw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Xi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_L&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(t,e={}){return Uo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AL=/^https?/;async function CL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TL(t);for(const n of e)try{if(IL(n))return}catch{}Ti(t,"unauthorized-domain")}function IL(t){const e=sg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!AL.test(n))return!1;if(SL.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new Xu(3e4,6e4);function j0(){const t=Zi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wL(t){return new Promise((e,n)=>{var o,a,u;function i(){j0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j0(),n(Xi(t,"network-request-failed"))},timeout:RL.get()})}if((a=(o=Zi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Zi().gapi)!=null&&u.load)i();else{const f=SU("iframefcb");return Zi()[f]=()=>{gapi.load?i():n(Xi(t,"network-request-failed"))},KR(`${TU()}?onload=${f}`).catch(p=>n(p))}}).catch(e=>{throw td=null,e})}let td=null;function NL(t){return td=td||wL(t),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=new Xu(5e3,15e3),ML="__/auth/iframe",DL="emulator/auth/iframe",PL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xL(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sy(e,DL):`https://${t.config.authDomain}/${ML}`,i={apiKey:e.apiKey,appName:t.name,v:bs},o=kL.get(t.config.apiHost);o&&(i.eid=o);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${zu(i).slice(1)}`}async function VL(t){const e=await NL(t),n=Zi().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:xL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PL,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Xi(t,"network-request-failed"),f=Zi().setTimeout(()=>{a(u)},bL.get());function p(){Zi().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LL=500,OL=600,FL="_blank",qL="http://localhost";class eS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BL(t,e,n,i=LL,o=OL){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...UL,width:i.toString(),height:o.toString(),top:a,left:u},h=an().toLowerCase();n&&(f=FR(h)?FL:n),LR(h)&&(e=e||qL,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[I,k])=>`${T}${I}=${k},`,"");if(dU(h)&&f!=="_self")return HL(e||"",f),new eS(null);const E=window.open(e||"",f,_);Te(E,t,"popup-blocked");try{E.focus()}catch{}return new eS(E)}function HL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="__/auth/handler",zL="emulator/auth/handler",$L=encodeURIComponent("fac");async function tS(t,e,n,i,o,a){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:bs,eventId:o};if(e instanceof QR){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",GM(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof ju){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}t.tenantId&&(u.tid=t.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await t._getAppCheckToken(),h=p?`#${$L}=${encodeURIComponent(p)}`:"";return`${KL(t)}?${zu(f).slice(1)}${h}`}function KL({config:t}){return t.emulator?Sy(t,zL):`https://${t.authDomain}/${GL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="webStorageSupport";class YL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nw,this._completeRedirectFn=yL,this._overrideRedirectResult=pL}async _openPopup(e,n,i,o){var u;Mr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await tS(e,n,i,sg(),o);return BL(e,a,wy())}async _openRedirect(e,n,i,o){await this._originValidation(e);const a=await tS(e,n,i,sg(),o);return WU(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(Mr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await VL(e),i=new vL(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dm,{type:Dm},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Dm];a!==void 0&&n(!!a),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zR()||OR()||Cy()}}const JL=YL;var nS="@firebase/auth",iS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XL(t){vi(new Zn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Te(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$R(t)},h=new _U(i,o,a,p);return NU(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),vi(new Zn("auth-internal",e=>{const n=Vs(e.getProvider("auth").getImmediate());return(i=>new QL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(nS,iS,WL(t)),Sn(nS,iS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=300,jL=gC("authIdTokenMaxAge")||ZL;let rS=null;const eO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>jL)return;const o=n==null?void 0:n.token;rS!==o&&(rS=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aH(t=Od()){const e=xo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wU(t,{popupRedirectResolver:JL,persistence:[oL,YU,nw]}),i=gC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=eO(a.toString());zU(n,u,()=>u(n.currentUser)),GU(n,f=>u(f))}}const o=hC("auth");return o&&bU(n,`http://${o}`),n}function tO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=o=>{const a=Xi("internal-error");a.customData=o,n(a)},i.type="text/javascript",i.charset="UTF-8",tO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firebasestorage.googleapis.com",nO="storageBucket",iO=120*1e3,rO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ei{constructor(e,n,i=0){super(Pm(e),`Firebase Storage: ${n} (${Pm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var er;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(er||(er={}));function Pm(t){return"storage/"+t}function oO(){const t="An unknown error occurred, please check the error payload for server response.";return new tr(er.UNKNOWN,t)}function sO(){return new tr(er.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aO(){return new tr(er.CANCELED,"User canceled the upload/download.")}function lO(t){return new tr(er.INVALID_URL,"Invalid URL '"+t+"'.")}function uO(t){return new tr(er.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oS(t){return new tr(er.INVALID_ARGUMENT,t)}function cw(){return new tr(er.APP_DELETED,"The Firebase app was deleted.")}function cO(t){return new tr(er.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=mi.makeFromUrl(e,n)}catch{return new mi(e,"")}if(i.path==="")return i;throw uO(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function h(oe){oe.path_=decodeURIComponent(oe.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",I=new RegExp(`^https?://${E}/${_}/b/${o}/o${T}`,"i"),k={bucket:1,path:3},x=n===uw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",B=new RegExp(`^https?://${x}/${o}/${D}`,"i"),G=[{regex:f,indices:p,postModify:a},{regex:I,indices:k,postModify:h},{regex:B,indices:{bucket:1,path:2},postModify:h}];for(let oe=0;oe<G.length;oe++){const se=G[oe],le=se.regex.exec(e);if(le){const M=le[se.indices.bucket];let b=le[se.indices.path];b||(b=""),i=new mi(M,b),se.postModify(i);break}}if(i==null)throw lO(e);return i}}class fO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t,e,n){let i=1,o=null,a=null,u=!1,f=0;function p(){return f===2}let h=!1;function _(...D){h||(h=!0,e.apply(null,D))}function E(D){o=setTimeout(()=>{o=null,t(I,p())},D)}function T(){a&&clearTimeout(a)}function I(D,...B){if(h){T();return}if(D){T(),_.call(null,D,...B);return}if(p()||u){T(),_.call(null,D,...B);return}i<64&&(i*=2);let G;f===1?(f=2,G=0):G=(i+Math.random())*1e3,E(G)}let k=!1;function x(D){k||(k=!0,T(),!h&&(o!==null?(D||(f=2),clearTimeout(o),E(0)):D||(f=1)))}return E(0),a=setTimeout(()=>{u=!0,x(!0)},n),x}function hO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){return t!==void 0}function sS(t,e,n,i){if(i<e)throw oS(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw oS(`Invalid value for '${t}'. Expected ${n} or less.`)}function mO(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const o=e(i)+"="+e(t[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Rd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rd||(Rd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n,i,o,a,u,f,p,h,_,E,T=!0,I=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=p,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,x)=>{this.resolve_=k,this.reject_=x,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Of(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=f=>{const p=f.loaded,h=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const f=a.getErrorCode()===Rd.NO_ERROR,p=a.getStatus();if(!f||gO(p,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Rd.ABORT;i(!1,new Of(!1,null,_));return}const h=this.successCodes_.indexOf(p)!==-1;i(!0,new Of(h,a))})},n=(i,o)=>{const a=this.resolve_,u=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());pO(p)?a(p):a()}catch(p){u(p)}else if(f!==null){const p=oO();p.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,p)):u(p)}else if(o.canceled){const p=this.appDelete_?cw():aO();u(p)}else{const p=sO();u(p)}};this.canceled_?n(!1,new Of(!1,null,!0)):this.backoffId_=dO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Of{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function _O(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function vO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function SO(t,e,n,i,o,a,u=!0,f=!1){const p=mO(t.urlParams),h=t.url+p,_=Object.assign({},t.headers);return EO(_,e),_O(_,n),vO(_,a),TO(_,i),new yO(h,t.method,_,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,u,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this._service=e,n instanceof mi?this._location=n:this._location=mi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wd(e,n)}get root(){const e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CO(this._location.path)}get storage(){return this._service}get parent(){const e=AO(this._location.path);if(e===null)return null;const n=new mi(this._location.bucket,e);return new wd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cO(e)}}function aS(t,e){const n=e==null?void 0:e[nO];return n==null?null:mi.makeFromBucketSpec(n,t)}function IO(t,e,n,i={}){t.host=`${e}:${n}`;const o=ws(e);o&&(kg(`https://${t.host}/b`),xg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:yC(a,t.app.options.projectId))}class RO{constructor(e,n,i,o,a,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=uw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iO,this._maxUploadRetryTime=rO,this._requests=new Set,o!=null?this._bucket=mi.makeFromBucketSpec(o,this._host):this._bucket=aS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,e):this._bucket=aS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wd(this,e)}_makeRequest(e,n,i,o,a=!0){if(this._deleted)return new fO(cw());{const u=SO(e,this._appId,i,o,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const lS="@firebase/storage",uS="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="storage";function lH(t=Od(),e){t=qt(t);const i=xo(t,fw).getImmediate({identifier:e}),o=pC("storage");return o&&wO(i,...o),i}function wO(t,e,n,i={}){IO(t,e,n,i)}function NO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new RO(n,i,o,e,bs)}function bO(){vi(new Zn(fw,NO,"PUBLIC").setMultipleInstances(!0)),Sn(lS,uS,""),Sn(lS,uS,"esm2020")}bO();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=t=>{const e=DO(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=Z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...f},p)=>Z.createElement("svg",{ref:p,...PO,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:dw("lucide",o),...!a&&!kO(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,_])=>Z.createElement(h,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(t,e)=>{const n=Z.forwardRef(({className:i,...o},a)=>Z.createElement(xO,{ref:a,iconNode:e,className:dw(`lucide-${MO(cS(t))}`,`lucide-${t}`,i),...o}));return n.displayName=cS(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],uH=Ce("arrow-left",VO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cH=Ce("arrow-right",UO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],fH=Ce("award",LO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],dH=Ce("bell",OO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],hH=Ce("book-open",FO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],pH=Ce("briefcase",qO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],mH=Ce("building-2",BO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],gH=Ce("building",HO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yH=Ce("calendar",GO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_H=Ce("check",zO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vH=Ce("chevron-down",$O);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],EH=Ce("circle-alert",KO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],TH=Ce("circle-check-big",YO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],SH=Ce("circle-x",JO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],AH=Ce("clock",QO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],CH=Ce("copy",WO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],IH=Ce("dollar-sign",XO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],RH=Ce("download",ZO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],wH=Ce("external-link",jO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NH=Ce("eye",e4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bH=Ce("file-text",t4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],MH=Ce("funnel",n4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],DH=Ce("key",i4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],PH=Ce("layout-dashboard",r4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],kH=Ce("link-2",o4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xH=Ce("lock",s4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],VH=Ce("log-in",a4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UH=Ce("log-out",l4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],LH=Ce("mail",u4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],OH=Ce("message-square",c4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],FH=Ce("octagon-alert",f4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qH=Ce("plus",d4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],BH=Ce("save",h4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],HH=Ce("search",p4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],GH=Ce("send",m4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zH=Ce("shield-check",g4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$H=Ce("sparkles",y4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],KH=Ce("square-pen",_4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],YH=Ce("table",v4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],JH=Ce("trash-2",E4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],QH=Ce("triangle-alert",T4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],WH=Ce("upload",S4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],XH=Ce("user-plus",A4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ZH=Ce("user",C4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jH=Ce("users",I4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],eG=Ce("x",R4);var w4={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let N4,b4;function M4(){return{geminiUrl:N4,vertexUrl:b4}}function D4(t,e,n,i){var o,a;if(!(t!=null&&t.baseUrl)){const u=M4();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pr{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const p=t[f];if(Array.isArray(n))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),n[h])}else for(const h of p)m(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const p=t[f];m(p[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function P4(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),a=i.split("."),u=new Set;let f=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){f=p;break}if(f!==-1&&a.length>f)for(let p=f;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}cg(t,o,a,0,u)}}function cg(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=t;if(u in f&&Array.isArray(f[u]))for(const p of f[u])cg(p,e,n,i+1,o)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),p={};for(const h of f)p[h]=u[h];for(const[h,_]of Object.entries(p)){const E=[];for(const T of n.slice(i))T==="*"?E.push(h):E.push(T);m(u,E,_)}for(const h of f)delete u[h]}}else{const u=t;a in u&&cg(u[a],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function by(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k4(t){const e={},n=d(t,["operationName"]);n!=null&&m(e,["operationName"],n);const i=d(t,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function x4(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],U4(u)),e}function V4(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["response"]);return u!=null&&m(e,["response"],L4(u)),e}function U4(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>O4(u))),m(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function L4(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>F4(u))),m(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function O4(t){const e={},n=d(t,["video"]);return n!=null&&m(e,["video"],$4(n)),e}function F4(t){const e={},n=d(t,["_self"]);return n!=null&&m(e,["video"],K4(n)),e}function q4(t){const e={},n=d(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function B4(t){const e={},n=d(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function H4(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["response"]);return u!=null&&m(e,["response"],G4(u)),e}function G4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&m(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function hw(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["response"]);return u!=null&&m(e,["response"],z4(u)),e}function z4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&m(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function $4(t){const e={},n=d(t,["uri"]);n!=null&&m(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&m(e,["videoBytes"],by(i));const o=d(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function K4(t){const e={},n=d(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],by(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fS;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(fS||(fS={}));var dS;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(dS||(dS={}));var hS;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(hS||(hS={}));var Eo;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Eo||(Eo={}));var pS;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(pS||(pS={}));var mS;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(mS||(mS={}));var gS;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(gS||(gS={}));var yS;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(yS||(yS={}));var _S;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(_S||(_S={}));var vS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vS||(vS={}));var ES;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ES||(ES={}));var TS;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(TS||(TS={}));var SS;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(SS||(SS={}));var AS;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(AS||(AS={}));var CS;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(CS||(CS={}));var IS;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(IS||(IS={}));var RS;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(RS||(RS={}));var wS;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(wS||(wS={}));var NS;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(NS||(NS={}));var bS;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(bS||(bS={}));var MS;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(MS||(MS={}));var Nd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Nd||(Nd={}));var DS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(DS||(DS={}));var PS;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(PS||(PS={}));var kS;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kS||(kS={}));var fg;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(fg||(fg={}));var xS;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(xS||(xS={}));var VS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(VS||(VS={}));var dg;(function(t){t.COLLECTION="COLLECTION"})(dg||(dg={}));var US;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(US||(US={}));var LS;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(LS||(LS={}));var OS;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(OS||(OS={}));var FS;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(FS||(FS={}));var qS;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(qS||(qS={}));var BS;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(BS||(BS={}));var HS;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(HS||(HS={}));var GS;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(GS||(GS={}));var zS;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(zS||(zS={}));var $S;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})($S||($S={}));var KS;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(KS||(KS={}));var YS;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(YS||(YS={}));var JS;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(JS||(JS={}));var QS;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(QS||(QS={}));var WS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(WS||(WS={}));var XS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(XS||(XS={}));var ZS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(ZS||(ZS={}));var jS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(jS||(jS={}));var eA;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(eA||(eA={}));var tA;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(tA||(tA={}));var nA;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(nA||(nA={}));var iA;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iA||(iA={}));var rA;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rA||(rA={}));var oA;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(oA||(oA={}));var sA;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sA||(sA={}));var aA;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(aA||(aA={}));var lA;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(lA||(lA={}));var ka;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ka||(ka={}));class hg{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class mu{get text(){var e,n,i,o,a,u,f,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const T of(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[I,k]of Object.entries(T))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(k!==null||k!==void 0)&&E.push(I);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,n,i,o,a,u,f,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[T,I]of Object.entries(E))T!=="inlineData"&&(I!==null||I!==void 0)&&_.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,o,a,u,f,p;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,o,a,u,f,p,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,o,a,u,f,p,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class uA{}class cA{}class Y4{}class J4{}class Q4{}class W4{}class fA{}class dA{}class hA{}class X4{}class bd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new bd;let o;const a=e;return n?o=V4(a):o=x4(a),Object.assign(i,o),i}}class pA{}class mA{}class gA{}class yA{}class Z4{}class j4{}class e6{}class My{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new My,a=H4(e);return Object.assign(i,a),i}}class t6{}class n6{}class i6{}class _A{}class r6{get text(){var e,n,i;let o="",a=!1;const u=[];for(const f of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(f))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,p]of Object.entries(u))f!=="inlineData"&&p!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class o6{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Dy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Dy,a=hw(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function pw(t,e){const n=Ye(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function mw(t){return Array.isArray(t)?t.map(e=>Md(e)):[Md(t)]}function Md(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function gw(t){const e=Md(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yw(t){const e=Md(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vA(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function _w(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>vA(e)):[vA(t)]}function pg(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function EA(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function TA(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function sn(t){if(t==null)throw new Error("ContentUnion is required");return pg(t)?t:{role:"user",parts:_w(t)}}function Py(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=sn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=sn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>sn(n)):[sn(e)]}function Wn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(EA(t)||TA(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(t)]}const e=[],n=[],i=pg(t[0]);for(const o of t){const a=pg(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(EA(o)||TA(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:_w(n)}),e}function s6(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Eo).includes(n[0].toUpperCase())?n[0].toUpperCase():Eo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Eo).includes(i.toUpperCase())?i.toUpperCase():Eo.TYPE_UNSPECIFIED})}}function Ha(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&s6(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Eo).includes(f.toUpperCase())?f.toUpperCase():Eo.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Ha(f);else if(i.includes(u)){const p=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}p.push(Ha(h))}e[u]=p}else if(o.includes(u)){const p={};for(const[h,_]of Object.entries(f))p[h]=Ha(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=f}return e}function ky(t){return Ha(t)}function xy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vy(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function rl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ha(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ha(e.response));return t}function ol(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function a6(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function kr(t,e){if(typeof e!="string")throw new Error("name must be a string");return a6(t,e,"cachedContents")}function vw(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Lo(t){return by(t)}function l6(t){return t!=null&&typeof t=="object"&&"name"in t}function u6(t){return t!=null&&typeof t=="object"&&"video"in t}function c6(t){return t!=null&&typeof t=="object"&&"uri"in t}function Ew(t){var e;let n;if(l6(t)&&(n=t.name),!(c6(t)&&(n=t.uri,n===void 0))&&!(u6(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Tw(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Sw(t){for(const e of["models","tunedModels","publisherModels"])if(f6(t,e))return t[e];return[]}function f6(t,e){return t!==null&&typeof t=="object"&&e in t}function d6(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function h6(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=d6(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function Aw(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function p6(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Cw(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function sl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Iw(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m6(t){const e={},n=d(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const i=d(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Q6(u))),m(e,["inlinedResponses"],a)}const o=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function g6(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const i=d(t,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function y6(t){const e={},n=d(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const i=d(t,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const o=d(t,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function nd(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const o=d(t,["metadata","state"]);o!=null&&m(e,["state"],Iw(o));const a=d(t,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=d(t,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const f=d(t,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const p=d(t,["metadata","model"]);p!=null&&m(e,["model"],p);const h=d(t,["metadata","output"]);return h!=null&&m(e,["dest"],m6(Cw(h))),e}function mg(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(t,["state"]);o!=null&&m(e,["state"],Iw(o));const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["createTime"]);u!=null&&m(e,["createTime"],u);const f=d(t,["startTime"]);f!=null&&m(e,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(e,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=d(t,["model"]);_!=null&&m(e,["model"],_);const E=d(t,["inputConfig"]);E!=null&&m(e,["src"],_6(E));const T=d(t,["outputConfig"]);T!=null&&m(e,["dest"],g6(Cw(T)));const I=d(t,["completionStats"]);return I!=null&&m(e,["completionStats"],I),e}function _6(t){const e={},n=d(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const i=d(t,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const o=d(t,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function v6(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&m(n,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>J6(t,u))),m(n,["requests","requests"],a)}return n}function E6(t){const e={},n=d(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const i=d(t,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const o=d(t,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function T6(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function S6(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],sl(t,i)),n}function A6(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],sl(t,i)),n}function C6(t){const e={},n=d(t,["content"]);n!=null&&m(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],I6(i));const o=d(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=d(t,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=d(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(t,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=d(t,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function I6(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function Rw(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>n3(a))),m(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&m(e,["role"],i),e}function R6(t,e){const n={},i=d(t,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function w6(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(t,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],y6(p6(o))),n}function SA(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["src"]);o!=null&&m(n,["batch","inputConfig"],v6(t,Aw(t,o)));const a=d(e,["config"]);return a!=null&&R6(a,n),n}function N6(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["model"],Ye(t,i));const o=d(e,["src"]);o!=null&&m(n,["inputConfig"],E6(Aw(t,o)));const a=d(e,["config"]);return a!=null&&w6(a,n),n}function b6(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),n}function M6(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["src"]);o!=null&&m(n,["batch","inputConfig"],L6(t,o));const a=d(e,["config"]);return a!=null&&b6(a,n),n}function D6(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],sl(t,i)),n}function P6(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],sl(t,i)),n}function k6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);return a!=null&&m(e,["error"],a),e}function x6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);return a!=null&&m(e,["error"],a),e}function V6(t,e){const n={},i=d(e,["contents"]);if(i!=null){let a=Py(t,i);Array.isArray(a)&&(a=a.map(u=>u)),m(n,["requests[]","request","content"],a)}const o=d(e,["config"]);return o!=null&&(m(n,["_self"],U6(o,n)),P4(n,{"requests[].*":"requests[].request.*"})),n}function U6(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function L6(t,e){const n={},i=d(e,["fileName"]);i!=null&&m(n,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&m(n,["requests"],V6(t,o)),n}function O6(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function F6(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const i=d(t,["args"]);i!=null&&m(e,["args"],i);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function q6(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const i=d(t,["mode"]);if(i!=null&&m(e,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function B6(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&m(n,["systemInstruction"],Rw(sn(o)));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=d(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=d(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=d(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const x=d(e,["seed"]);x!=null&&m(i,["seed"],x);const D=d(e,["responseMimeType"]);D!=null&&m(i,["responseMimeType"],D);const B=d(e,["responseSchema"]);B!=null&&m(i,["responseSchema"],ky(B));const J=d(e,["responseJsonSchema"]);if(J!=null&&m(i,["responseJsonSchema"],J),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=d(e,["safetySettings"]);if(n!==void 0&&G!=null){let P=G;Array.isArray(P)&&(P=P.map(qe=>i3(qe))),m(n,["safetySettings"],P)}const oe=d(e,["tools"]);if(n!==void 0&&oe!=null){let P=ol(oe);Array.isArray(P)&&(P=P.map(qe=>o3(rl(qe)))),m(n,["tools"],P)}const se=d(e,["toolConfig"]);if(n!==void 0&&se!=null&&m(n,["toolConfig"],r3(se)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=d(e,["cachedContent"]);n!==void 0&&le!=null&&m(n,["cachedContent"],kr(t,le));const M=d(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const b=d(e,["mediaResolution"]);b!=null&&m(i,["mediaResolution"],b);const N=d(e,["speechConfig"]);if(N!=null&&m(i,["speechConfig"],xy(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=d(e,["thinkingConfig"]);U!=null&&m(i,["thinkingConfig"],U);const L=d(e,["imageConfig"]);L!=null&&m(i,["imageConfig"],Y6(L));const q=d(e,["enableEnhancedCivicAnswers"]);if(q!=null&&m(i,["enableEnhancedCivicAnswers"],q),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function H6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>C6(h))),m(e,["candidates"],p)}const o=d(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=d(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=d(t,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function G6(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],sl(t,i)),n}function z6(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],sl(t,i)),n}function $6(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function K6(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function Y6(t){const e={},n=d(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function J6(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["request","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let f=Wn(o);Array.isArray(f)&&(f=f.map(p=>Rw(p))),m(n,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&m(n,["metadata"],a);const u=d(e,["config"]);return u!=null&&m(n,["request","generationConfig"],B6(t,u,d(n,["request"],{}))),n}function Q6(t){const e={},n=d(t,["response"]);n!=null&&m(e,["response"],H6(n));const i=d(t,["error"]);return i!=null&&m(e,["error"],i),e}function W6(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function X6(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=d(t,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),n}function Z6(t){const e={},n=d(t,["config"]);return n!=null&&W6(n,e),e}function j6(t){const e={},n=d(t,["config"]);return n!=null&&X6(n,e),e}function e3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>nd(u))),m(e,["batchJobs"],a)}return e}function t3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>mg(u))),m(e,["batchJobs"],a)}return e}function n3(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&m(e,["fileData"],O6(a));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],F6(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],T6(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function i3(t){const e={},n=d(t,["category"]);if(n!=null&&m(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function r3(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const i=d(t,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],q6(i)),e}function o3(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],$6(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],K6(f));const p=d(t,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Dr||(Dr={}));class Us{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s3 extends Pr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Us(Dr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=SA(this.apiClient,e),i=n._url,o=fe("{model}:batchGenerateContent",i),f=n.batch.inputConfig.requests,p=f.requests,h=[];for(const _ of p){const E=Object.assign({},_);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=T,E.request=I}h.push(E)}return f.requests=h,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=N6(this.apiClient,e);return f=fe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>mg(_))}else{const h=SA(this.apiClient,e);return f=fe("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>nd(_))}}async createEmbeddingsInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=M6(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>nd(p))}}async get(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=z6(this.apiClient,e);return f=fe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>mg(_))}else{const h=G6(this.apiClient,e);return f=fe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>nd(_))}}async cancel(e){var n,i,o,a;let u="",f={};if(this.apiClient.isVertexAI()){const p=A6(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=S6(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=j6(e);return f=fe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=t3(_),T=new _A;return Object.assign(T,E),T})}else{const h=Z6(e);return f=fe("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=e3(_),T=new _A;return Object.assign(T,E),T})}}async delete(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=P6(this.apiClient,e);return f=fe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>x6(_))}else{const h=D6(this.apiClient,e);return f=fe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>k6(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a3(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function AA(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>M3(a))),m(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&m(e,["role"],i),e}function l3(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=d(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let _=Wn(u);Array.isArray(_)&&(_=_.map(E=>AA(E))),m(e,["contents"],_)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],AA(sn(f)));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>P3(E))),m(e,["tools"],_)}const h=d(t,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],D3(h)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function u3(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=d(t,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let E=Wn(u);Array.isArray(E)&&(E=E.map(T=>T)),m(e,["contents"],E)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],sn(f));const p=d(t,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(T=>k3(T))),m(e,["tools"],E)}const h=d(t,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=d(t,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),n}function c3(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["model"],pw(t,i));const o=d(e,["config"]);return o!=null&&l3(o,n),n}function f3(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["model"],pw(t,i));const o=d(e,["config"]);return o!=null&&u3(o,n),n}function d3(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],kr(t,i)),n}function h3(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],kr(t,i)),n}function p3(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function m3(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function g3(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function y3(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const i=d(t,["args"]);i!=null&&m(e,["args"],i);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _3(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const i=d(t,["mode"]);if(i!=null&&m(e,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function v3(t){const e={},n=d(t,["description"]);n!=null&&m(e,["description"],n);const i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&m(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function E3(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],kr(t,i)),n}function T3(t,e){const n={},i=d(e,["name"]);return i!=null&&m(n,["_url","name"],kr(t,i)),n}function S3(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function A3(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function C3(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function I3(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function R3(t){const e={},n=d(t,["config"]);return n!=null&&C3(n,e),e}function w3(t){const e={},n=d(t,["config"]);return n!=null&&I3(n,e),e}function N3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function b3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function M3(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&m(e,["fileData"],g3(a));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],y3(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],a3(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function D3(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const i=d(t,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],_3(i)),e}function P3(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],S3(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],A3(f));const p=d(t,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function k3(t){const e={},n=d(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=d(t,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(t,["codeExecution"]);o!=null&&m(e,["codeExecution"],o);const a=d(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=d(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>v3(T))),m(e,["functionDeclarations"],E)}const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const h=d(t,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function x3(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),n}function V3(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),n}function U3(t,e){const n={},i=d(e,["name"]);i!=null&&m(n,["_url","name"],kr(t,i));const o=d(e,["config"]);return o!=null&&x3(o,n),n}function L3(t,e){const n={},i=d(e,["name"]);i!=null&&m(n,["_url","name"],kr(t,i));const o=d(e,["config"]);return o!=null&&V3(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O3 extends Pr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Us(Dr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=f3(this.apiClient,e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=c3(this.apiClient,e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=T3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=E3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=h3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=m3(_),T=new gA;return Object.assign(T,E),T})}else{const h=d3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=p3(_),T=new gA;return Object.assign(T,E),T})}}async update(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=L3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=U3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=w3(e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=b3(_),T=new yA;return Object.assign(T,E),T})}else{const h=R3(e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=N3(_),T=new yA;return Object.assign(T,E),T})}}}function Dd(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function CA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(t){return this instanceof Ie?(this.v=t,this):new Ie(t)}function yi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(k){return Promise.resolve(k).then(I,E)}}function f(I,k){i[I]&&(o[I]=function(x){return new Promise(function(D,B){a.push([I,x,D,B])>1||p(I,x)})},k&&(o[I]=k(o[I])))}function p(I,k){try{h(i[I](k))}catch(x){T(a[0][3],x)}}function h(I){I.value instanceof Ie?Promise.resolve(I.value.v).then(_,E):T(a[0][2],I)}function _(I){p("next",I)}function E(I){p("throw",I)}function T(I,k){I(k),a.shift(),a.length&&p(a[0][0],a[0][1])}}function _i(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof CA=="function"?CA(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(f,p){u=t[a](u),o(f,p,u.done,u.value)})}}function o(a,u,f,p){Promise.resolve(p).then(function(h){a({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ww(n)}function ww(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function q3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function IA(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!ww(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class B3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new H3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class H3{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),q3(a)}async sendMessage(e){var n;await this.sendPromise;const i=sn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,f;const p=await o,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];_!=null&&(T=(f=_.slice(E))!==null&&f!==void 0?f:[]);const I=h?[h]:[];this.recordHistory(i,I,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=sn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?IA(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return yi(this,arguments,function*(){var o,a,u,f,p,h;const _=[];try{for(var E=!0,T=_i(e),I;I=yield Ie(T.next()),o=I.done,!o;E=!0){f=I.value,E=!1;const k=f;if(F3(k)){const x=(h=(p=k.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;x!==void 0&&_.push(x)}yield yield Ie(k)}}catch(k){a={error:k}}finally{try{!E&&!o&&(u=T.return)&&(yield Ie(u.call(T)))}finally{if(a)throw a.error}}this.recordHistory(n,_)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...IA(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Bu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G3(t){const e={},n=d(t,["file"]);return n!=null&&m(e,["file"],n),e}function z3(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function $3(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","file"],Ew(n)),e}function K3(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function Y3(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","file"],Ew(n)),e}function J3(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function Q3(t){const e={},n=d(t,["config"]);return n!=null&&J3(n,e),e}function W3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X3 extends Pr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Us(Dr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Q3(e);return a=fe("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=W3(p),_=new t6;return Object.assign(_,h),_})}}async createInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=G3(e);return a=fe("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=z3(p),_=new n6;return Object.assign(_,h),_})}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Y3(e);return a=fe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$3(e);return a=fe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=K3(p),_=new i6;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function id(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Z3(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>pF(a))),m(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&m(e,["role"],i),e}function j3(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function eF(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const i=d(t,["args"]);i!=null&&m(e,["args"],i);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tF(t){const e={},n=d(t,["description"]);n!=null&&m(e,["description"],n);const i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&m(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function nF(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=d(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=d(t,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=d(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(t,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=d(t,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=d(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=d(t,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=d(t,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const x=d(t,["responseSchema"]);x!=null&&m(e,["responseSchema"],x);const D=d(t,["routingConfig"]);D!=null&&m(e,["routingConfig"],D);const B=d(t,["seed"]);B!=null&&m(e,["seed"],B);const J=d(t,["speechConfig"]);J!=null&&m(e,["speechConfig"],J);const G=d(t,["stopSequences"]);G!=null&&m(e,["stopSequences"],G);const oe=d(t,["temperature"]);oe!=null&&m(e,["temperature"],oe);const se=d(t,["thinkingConfig"]);se!=null&&m(e,["thinkingConfig"],se);const le=d(t,["topK"]);le!=null&&m(e,["topK"],le);const M=d(t,["topP"]);if(M!=null&&m(e,["topP"],M),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iF(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function rF(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function oF(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Vy(E));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(t,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],Z3(sn(k)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let le=ol(x);Array.isArray(le)&&(le=le.map(M=>gF(rl(M)))),m(e,["setup","tools"],le)}const D=d(t,["sessionResumption"]);e!==void 0&&D!=null&&m(e,["setup","sessionResumption"],mF(D));const B=d(t,["inputAudioTranscription"]);e!==void 0&&B!=null&&m(e,["setup","inputAudioTranscription"],B);const J=d(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&m(e,["setup","outputAudioTranscription"],J);const G=d(t,["realtimeInputConfig"]);e!==void 0&&G!=null&&m(e,["setup","realtimeInputConfig"],G);const oe=d(t,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const se=d(t,["proactivity"]);if(e!==void 0&&se!=null&&m(e,["setup","proactivity"],se),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function sF(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],nF(i));const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Vy(E));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(t,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],sn(k));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let M=ol(x);Array.isArray(M)&&(M=M.map(b=>yF(rl(b)))),m(e,["setup","tools"],M)}const D=d(t,["sessionResumption"]);e!==void 0&&D!=null&&m(e,["setup","sessionResumption"],D);const B=d(t,["inputAudioTranscription"]);e!==void 0&&B!=null&&m(e,["setup","inputAudioTranscription"],B);const J=d(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&m(e,["setup","outputAudioTranscription"],J);const G=d(t,["realtimeInputConfig"]);e!==void 0&&G!=null&&m(e,["setup","realtimeInputConfig"],G);const oe=d(t,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const se=d(t,["proactivity"]);e!==void 0&&se!=null&&m(e,["setup","proactivity"],se);const le=d(t,["explicitVadSignal"]);return e!==void 0&&le!=null&&m(e,["setup","explicitVadSignal"],le),n}function aF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["setup","model"],Ye(t,i));const o=d(e,["config"]);return o!=null&&m(n,["config"],oF(o,n)),n}function lF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["setup","model"],Ye(t,i));const o=d(e,["config"]);return o!=null&&m(n,["config"],sF(o,n)),n}function uF(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function cF(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["weightedPrompts"],i)}return e}function fF(t){const e={},n=d(t,["media"]);if(n!=null){let h=mw(n);Array.isArray(h)&&(h=h.map(_=>id(_))),m(e,["mediaChunks"],h)}const i=d(t,["audio"]);i!=null&&m(e,["audio"],id(yw(i)));const o=d(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=d(t,["video"]);a!=null&&m(e,["video"],id(gw(a)));const u=d(t,["text"]);u!=null&&m(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function dF(t){const e={},n=d(t,["media"]);if(n!=null){let h=mw(n);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=d(t,["audio"]);i!=null&&m(e,["audio"],yw(i));const o=d(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=d(t,["video"]);a!=null&&m(e,["video"],gw(a));const u=d(t,["text"]);u!=null&&m(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(t,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function hF(t){const e={},n=d(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const i=d(t,["serverContent"]);i!=null&&m(e,["serverContent"],i);const o=d(t,["toolCall"]);o!=null&&m(e,["toolCall"],o);const a=d(t,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=d(t,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],_F(u));const f=d(t,["goAway"]);f!=null&&m(e,["goAway"],f);const p=d(t,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=d(t,["voiceActivityDetectionSignal"]);h!=null&&m(e,["voiceActivityDetectionSignal"],h);const _=d(t,["voiceActivity"]);return _!=null&&m(e,["voiceActivity"],vF(_)),e}function pF(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&m(e,["fileData"],j3(a));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],eF(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],id(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function mF(t){const e={},n=d(t,["handle"]);if(n!=null&&m(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gF(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],iF(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],rF(f));const p=d(t,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function yF(t){const e={},n=d(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=d(t,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(t,["codeExecution"]);o!=null&&m(e,["codeExecution"],o);const a=d(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=d(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>tF(T))),m(e,["functionDeclarations"],E)}const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const h=d(t,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function _F(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const i=d(t,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const o=d(t,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const a=d(t,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=d(t,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const f=d(t,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const p=d(t,["promptTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["promptTokensDetails"],I)}const h=d(t,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["cacheTokensDetails"],I)}const _=d(t,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["responseTokensDetails"],I)}const E=d(t,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["toolUsePromptTokensDetails"],I)}const T=d(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function vF(t){const e={},n=d(t,["type"]);return n!=null&&m(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EF(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function TF(t){const e={},n=d(t,["content"]);n!=null&&m(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],SF(i));const o=d(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=d(t,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=d(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(t,["index"]);p!=null&&m(e,["index"],p);const h=d(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(t,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=d(t,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function SF(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function AF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let a=Wn(o);Array.isArray(a)&&(a=a.map(u=>u)),m(n,["contents"],a)}return n}function CF(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["tokensInfo"],o)}return e}function IF(t){const e={},n=d(t,["values"]);n!=null&&m(e,["values"],n);const i=d(t,["statistics"]);return i!=null&&m(e,["statistics"],RF(i)),e}function RF(t){const e={},n=d(t,["truncated"]);n!=null&&m(e,["truncated"],n);const i=d(t,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function rh(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Vq(a))),m(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&m(e,["role"],i),e}function wF(t){const e={},n=d(t,["controlType"]);n!=null&&m(e,["controlType"],n);const i=d(t,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function NF(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function bF(t,e){const n={},i=d(t,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],sn(i));const o=d(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>Dw(f))),m(e,["tools"],u)}const a=d(t,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],Eq(a)),n}function MF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>rh(f))),m(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&NF(a),n}function DF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>f)),m(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&bF(a,n),n}function PF(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const o=d(t,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function kF(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function xF(t,e){const n={},i=d(e,["model"]);return i!=null&&m(n,["_url","name"],Ye(t,i)),n}function VF(t,e){const n={},i=d(e,["model"]);return i!=null&&m(n,["_url","name"],Ye(t,i)),n}function UF(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function LF(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function OF(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=d(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=d(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=d(t,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=d(t,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const D=d(t,["addWatermark"]);e!==void 0&&D!=null&&m(e,["parameters","addWatermark"],D);const B=d(t,["labels"]);e!==void 0&&B!=null&&m(e,["labels"],B);const J=d(t,["editMode"]);e!==void 0&&J!=null&&m(e,["parameters","editMode"],J);const G=d(t,["baseSteps"]);return e!==void 0&&G!=null&&m(e,["parameters","editConfig","baseSteps"],G),n}function FF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const a=d(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>Bq(p))),m(n,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&OF(u,n),n}function qF(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>oh(a))),m(e,["generatedImages"],o)}return e}function BF(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function HF(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const a=d(t,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const u=d(t,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),n}function GF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let f=Py(t,o);Array.isArray(f)&&(f=f.map(p=>p)),m(n,["requests[]","content"],f)}const a=d(e,["config"]);a!=null&&BF(a,n);const u=d(e,["model"]);return u!==void 0&&m(n,["requests[]","model"],Ye(t,u)),n}function zF(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let u=Py(t,o);Array.isArray(u)&&(u=u.map(f=>f)),m(n,["instances[]","content"],u)}const a=d(e,["config"]);return a!=null&&HF(a,n),n}function $F(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["embeddings"],a)}const o=d(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function KF(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>IF(u))),m(e,["embeddings"],a)}const o=d(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function YF(t){const e={},n=d(t,["endpoint"]);n!=null&&m(e,["name"],n);const i=d(t,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function JF(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function QF(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const i=d(t,["args"]);i!=null&&m(e,["args"],i);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WF(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const i=d(t,["mode"]);if(i!=null&&m(e,["mode"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XF(t){const e={},n=d(t,["description"]);n!=null&&m(e,["description"],n);const i=d(t,["name"]);i!=null&&m(e,["name"],i);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(t,["response"]);u!=null&&m(e,["response"],u);const f=d(t,["responseJsonSchema"]);if(f!=null&&m(e,["responseJsonSchema"],f),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ZF(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&m(n,["systemInstruction"],rh(sn(o)));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=d(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=d(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=d(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const x=d(e,["seed"]);x!=null&&m(i,["seed"],x);const D=d(e,["responseMimeType"]);D!=null&&m(i,["responseMimeType"],D);const B=d(e,["responseSchema"]);B!=null&&m(i,["responseSchema"],ky(B));const J=d(e,["responseJsonSchema"]);if(J!=null&&m(i,["responseJsonSchema"],J),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=d(e,["safetySettings"]);if(n!==void 0&&G!=null){let P=G;Array.isArray(P)&&(P=P.map(qe=>Hq(qe))),m(n,["safetySettings"],P)}const oe=d(e,["tools"]);if(n!==void 0&&oe!=null){let P=ol(oe);Array.isArray(P)&&(P=P.map(qe=>Qq(rl(qe)))),m(n,["tools"],P)}const se=d(e,["toolConfig"]);if(n!==void 0&&se!=null&&m(n,["toolConfig"],Jq(se)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=d(e,["cachedContent"]);n!==void 0&&le!=null&&m(n,["cachedContent"],kr(t,le));const M=d(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const b=d(e,["mediaResolution"]);b!=null&&m(i,["mediaResolution"],b);const N=d(e,["speechConfig"]);if(N!=null&&m(i,["speechConfig"],xy(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=d(e,["thinkingConfig"]);U!=null&&m(i,["thinkingConfig"],U);const L=d(e,["imageConfig"]);L!=null&&m(i,["imageConfig"],Iq(L));const q=d(e,["enableEnhancedCivicAnswers"]);if(q!=null&&m(i,["enableEnhancedCivicAnswers"],q),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function jF(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&m(n,["systemInstruction"],sn(o));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=d(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=d(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=d(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const x=d(e,["seed"]);x!=null&&m(i,["seed"],x);const D=d(e,["responseMimeType"]);D!=null&&m(i,["responseMimeType"],D);const B=d(e,["responseSchema"]);B!=null&&m(i,["responseSchema"],ky(B));const J=d(e,["responseJsonSchema"]);J!=null&&m(i,["responseJsonSchema"],J);const G=d(e,["routingConfig"]);G!=null&&m(i,["routingConfig"],G);const oe=d(e,["modelSelectionConfig"]);oe!=null&&m(i,["modelConfig"],oe);const se=d(e,["safetySettings"]);if(n!==void 0&&se!=null){let ae=se;Array.isArray(ae)&&(ae=ae.map(ye=>ye)),m(n,["safetySettings"],ae)}const le=d(e,["tools"]);if(n!==void 0&&le!=null){let ae=ol(le);Array.isArray(ae)&&(ae=ae.map(ye=>Dw(rl(ye)))),m(n,["tools"],ae)}const M=d(e,["toolConfig"]);n!==void 0&&M!=null&&m(n,["toolConfig"],M);const b=d(e,["labels"]);n!==void 0&&b!=null&&m(n,["labels"],b);const N=d(e,["cachedContent"]);n!==void 0&&N!=null&&m(n,["cachedContent"],kr(t,N));const U=d(e,["responseModalities"]);U!=null&&m(i,["responseModalities"],U);const L=d(e,["mediaResolution"]);L!=null&&m(i,["mediaResolution"],L);const q=d(e,["speechConfig"]);q!=null&&m(i,["speechConfig"],xy(q));const P=d(e,["audioTimestamp"]);P!=null&&m(i,["audioTimestamp"],P);const qe=d(e,["thinkingConfig"]);qe!=null&&m(i,["thinkingConfig"],qe);const mt=d(e,["imageConfig"]);if(mt!=null&&m(i,["imageConfig"],Rq(mt)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const X=d(e,["modelArmorConfig"]);return n!==void 0&&X!=null&&m(n,["modelArmorConfig"],X),i}function RA(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>rh(f))),m(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(n,["generationConfig"],ZF(t,a,n)),n}function wA(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(f=>f)),m(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(n,["generationConfig"],jF(t,a,n)),n}function NA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>TF(h))),m(e,["candidates"],p)}const o=d(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=d(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=d(t,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function bA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["candidates"],h)}const o=d(t,["createTime"]);o!=null&&m(e,["createTime"],o);const a=d(t,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const u=d(t,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const f=d(t,["responseId"]);f!=null&&m(e,["responseId"],f);const p=d(t,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function eq(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=d(t,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=d(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=d(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const _=d(t,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const E=d(t,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const T=d(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=d(t,["imageSize"]);if(e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function tq(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(t,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=d(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=d(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=d(t,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=d(t,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const D=d(t,["addWatermark"]);e!==void 0&&D!=null&&m(e,["parameters","addWatermark"],D);const B=d(t,["labels"]);e!==void 0&&B!=null&&m(e,["labels"],B);const J=d(t,["imageSize"]);e!==void 0&&J!=null&&m(e,["parameters","sampleImageSize"],J);const G=d(t,["enhancePrompt"]);return e!==void 0&&G!=null&&m(e,["parameters","enhancePrompt"],G),n}function nq(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&eq(a,n),n}function iq(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&tq(a,n),n}function rq(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>gq(u))),m(e,["generatedImages"],a)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],bw(o)),e}function oq(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>oh(u))),m(e,["generatedImages"],a)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],Mw(o)),e}function sq(t,e){const n={},i=d(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(t,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=d(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=d(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(t,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],sh(_));const E=d(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(I=>l5(I))),m(e,["instances[0]","referenceImages"],T)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function aq(t,e){const n={},i=d(t,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=d(t,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const u=d(t,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const f=d(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=d(t,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=d(t,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=d(t,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const T=d(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const I=d(t,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const k=d(t,["generateAudio"]);e!==void 0&&k!=null&&m(e,["parameters","generateAudio"],k);const x=d(t,["lastFrame"]);e!==void 0&&x!=null&&m(e,["instances[0]","lastFrame"],Ai(x));const D=d(t,["referenceImages"]);if(e!==void 0&&D!=null){let G=D;Array.isArray(G)&&(G=G.map(oe=>u5(oe))),m(e,["instances[0]","referenceImages"],G)}const B=d(t,["mask"]);e!==void 0&&B!=null&&m(e,["instances[0]","mask"],a5(B));const J=d(t,["compressionQuality"]);return e!==void 0&&J!=null&&m(e,["parameters","compressionQuality"],J),n}function lq(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],dq(u)),e}function uq(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["response"]);return u!=null&&m(e,["response"],hq(u)),e}function cq(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&m(n,["instances[0]","image"],sh(a));const u=d(e,["video"]);u!=null&&m(n,["instances[0]","video"],Pw(u));const f=d(e,["source"]);f!=null&&pq(f,n);const p=d(e,["config"]);return p!=null&&sq(p,n),n}function fq(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["prompt"]);o!=null&&m(n,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&m(n,["instances[0]","image"],Ai(a));const u=d(e,["video"]);u!=null&&m(n,["instances[0]","video"],kw(u));const f=d(e,["source"]);f!=null&&mq(f,n);const p=d(e,["config"]);return p!=null&&aq(p,n),n}function dq(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>_q(u))),m(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function hq(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>vq(u))),m(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function pq(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],sh(o));const a=d(t,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],Pw(a)),n}function mq(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ai(o));const a=d(t,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],kw(a)),n}function gq(t){const e={},n=d(t,["_self"]);n!=null&&m(e,["image"],wq(n));const i=d(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=d(t,["_self"]);return o!=null&&m(e,["safetyAttributes"],bw(o)),e}function oh(t){const e={},n=d(t,["_self"]);n!=null&&m(e,["image"],Nw(n));const i=d(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=d(t,["_self"]);o!=null&&m(e,["safetyAttributes"],Mw(o));const a=d(t,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function yq(t){const e={},n=d(t,["_self"]);n!=null&&m(e,["mask"],Nw(n));const i=d(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["labels"],o)}return e}function _q(t){const e={},n=d(t,["video"]);return n!=null&&m(e,["video"],o5(n)),e}function vq(t){const e={},n=d(t,["_self"]);return n!=null&&m(e,["video"],s5(n)),e}function Eq(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=d(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=d(t,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=d(t,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(t,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(t,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(t,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=d(t,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=d(t,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=d(t,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=d(t,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const x=d(t,["responseSchema"]);x!=null&&m(e,["responseSchema"],x);const D=d(t,["routingConfig"]);D!=null&&m(e,["routingConfig"],D);const B=d(t,["seed"]);B!=null&&m(e,["seed"],B);const J=d(t,["speechConfig"]);J!=null&&m(e,["speechConfig"],J);const G=d(t,["stopSequences"]);G!=null&&m(e,["stopSequences"],G);const oe=d(t,["temperature"]);oe!=null&&m(e,["temperature"],oe);const se=d(t,["thinkingConfig"]);se!=null&&m(e,["thinkingConfig"],se);const le=d(t,["topK"]);le!=null&&m(e,["topK"],le);const M=d(t,["topP"]);if(M!=null&&m(e,["topP"],M),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Tq(t,e){const n={},i=d(e,["model"]);return i!=null&&m(n,["_url","name"],Ye(t,i)),n}function Sq(t,e){const n={},i=d(e,["model"]);return i!=null&&m(n,["_url","name"],Ye(t,i)),n}function Aq(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function Cq(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function Iq(t){const e={},n=d(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Rq(t){const e={},n=d(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=d(t,["imageSize"]);i!=null&&m(e,["imageSize"],i);const o=d(t,["personGeneration"]);o!=null&&m(e,["personGeneration"],o);const a=d(t,["outputMimeType"]);a!=null&&m(e,["imageOutputOptions","mimeType"],a);const u=d(t,["outputCompressionQuality"]);return u!=null&&m(e,["imageOutputOptions","compressionQuality"],u),e}function wq(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],Lo(n));const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Nw(t){const e={},n=d(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Lo(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function sh(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],Lo(n));const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ai(t){const e={},n=d(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=d(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Lo(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Nq(t,e,n){const i={},o=d(e,["pageSize"]);n!==void 0&&o!=null&&m(n,["_query","pageSize"],o);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&m(n,["_query","pageToken"],a);const u=d(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&m(n,["_url","models_url"],Tw(t,f)),i}function bq(t,e,n){const i={},o=d(e,["pageSize"]);n!==void 0&&o!=null&&m(n,["_query","pageSize"],o);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&m(n,["_query","pageToken"],a);const u=d(e,["filter"]);n!==void 0&&u!=null&&m(n,["_query","filter"],u);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&m(n,["_url","models_url"],Tw(t,f)),i}function Mq(t,e){const n={},i=d(e,["config"]);return i!=null&&Nq(t,i,n),n}function Dq(t,e){const n={},i=d(e,["config"]);return i!=null&&bq(t,i,n),n}function Pq(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["_self"]);if(o!=null){let a=Sw(o);Array.isArray(a)&&(a=a.map(u=>gg(u))),m(e,["models"],a)}return e}function kq(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["_self"]);if(o!=null){let a=Sw(o);Array.isArray(a)&&(a=a.map(u=>yg(u))),m(e,["models"],a)}return e}function xq(t){const e={},n=d(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const i=d(t,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const o=d(t,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function gg(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(t,["description"]);o!=null&&m(e,["description"],o);const a=d(t,["version"]);a!=null&&m(e,["version"],a);const u=d(t,["_self"]);u!=null&&m(e,["tunedModelInfo"],Wq(u));const f=d(t,["inputTokenLimit"]);f!=null&&m(e,["inputTokenLimit"],f);const p=d(t,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=d(t,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const _=d(t,["temperature"]);_!=null&&m(e,["temperature"],_);const E=d(t,["maxTemperature"]);E!=null&&m(e,["maxTemperature"],E);const T=d(t,["topP"]);T!=null&&m(e,["topP"],T);const I=d(t,["topK"]);I!=null&&m(e,["topK"],I);const k=d(t,["thinking"]);return k!=null&&m(e,["thinking"],k),e}function yg(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(t,["description"]);o!=null&&m(e,["description"],o);const a=d(t,["versionId"]);a!=null&&m(e,["version"],a);const u=d(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>YF(T))),m(e,["endpoints"],E)}const f=d(t,["labels"]);f!=null&&m(e,["labels"],f);const p=d(t,["_self"]);p!=null&&m(e,["tunedModelInfo"],Xq(p));const h=d(t,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const _=d(t,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>T)),m(e,["checkpoints"],E)}return e}function Vq(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&m(e,["fileData"],JF(a));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],QF(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],EF(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function Uq(t){const e={},n=d(t,["productImage"]);return n!=null&&m(e,["image"],Ai(n)),e}function Lq(t,e){const n={},i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(t,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=d(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=d(t,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const E=d(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const I=d(t,["labels"]);return e!==void 0&&I!=null&&m(e,["labels"],I),n}function Oq(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["source"]);o!=null&&qq(o,n);const a=d(e,["config"]);return a!=null&&Lq(a,n),n}function Fq(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>oh(o))),m(e,["generatedImages"],i)}return e}function qq(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(t,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Ai(o));const a=d(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>Uq(f))),m(e,["instances[0]","productImages"],u)}return n}function Bq(t){const e={},n=d(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],Ai(n));const i=d(t,["referenceId"]);i!=null&&m(e,["referenceId"],i);const o=d(t,["referenceType"]);o!=null&&m(e,["referenceType"],o);const a=d(t,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],xq(a));const u=d(t,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],wF(u));const f=d(t,["styleImageConfig"]);f!=null&&m(e,["styleImageConfig"],f);const p=d(t,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function bw(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=d(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function Mw(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=d(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function Hq(t){const e={},n=d(t,["category"]);if(n!=null&&m(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function Gq(t){const e={},n=d(t,["image"]);return n!=null&&m(e,["image"],Ai(n)),e}function zq(t,e){const n={},i=d(t,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const o=d(t,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const a=d(t,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const u=d(t,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const p=d(t,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),n}function $q(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["source"]);o!=null&&Yq(o,n);const a=d(e,["config"]);return a!=null&&zq(a,n),n}function Kq(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yq(o))),m(e,["generatedMasks"],i)}return e}function Yq(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ai(o));const a=d(t,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],Gq(a)),n}function Jq(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const i=d(t,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],WF(i)),e}function Qq(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],Aq(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],Cq(f));const p=d(t,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Dw(t){const e={},n=d(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=d(t,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(t,["codeExecution"]);o!=null&&m(e,["codeExecution"],o);const a=d(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=d(t,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>XF(T))),m(e,["functionDeclarations"],E)}const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const h=d(t,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=d(t,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function Wq(t){const e={},n=d(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=d(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function Xq(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=d(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function Zq(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),n}function jq(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),n}function e5(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","name"],Ye(t,i));const o=d(e,["config"]);return o!=null&&Zq(o,n),n}function t5(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["config"]);return o!=null&&jq(o,n),n}function n5(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const u=d(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const p=d(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=d(t,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=d(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=d(t,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const I=d(t,["mode"]);return e!==void 0&&I!=null&&m(e,["parameters","mode"],I),n}function i5(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["_url","model"],Ye(t,i));const o=d(e,["image"]);o!=null&&m(n,["instances[0]","image"],Ai(o));const a=d(e,["upscaleFactor"]);a!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=d(e,["config"]);return u!=null&&n5(u,n),n}function r5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>oh(a))),m(e,["generatedImages"],o)}return e}function o5(t){const e={},n=d(t,["uri"]);n!=null&&m(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Lo(i));const o=d(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function s5(t){const e={},n=d(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Lo(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function a5(t){const e={},n=d(t,["image"]);n!=null&&m(e,["_self"],Ai(n));const i=d(t,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function l5(t){const e={},n=d(t,["image"]);n!=null&&m(e,["image"],sh(n));const i=d(t,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function u5(t){const e={},n=d(t,["image"]);n!=null&&m(e,["image"],Ai(n));const i=d(t,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function Pw(t){const e={},n=d(t,["uri"]);n!=null&&m(e,["uri"],n);const i=d(t,["videoBytes"]);i!=null&&m(e,["encodedVideo"],Lo(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function kw(t){const e={},n=d(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const i=d(t,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Lo(i));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c5(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),n}function f5(t){const e={},n=d(t,["config"]);return n!=null&&c5(n,e),e}function d5(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),n}function h5(t){const e={},n=d(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&d5(i,e),e}function p5(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function m5(t,e){const n={},i=d(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),n}function g5(t){const e={},n=d(t,["name"]);n!=null&&m(e,["name"],n);const i=d(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const a=d(t,["error"]);a!=null&&m(e,["error"],a);const u=d(t,["response"]);return u!=null&&m(e,["response"],_5(u)),e}function y5(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const i=d(t,["fileName"]);i!=null&&m(e,["fileName"],i);const o=d(t,["config"]);return o!=null&&m5(o,e),e}function _5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&m(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function v5(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function E5(t){const e={},n=d(t,["config"]);return n!=null&&v5(n,e),e}function T5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function xw(t,e){const n={},i=d(t,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=d(t,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>p)),m(e,["customMetadata"],f)}const u=d(t,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),n}function S5(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const i=d(t,["config"]);return i!=null&&xw(i,e),e}function A5(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C5="Content-Type",I5="X-Server-Timeout",R5="User-Agent",_g="x-goog-api-client",w5="1.38.0",N5=`google-genai-sdk/${w5}`,b5="v1beta1",M5="v1beta";class D5{constructor(e){var n,i,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:b5}else{if(!this.clientOptions.apiKey)throw new Bu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:M5,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===dg.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>a.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&P5(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await MA(o),new hg(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await MA(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return yi(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Ie(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(_,{stream:!0});try{const k=JSON.parse(E);if("error"in k){const x=JSON.parse(JSON.stringify(k.error)),D=x.status,B=x.code,J=`got status: ${D}. ${JSON.stringify(k)}`;if(B>=400&&B<600)throw new Bu({message:J,status:B})}}catch(k){if(k.name==="ApiError")throw k}u+=E;let T=-1,I=0;for(;;){T=-1,I=0;for(const D of p){const B=u.indexOf(D);B!==-1&&(T===-1||B<T)&&(T=B,I=D.length)}if(T===-1)break;const k=u.substring(0,T);u=u.substring(T+I);const x=k.trim();if(x.startsWith(f)){const D=x.substring(f.length).trim();try{const B=new Response(D,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new hg(B))}catch(B){throw new Error(`exception parsing stream chunk ${D}. ${B}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=N5+" "+this.clientOptions.userAgentExtra;return e[R5]=n,e[_g]=n,e[C5]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(I5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const f=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const p={file:o},h=this.getFileName(e),_=fe("upload/v1beta/files",p._url),E=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,p,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var o;const a=this.clientOptions.uploader,u=await a.stat(n),f=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),E={};i!=null&&xw(i,E);const T=await this.fetchUploadUrl(h,f,p,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,a,u){var f;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function MA(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Bu({message:o,status:n}):new Error(o)}}function P5(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=f[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[p]=h)}return f}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k5="mcp_used/unknown";let x5=!1;function Vw(t){for(const e of t)if(V5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return x5}function Uw(t){var e;const n=(e=t[_g])!==null&&e!==void 0?e:"";t[_g]=(n+` ${k5}`).trimStart()}function V5(t){return t!==null&&typeof t=="object"&&t instanceof Uy}function U5(t){return yi(this,arguments,function*(n,i=100){let o,a=0;for(;a<i;){const u=yield Ie(n.listTools({cursor:o}));for(const f of u.tools)yield yield Ie(f),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class Uy{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Uy(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,p=(n=void 0,_i(U5(_))),h;h=await p.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const E=o;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=_}}catch(E){n={error:E}}finally{try{!f&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),h6(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function L5(t,e,n){const i=new o6;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class O5{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=B5(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(G=>{h=G}),E=e.callbacks,T=function(){h({})},I=this.apiClient,k={onopen:T,onmessage:G=>{L5(I,E.onmessage,G)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(G){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(G){}},x=this.webSocketFactory.create(p,q5(u),k);x.connect(),await _;const J={setup:{model:Ye(this.apiClient,e.model)}};return x.send(JSON.stringify(J)),new F5(x,this.apiClient)}}class F5{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=cF(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=uF(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ka.PLAY)}pause(){this.sendPlaybackControl(ka.PAUSE)}stop(){this.sendPlaybackControl(ka.STOP)}resetContext(){this.sendPlaybackControl(ka.RESET_CONTEXT)}close(){this.conn.close()}}function q5(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function B5(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function G5(t,e,n){const i=new r6;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const u=hF(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class z5{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new O5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Vw(e.config.tools)&&Uw(E);const T=J5(E);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),U=this.apiClient.getLocation(),L=this.apiClient.getApiKey(),q=!!N&&!!U||!!L;this.apiClient.getCustomBaseUrl()&&!q?_=p:(_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_))}else{const N=this.apiClient.getApiKey();let U="BidiGenerateContent",L="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",L="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${U}?${L}=${N}`}let I=()=>{};const k=new Promise(N=>{I=N}),x=e.callbacks,D=function(){var N;(N=x==null?void 0:x.onopen)===null||N===void 0||N.call(x),I({})},B=this.apiClient,J={onopen:D,onmessage:N=>{G5(B,x.onmessage,N)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(N){}},G=this.webSocketFactory.create(_,Y5(T),J);G.connect(),await k;let oe=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const N=this.apiClient.getProject(),U=this.apiClient.getLocation();N&&U&&(oe=`projects/${N}/locations/${U}/`+oe)}let se={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Nd.AUDIO]}:e.config.responseModalities=[Nd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],M=[];for(const N of le)if(this.isCallableTool(N)){const U=N;M.push(await U.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const b={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=lF(this.apiClient,b):se=aF(this.apiClient,b),delete se.config,G.send(JSON.stringify(se)),new K5(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const $5={turnComplete:!0};class K5{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Wn(n.turns),e.isVertexAI()||(i=i.map(o=>rh(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(H5)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},$5),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:dF(e)}:n={realtimeInput:fF(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Y5(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function J5(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DA=10;function PA(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ga(u)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ga(t){return"callTool"in t&&typeof t.callTool=="function"}function Q5(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Ga(o)))!==null&&i!==void 0?i:!1}function kA(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(Ga(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(o)}),n}function xA(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W5 extends Pr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,u,f;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Q5(n)||PA(n.config))return await this.generateContentInternal(p);const h=kA(n);if(h.length>0){const x=h.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let _,E;const T=Wn(p.contents),I=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:DA;let k=0;for(;k<I&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const x=_.candidates[0].content,D=[];for(const B of(f=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Ga(B)){const G=await B.callTool(_.functionCalls);D.push(...G)}k++,E={role:"user",parts:D},p.contents=Wn(p.contents),p.contents.push(x),p.contents.push(E),xA(p.config)&&(T.push(x),T.push(E))}return xA(p.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async n=>{var i,o,a,u,f;if(this.maybeMoveToResponseJsonSchem(n),PA(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const p=kA(n);if(p.length>0){const E=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(f=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Us(Dr.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,a,u,f,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(f=n.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Ga(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&Vw(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Uw(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ga(u)){const f=u,p=await f.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,f)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:DA;let u=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(h,_,E){return yi(this,arguments,function*(){for(var T,I,k,x,D,B;f<a;){u&&(f++,u=!1);const se=yield Ie(h.processParamsMaybeAddMcpUsage(E)),le=yield Ie(h.generateContentStreamInternal(se)),M=[],b=[];try{for(var J=!0,G=(I=void 0,_i(le)),oe;oe=yield Ie(G.next()),T=oe.done,!T;J=!0){x=oe.value,J=!1;const N=x;if(yield yield Ie(N),N.candidates&&(!((D=N.candidates[0])===null||D===void 0)&&D.content)){b.push(N.candidates[0].content);for(const U of(B=N.candidates[0].content.parts)!==null&&B!==void 0?B:[])if(f<a&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(U.functionCall.name)){const L=yield Ie(_.get(U.functionCall.name).callTool([U.functionCall]));M.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!J&&!T&&(k=G.return)&&(yield Ie(k.call(G)))}finally{if(I)throw I.error}}if(M.length>0){u=!0;const N=new mu;N.candidates=[{content:{role:"user",parts:M}}],yield yield Ie(N);const U=[];U.push(...b),U.push({role:"user",parts:M});const L=Wn(E.contents).concat(U);E.contents=L}else break}})})(this,p,e)}async generateContentInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=wA(this.apiClient,e);return f=fe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=bA(_),T=new mu;return Object.assign(T,E),T})}else{const h=RA(this.apiClient,e);return f=fe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=NA(_),T=new mu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=wA(this.apiClient,e);return f=fe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return yi(this,arguments,function*(){var T,I,k,x;try{for(var D=!0,B=_i(E),J;J=yield Ie(B.next()),T=J.done,!T;D=!0){x=J.value,D=!1;const G=x,oe=bA(yield Ie(G.json()));oe.sdkHttpResponse={headers:G.headers};const se=new mu;Object.assign(se,oe),yield yield Ie(se)}}catch(G){I={error:G}}finally{try{!D&&!T&&(k=B.return)&&(yield Ie(k.call(B)))}finally{if(I)throw I.error}}})})}else{const h=RA(this.apiClient,e);return f=fe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return yi(this,arguments,function*(){var T,I,k,x;try{for(var D=!0,B=_i(E),J;J=yield Ie(B.next()),T=J.done,!T;D=!0){x=J.value,D=!1;const G=x,oe=NA(yield Ie(G.json()));oe.sdkHttpResponse={headers:G.headers};const se=new mu;Object.assign(se,oe),yield yield Ie(se)}}catch(G){I={error:G}}finally{try{!D&&!T&&(k=B.return)&&(yield Ie(k.call(B)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=zF(this.apiClient,e);return f=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=KF(_),T=new uA;return Object.assign(T,E),T})}else{const h=GF(this.apiClient,e);return f=fe("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=$F(_),T=new uA;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=iq(this.apiClient,e);return f=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=oq(_),T=new cA;return Object.assign(T,E),T})}else{const h=nq(this.apiClient,e);return f=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=rq(_),T=new cA;return Object.assign(T,E),T})}}async editImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=FF(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=qF(p),_=new Y4;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=i5(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=r5(p),_=new J4;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=Oq(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=Fq(p),_=new Q4;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=$q(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=Kq(p),_=new W4;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=Sq(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>yg(_))}else{const h=Tq(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>gg(_))}}async listInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=Dq(this.apiClient,e);return f=fe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=kq(_),T=new fA;return Object.assign(T,E),T})}else{const h=Mq(this.apiClient,e);return f=fe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=Pq(_),T=new fA;return Object.assign(T,E),T})}}async update(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=t5(this.apiClient,e);return f=fe("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>yg(_))}else{const h=e5(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>gg(_))}}async delete(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=VF(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=LF(_),T=new dA;return Object.assign(T,E),T})}else{const h=xF(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=UF(_),T=new dA;return Object.assign(T,E),T})}}async countTokens(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=DF(this.apiClient,e);return f=fe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=kF(_),T=new hA;return Object.assign(T,E),T})}else{const h=MF(this.apiClient,e);return f=fe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=PF(_),T=new hA;return Object.assign(T,E),T})}}async computeTokens(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=AF(this.apiClient,e);return a=fe("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=CF(p),_=new X4;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=fq(this.apiClient,e);return f=fe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=uq(_),T=new bd;return Object.assign(T,E),T})}else{const h=cq(this.apiClient,e);return f=fe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=lq(_),T=new bd;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X5 extends Pr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=B4(e);return f=fe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=q4(e);return f=fe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=k4(e);return a=fe("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z5(t){const e={},n=d(t,["data"]);if(n!=null&&m(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function j5(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>lB(a))),m(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&m(e,["role"],i),e}function eB(t,e,n){const i={},o=d(e,["expireTime"]);n!==void 0&&o!=null&&m(n,["expireTime"],o);const a=d(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&m(n,["newSessionExpireTime"],a);const u=d(e,["uses"]);n!==void 0&&u!=null&&m(n,["uses"],u);const f=d(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&m(n,["bidiGenerateContentSetup"],aB(t,f));const p=d(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&m(n,["fieldMask"],p),i}function tB(t,e){const n={},i=d(e,["config"]);return i!=null&&m(n,["config"],eB(t,i,n)),n}function nB(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function iB(t){const e={},n=d(t,["id"]);n!=null&&m(e,["id"],n);const i=d(t,["args"]);i!=null&&m(e,["args"],i);const o=d(t,["name"]);if(o!=null&&m(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rB(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function oB(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function sB(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(t,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(t,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(t,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(t,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Vy(E));const T=d(t,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(t,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(t,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],j5(sn(k)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let le=ol(x);Array.isArray(le)&&(le=le.map(M=>cB(rl(M)))),m(e,["setup","tools"],le)}const D=d(t,["sessionResumption"]);e!==void 0&&D!=null&&m(e,["setup","sessionResumption"],uB(D));const B=d(t,["inputAudioTranscription"]);e!==void 0&&B!=null&&m(e,["setup","inputAudioTranscription"],B);const J=d(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&m(e,["setup","outputAudioTranscription"],J);const G=d(t,["realtimeInputConfig"]);e!==void 0&&G!=null&&m(e,["setup","realtimeInputConfig"],G);const oe=d(t,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const se=d(t,["proactivity"]);if(e!==void 0&&se!=null&&m(e,["setup","proactivity"],se),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function aB(t,e){const n={},i=d(e,["model"]);i!=null&&m(n,["setup","model"],Ye(t,i));const o=d(e,["config"]);return o!=null&&m(n,["config"],sB(o,n)),n}function lB(t){const e={},n=d(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&m(e,["fileData"],nB(a));const u=d(t,["functionCall"]);u!=null&&m(e,["functionCall"],iB(u));const f=d(t,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(t,["inlineData"]);p!=null&&m(e,["inlineData"],Z5(p));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const _=d(t,["thought"]);_!=null&&m(e,["thought"],_);const E=d(t,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(t,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function uB(t){const e={},n=d(t,["handle"]);if(n!=null&&m(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cB(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=d(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],rB(u));const f=d(t,["googleSearch"]);f!=null&&m(e,["googleSearch"],oB(f));const p=d(t,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=d(t,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fB(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function dB(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=fB(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),f.length>0&&p.push(...f),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class hB extends Pr{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=tB(this.apiClient,e);a=fe("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const p=dB(f,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pB(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),n}function mB(t){const e={},n=d(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&pB(i,e),e}function gB(t){const e={},n=d(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function yB(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),n}function _B(t){const e={},n=d(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const i=d(t,["config"]);return i!=null&&yB(i,e),e}function vB(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(t,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EB extends Pr{constructor(e){super(),this.apiClient=e,this.list=async n=>new Us(Dr.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gB(e);return a=fe("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mB(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_B(e);return a=fe("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=vB(p),_=new Z4;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TB extends Pr{constructor(e,n=new EB(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Us(Dr.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=f5(e);return a=fe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=p5(e);return a=fe("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=h5(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=E5(e);return a=fe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=T5(p),_=new j4;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=S5(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=A5(p),_=new e6;return Object.assign(_,h),_})}}async importFile(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=y5(e);return a=fe("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=g5(p),_=new My;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lw=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Lw=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const SB=()=>Lw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Eg=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn extends Error{}class hn extends jn{constructor(e,n,i,o){super(`${hn.makeMessage(e,n,i)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,i,o){if(!e||!o)return new ah({message:i,cause:Eg(n)});const a=n;return e===400?new Fw(e,a,i,o):e===401?new qw(e,a,i,o):e===403?new Bw(e,a,i,o):e===404?new Hw(e,a,i,o):e===409?new Gw(e,a,i,o):e===422?new zw(e,a,i,o):e===429?new $w(e,a,i,o):e>=500?new Kw(e,a,i,o):new hn(e,a,i,o)}}class Tg extends hn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ah extends hn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Ow extends ah{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Fw extends hn{}class qw extends hn{}class Bw extends hn{}class Hw extends hn{}class Gw extends hn{}class zw extends hn{}class $w extends hn{}class Kw extends hn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AB=/^[a-z][a-z0-9+.-]*:/i,CB=t=>AB.test(t);let Sg=t=>(Sg=Array.isArray,Sg(t));const IB=Sg;let RB=IB;const VA=RB;function wB(t){if(!t)return!0;for(const e in t)return!1;return!0}function NB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const bB=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new jn(`${t} must be an integer`);if(e<0)throw new jn(`${t} must be a positive integer`);return e},MB=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DB=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Da="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const kB=()=>{var t,e,n,i,o;const a=PB();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":LA(Deno.build.os),"X-Stainless-Arch":UA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":LA((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":UA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=xB();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Da,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const UA=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",LA=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ff;const VB=()=>Ff??(Ff=kB());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Yw(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function LB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Yw({start(){},async pull(n){const{done:i,value:o}=await e.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Jw(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function OB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qw=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function km(t,e,n){return Qw(),new File(t,e??"unknown_file",n)}function qB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const BB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ww=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",HB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Ww(t),GB=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function zB(t,e,n){if(Qw(),t=await t,HB(t))return t instanceof File?t:km([await t.arrayBuffer()],t.name);if(GB(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),km(await Ag(o),e,n)}const i=await Ag(t);if(e||(e=qB(t)),!(n!=null&&n.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return km(i,e,n)}async function Ag(t){var e,n,i,o,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(Ww(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(BB(t))try{for(var f=!0,p=_i(t),h;h=await p.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const _=o;u.push(...await Ag(_))}}catch(_){n={error:_}}finally{try{!f&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}else{const _=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${$B(t)}`)}return u}function $B(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xw{constructor(e){this._client=e}}Xw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zw(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const OA=Object.freeze(Object.create(null)),KB=(t=Zw)=>(function(n,...i){if(n.length===1)return n[0];let o=!1;const a=[],u=n.reduce((_,E,T)=>{var I,k,x;/[?#]/.test(E)&&(o=!0);const D=i[T];let B=(o?encodeURIComponent:t)(""+D);return T!==i.length&&(D==null||typeof D=="object"&&D.toString===((x=Object.getPrototypeOf((k=Object.getPrototypeOf((I=D.hasOwnProperty)!==null&&I!==void 0?I:OA))!==null&&k!==void 0?k:OA))===null||x===void 0?void 0:x.toString))&&(B=D+"",a.push({start:_.length+E.length,length:B.length,error:`Value of type ${Object.prototype.toString.call(D).slice(8,-1)} is not a valid path parameter`})),_+E+(T===i.length?"":B)},""),f=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(f))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,E)=>_.start-E.start),a.length>0){let _=0;const E=a.reduce((T,I)=>{const k=" ".repeat(I.start-_),x="^".repeat(I.length);return _=I.start+I.length,T+k+x},"");throw new jn(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${u}
${E}`)}return u}),qf=KB(Zw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jw extends Xw{create(e,n){var i;const{api_version:o=this._client.apiVersion}=e,a=Dd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new jn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new jn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(qf`/${o}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(qf`/${o}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(qf`/${o}/interactions/${e}/cancel`,i)}get(e,n={},i){var o;const a=n??{},{api_version:u=this._client.apiVersion}=a,f=Dd(a,["api_version"]);return this._client.get(qf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}jw._key=Object.freeze(["interactions"]);class e1 extends jw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YB(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let i=0;for(const o of t)n.set(o,i),i+=o.length;return n}let Bf;function Ly(t){let e;return(Bf??(e=new globalThis.TextEncoder,Bf=e.encode.bind(e)))(t)}let Hf;function FA(t){let e;return(Hf??(e=new globalThis.TextDecoder,Hf=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ly(e):e;this.buffer=YB([this.buffer,n]);const i=[];let o;for(;(o=JB(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(FA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=FA(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}lh.NEWLINE_CHARS=new Set([`
`,"\r"]);lh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function JB(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function QB(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pd={off:0,error:200,warn:300,info:400,debug:500},qA=(t,e,n)=>{if(t){if(NB(Pd,t))return t;fn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Pd))}`)}};function Au(){}function Gf(t,e,n){return!e||Pd[t]>Pd[n]?Au:e[t].bind(e)}const WB={error:Au,warn:Au,info:Au,debug:Au};let BA=new WeakMap;function fn(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return WB;const o=BA.get(n);if(o&&o[0]===i)return o[1];const a={error:Gf("error",n,i),warn:Gf("warn",n,i),info:Gf("info",n,i),debug:Gf("debug",n,i)};return BA.set(n,[i,a]),a}const gs=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xa{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let o=!1;const a=i?fn(i):console;function u(){return yi(this,arguments,function*(){var p,h,_,E;if(o)throw new jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,k=_i(XB(e,n)),x;x=yield Ie(k.next()),p=x.done,!p;I=!0){E=x.value,I=!1;const D=E;if(!T)if(D.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Ie(JSON.parse(D.data))}catch(B){throw a.error("Could not parse message into JSON:",D.data),a.error("From chunk:",D.raw),B}}}catch(D){h={error:D}}finally{try{!I&&!p&&(_=k.return)&&(yield Ie(_.call(k)))}finally{if(h)throw h.error}}T=!0}catch(D){if(vg(D))return yield Ie(void 0);throw D}finally{T||n.abort()}})}return new xa(u,n,i)}static fromReadableStream(e,n,i){let o=!1;function a(){return yi(this,arguments,function*(){var p,h,_,E;const T=new lh,I=Jw(e);try{for(var k=!0,x=_i(I),D;D=yield Ie(x.next()),p=D.done,!p;k=!0){E=D.value,k=!1;const B=E;for(const J of T.decode(B))yield yield Ie(J)}}catch(B){h={error:B}}finally{try{!k&&!p&&(_=x.return)&&(yield Ie(_.call(x)))}finally{if(h)throw h.error}}for(const B of T.flush())yield yield Ie(B)})}function u(){return yi(this,arguments,function*(){var p,h,_,E;if(o)throw new jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,k=_i(a()),x;x=yield Ie(k.next()),p=x.done,!p;I=!0){E=x.value,I=!1;const D=E;T||D&&(yield yield Ie(JSON.parse(D)))}}catch(D){h={error:D}}finally{try{!I&&!p&&(_=k.return)&&(yield Ie(_.call(k)))}finally{if(h)throw h.error}}T=!0}catch(D){if(vg(D))return yield Ie(void 0);throw D}finally{T||n.abort()}})}return new xa(u,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new xa(()=>o(e),this.controller,this.client),new xa(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Yw({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await n.next();if(a)return i.close();const u=Ly(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function XB(t,e){return yi(this,arguments,function*(){var i,o,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new jn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new jn("Attempted to iterate over a response with no body");const f=new jB,p=new lh,h=Jw(t.body);try{for(var _=!0,E=_i(ZB(h)),T;T=yield Ie(E.next()),i=T.done,!i;_=!0){u=T.value,_=!1;const I=u;for(const k of p.decode(I)){const x=f.decode(k);x&&(yield yield Ie(x))}}}catch(I){o={error:I}}finally{try{!_&&!i&&(a=E.return)&&(yield Ie(a.call(E)))}finally{if(o)throw o.error}}for(const I of p.flush()){const k=f.decode(I);k&&(yield yield Ie(k))}})}function ZB(t){return yi(this,arguments,function*(){var n,i,o,a;let u=new Uint8Array;try{for(var f=!0,p=_i(t),h;h=yield Ie(p.next()),n=h.done,!n;f=!0){a=h.value,f=!1;const _=a;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Ly(_):_;let T=new Uint8Array(u.length+E.length);T.set(u),T.set(E,u.length),u=T;let I;for(;(I=QB(u))!==-1;)yield yield Ie(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!f&&!n&&(o=p.return)&&(yield Ie(o.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ie(u))})}class jB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,o]=e9(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function e9(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function t9(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var f;if(e.options.stream)return fn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):xa.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const p=n.headers.get("content-type"),h=(f=p==null?void 0:p.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return fn(t).debug(`[${i}] response parsed`,gs({retryOfRequestLogID:o,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oy extends Promise{constructor(e,n,i=t9){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Oy(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t1=Symbol("brand.privateNullableHeaders");function*n9(t){if(!t)return;if(t1 in t){const{values:i,nulls:o}=t;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():VA(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=VA(i[1])?i[1]:[i[1]];let u=!1;for(const f of a)f!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,f])}}const gu=t=>{const e=new Headers,n=new Set;for(const i of t){const o=new Set;for(const[a,u]of n9(i)){const f=a.toLowerCase();o.has(f)||(e.delete(a),o.add(f)),u===null?(e.delete(a),n.add(f)):(e.append(a,u),n.delete(f))}}return{[t1]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xm=t=>{var e,n,i,o,a,u;if(typeof globalThis.process<"u")return(i=(n=(e=w4)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var n1;class uh{constructor(e){var n,i,o,a,u,f,p,{baseURL:h=xm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=xm("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=e,T=Dd(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:uh.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const k="warn";this.logLevel=k,this.logLevel=(u=(a=qA(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:qA(xm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=I.fetchOptions,this.maxRetries=(f=I.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=I.fetch)!==null&&p!==void 0?p:UB(),this.encoder=FB,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=gu([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return gu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return gu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new jn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Da}`}defaultIdempotencyKey(){return`stainless-node-retry-${SB()}`}makeStatusError(e,n,i,o){return hn.generate(e,n,i,o)}buildURL(e,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=CB(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return wB(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new Oy(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var o,a,u;const f=await e,p=(o=f.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=p),await this.prepareOptions(f);const{req:h,url:_,timeout:E}=await this.buildRequest(f,{retryCount:p-n});await this.prepareRequest(h,{url:_,options:f});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,k=Date.now();if(fn(this).debug(`[${T}] sending request`,gs({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:h.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new Tg;const x=new AbortController,D=await this.fetchWithTimeout(_,h,E,x).catch(Eg),B=Date.now();if(D instanceof globalThis.Error){const G=`retrying, ${n} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Tg;const oe=vg(D)||/timed? ?out/i.test(String(D)+("cause"in D?String(D.cause):""));if(n)return fn(this).info(`[${T}] connection ${oe?"timed out":"failed"} - ${G}`),fn(this).debug(`[${T}] connection ${oe?"timed out":"failed"} (${G})`,gs({retryOfRequestLogID:i,url:_,durationMs:B-k,message:D.message})),this.retryRequest(f,n,i??T);throw fn(this).info(`[${T}] connection ${oe?"timed out":"failed"} - error; no more retries left`),fn(this).debug(`[${T}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,gs({retryOfRequestLogID:i,url:_,durationMs:B-k,message:D.message})),oe?new Ow:new ah({cause:D})}const J=`[${T}${I}] ${h.method} ${_} ${D.ok?"succeeded":"failed"} with status ${D.status} in ${B-k}ms`;if(!D.ok){const G=await this.shouldRetry(D);if(n&&G){const N=`retrying, ${n} attempts remaining`;return await OB(D.body),fn(this).info(`${J} - ${N}`),fn(this).debug(`[${T}] response error (${N})`,gs({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,durationMs:B-k})),this.retryRequest(f,n,i??T,D.headers)}const oe=G?"error; no more retries left":"error; not retryable";fn(this).info(`${J} - ${oe}`);const se=await D.text().catch(N=>Eg(N).message),le=MB(se),M=le?void 0:se;throw fn(this).debug(`[${T}] response error (${oe})`,gs({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,message:M,durationMs:Date.now()-k})),this.makeStatusError(D.status,le,M,D.headers)}return fn(this).info(J),fn(this).debug(`[${T}] response start`,gs({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,durationMs:B-k})),{response:D,options:f,controller:x,requestLogID:T,retryOfRequestLogID:i,startTime:k}}async fetchWithTimeout(e,n,i,o){const a=n||{},{signal:u,method:f}=a,p=Dd(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,E=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),p);f&&(E.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,o){var a;let u;const f=o==null?void 0:o.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const p=o==null?void 0:o.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,h)}return await DB(u),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,o,a;const u=Object.assign({},e),{method:f,path:p,query:h,defaultBaseURL:_}=u,E=this.buildURL(p,h,_);"timeout"in u&&bB("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:I}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:f,bodyHeaders:T,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=gu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),VB()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=gu([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:LB(e)}:this.encoder({body:e,headers:i})}}uh.DEFAULT_TIMEOUT=6e4;class $t extends uh{constructor(){super(...arguments),this.interactions=new e1(this)}}n1=$t;$t.GeminiNextGenAPIClient=n1;$t.GeminiNextGenAPIClientError=jn;$t.APIError=hn;$t.APIConnectionError=ah;$t.APIConnectionTimeoutError=Ow;$t.APIUserAbortError=Tg;$t.NotFoundError=Hw;$t.ConflictError=Gw;$t.RateLimitError=$w;$t.BadRequestError=Fw;$t.AuthenticationError=qw;$t.InternalServerError=Kw;$t.PermissionDeniedError=Bw;$t.UnprocessableEntityError=zw;$t.toFile=zB;$t.Interactions=e1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i9(t,e){const n={},i=d(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function r9(t,e){const n={},i=d(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function o9(t,e){const n={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(n,["sdkHttpResponse"],i),n}function s9(t,e){const n={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(n,["sdkHttpResponse"],i),n}function a9(t,e,n){const i={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(t,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(t,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(t,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function l9(t,e,n){const i={};let o=d(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const I=d(t,["validationDataset"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec"],HA(I))}else if(o==="PREFERENCE_TUNING"){const I=d(t,["validationDataset"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec"],HA(I))}const a=d(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=d(t,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const I=d(t,["epochCount"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(f==="PREFERENCE_TUNING"){const I=d(t,["epochCount"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=d(t,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(p==="PREFERENCE_TUNING"){const I=d(t,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=d(t,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=d(t,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=d(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=d(t,["adapterSize"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=d(t,["adapterSize"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=d(t,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function u9(t,e){const n={},i=d(t,["baseModel"]);i!=null&&m(n,["baseModel"],i);const o=d(t,["preTunedModel"]);o!=null&&m(n,["preTunedModel"],o);const a=d(t,["trainingDataset"]);a!=null&&E9(a);const u=d(t,["config"]);return u!=null&&a9(u,n),n}function c9(t,e){const n={},i=d(t,["baseModel"]);i!=null&&m(n,["baseModel"],i);const o=d(t,["preTunedModel"]);o!=null&&m(n,["preTunedModel"],o);const a=d(t,["trainingDataset"]);a!=null&&T9(a,n,e);const u=d(t,["config"]);return u!=null&&l9(u,n,e),n}function f9(t,e){const n={},i=d(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function d9(t,e){const n={},i=d(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function h9(t,e,n){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function p9(t,e,n){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(t,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function m9(t,e){const n={},i=d(t,["config"]);return i!=null&&h9(i,n),n}function g9(t,e){const n={},i=d(t,["config"]);return i!=null&&p9(i,n),n}function y9(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(n,["nextPageToken"],o);const a=d(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>i1(f))),m(n,["tuningJobs"],u)}return n}function _9(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&m(n,["nextPageToken"],o);const a=d(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>Cg(f))),m(n,["tuningJobs"],u)}return n}function v9(t,e){const n={},i=d(t,["name"]);i!=null&&m(n,["model"],i);const o=d(t,["name"]);return o!=null&&m(n,["endpoint"],o),n}function E9(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(n,["examples","examples"],o)}return n}function T9(t,e,n){const i={};let o=d(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function i1(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&m(n,["name"],o);const a=d(t,["state"]);a!=null&&m(n,["state"],vw(a));const u=d(t,["createTime"]);u!=null&&m(n,["createTime"],u);const f=d(t,["tuningTask","startTime"]);f!=null&&m(n,["startTime"],f);const p=d(t,["tuningTask","completeTime"]);p!=null&&m(n,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(n,["updateTime"],h);const _=d(t,["description"]);_!=null&&m(n,["description"],_);const E=d(t,["baseModel"]);E!=null&&m(n,["baseModel"],E);const T=d(t,["_self"]);return T!=null&&m(n,["tunedModel"],v9(T)),n}function Cg(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&m(n,["name"],o);const a=d(t,["state"]);a!=null&&m(n,["state"],vw(a));const u=d(t,["createTime"]);u!=null&&m(n,["createTime"],u);const f=d(t,["startTime"]);f!=null&&m(n,["startTime"],f);const p=d(t,["endTime"]);p!=null&&m(n,["endTime"],p);const h=d(t,["updateTime"]);h!=null&&m(n,["updateTime"],h);const _=d(t,["error"]);_!=null&&m(n,["error"],_);const E=d(t,["description"]);E!=null&&m(n,["description"],E);const T=d(t,["baseModel"]);T!=null&&m(n,["baseModel"],T);const I=d(t,["tunedModel"]);I!=null&&m(n,["tunedModel"],I);const k=d(t,["preTunedModel"]);k!=null&&m(n,["preTunedModel"],k);const x=d(t,["supervisedTuningSpec"]);x!=null&&m(n,["supervisedTuningSpec"],x);const D=d(t,["preferenceOptimizationSpec"]);D!=null&&m(n,["preferenceOptimizationSpec"],D);const B=d(t,["tuningDataStats"]);B!=null&&m(n,["tuningDataStats"],B);const J=d(t,["encryptionSpec"]);J!=null&&m(n,["encryptionSpec"],J);const G=d(t,["partnerModelTuningSpec"]);G!=null&&m(n,["partnerModelTuningSpec"],G);const oe=d(t,["customBaseModel"]);oe!=null&&m(n,["customBaseModel"],oe);const se=d(t,["experiment"]);se!=null&&m(n,["experiment"],se);const le=d(t,["labels"]);le!=null&&m(n,["labels"],le);const M=d(t,["outputUri"]);M!=null&&m(n,["outputUri"],M);const b=d(t,["pipelineJob"]);b!=null&&m(n,["pipelineJob"],b);const N=d(t,["serviceAccount"]);N!=null&&m(n,["serviceAccount"],N);const U=d(t,["tunedModelDisplayName"]);U!=null&&m(n,["tunedModelDisplayName"],U);const L=d(t,["veoTuningSpec"]);return L!=null&&m(n,["veoTuningSpec"],L),n}function S9(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&m(n,["name"],o);const a=d(t,["metadata"]);a!=null&&m(n,["metadata"],a);const u=d(t,["done"]);u!=null&&m(n,["done"],u);const f=d(t,["error"]);return f!=null&&m(n,["error"],f),n}function HA(t,e){const n={},i=d(t,["gcsUri"]);i!=null&&m(n,["validationDatasetUri"],i);const o=d(t,["vertexDatasetResource"]);return o!=null&&m(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A9 extends Pr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Us(Dr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:fg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=d9(e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>Cg(_))}else{const h=f9(e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>i1(_))}}async listInternal(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=g9(e);return f=fe("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=_9(_),T=new pA;return Object.assign(T,E),T})}else{const h=m9(e);return f=fe("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=y9(_),T=new pA;return Object.assign(T,E),T})}}async cancel(e){var n,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=r9(e);return f=fe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=s9(_),T=new mA;return Object.assign(T,E),T})}else{const h=i9(e);return f=fe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=o9(_),T=new mA;return Object.assign(T,E),T})}}async tuneInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=c9(e,e);return a=fe("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>Cg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=u9(e);return a=fe("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>S9(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C9{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const I9=1024*1024*8,R9=3,w9=1e3,N9=2,kd="x-goog-upload-status";async function b9(t,e,n){var i;const o=await r1(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function M9(t,e,n){var i;const o=await r1(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=hw(a),f=new Dy;return Object.assign(f,u),f}async function r1(t,e,n){var i,o;let a=0,u=0,f=new hg(new Response),p="upload";for(a=t.size;u<a;){const h=Math.min(I9,a-u),_=t.slice(u,u+h);u+h>=a&&(p+=", finalize");let E=0,T=w9;for(;E<R9&&(f=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[kd]));)E++,await P9(T),T=T*N9;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[kd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function D9(t){return{size:t.size,type:t.type}}function P9(t){return new Promise(e=>setTimeout(e,t))}class k9{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b9(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await M9(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await D9(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x9{create(e,n,i){return new V9(e,n,i)}}class V9{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GA="x-goog-api-key";class U9{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(GA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L9="gl-node/";class tG{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new $t({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=D4(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new U9(this.apiKey);this.apiClient=new D5({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:L9+"web",uploader:new k9,downloader:new C9}),this.models=new W5(this.apiClient),this.live=new z5(this.apiClient,o,new x9),this.batches=new s3(this.apiClient),this.chats=new B3(this.models,this.apiClient),this.caches=new O3(this.apiClient),this.files=new X3(this.apiClient),this.operations=new X5(this.apiClient),this.authTokens=new hB(this.apiClient),this.tunings=new A9(this.apiClient),this.fileSearchStores=new TB(this.apiClient)}}export{fH as $,yH as A,pH as B,vH as C,EH as D,uH as E,cH as F,TH as G,gH as H,xH as I,XH as J,DH as K,PH as L,LH as M,kH as N,H9 as O,SH as P,OH as Q,F9 as R,zH as S,AH as T,ZH as U,bH as V,QH as W,_H as X,NH as Y,eG as Z,hH as _,aH as a,wH as a0,IH as a1,jH as a2,qH as a3,KH as a4,JH as a5,BH as a6,WH as a7,MH as a8,YH as a9,RH as aa,HH as ab,FH as ac,tG as ad,$H as ae,CH as af,GH as ag,z9 as ah,G9 as ai,Hb as aj,B9 as ak,q9 as al,Q9 as b,lH as c,Y9 as d,j9 as e,J9 as f,nH as g,Z9 as h,JD as i,tH as j,oH as k,sH as l,rH as m,iH as n,X9 as o,ko as p,W9 as q,Z as r,eH as s,O9 as t,tC as u,VH as v,UH as w,lC as x,mH as y,dH as z};
